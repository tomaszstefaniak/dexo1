(self.webpackChunk_jup_ag_terminal=self.webpackChunk_jup_ag_terminal||[]).push([[849],{17924:(e,n,t)=>{"use strict";t.d(n,{KJ:()=>f,NW:()=>M,YO:()=>g,Yj:()=>b,ai:()=>h,au:()=>k,lq:()=>w,nd:()=>S,vP:()=>y,vt:()=>m}),t(96763);class i extends TypeError{constructor(e,n){let t;const{message:i,explanation:a,...r}=e,{path:o}=e,s=0===o.length?i:`At path: ${o.join(".")} -- ${i}`;super(a??s),null!=a&&(this.cause=s),Object.assign(this,r),this.name=this.constructor.name,this.failures=()=>t??(t=[e,...n()])}}function a(e){return"object"==typeof e&&null!=e}function r(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function o(e,n,t,i){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:a,branch:o}=n,{type:s}=t,{refinement:u,message:c=`Expected a value of type \`${s}\`${u?` with refinement \`${u}\``:""}, but received: \`${r(i)}\``}=e;return{value:i,type:s,refinement:u,key:a[a.length-1],path:a,branch:o,...e,message:c}}function*s(e,n,t,i){var r;a(r=e)&&"function"==typeof r[Symbol.iterator]||(e=[e]);for(const a of e){const e=o(a,n,t,i);e&&(yield e)}}function*u(e,n,t={}){const{path:i=[],branch:r=[e],coerce:o=!1,mask:s=!1}=t,c={path:i,branch:r};if(o&&(e=n.coercer(e,c),s&&"type"!==n.type&&a(n.schema)&&a(e)&&!Array.isArray(e)))for(const t in e)void 0===n.schema[t]&&delete e[t];let m="valid";for(const i of n.validator(e,c))i.explanation=t.message,m="not_valid",yield[i,void 0];for(let[d,l,p]of n.entries(e,c)){const n=u(l,p,{path:void 0===d?i:[...i,d],branch:void 0===d?r:[...r,l],coerce:o,mask:s,message:t.message});for(const t of n)t[0]?(m=null!=t[0].refinement?"not_refined":"not_valid",yield[t[0],void 0]):o&&(l=t[1],void 0===d?e=l:e instanceof Map?e.set(d,l):e instanceof Set?e.add(l):a(e)&&(void 0!==l||d in e)&&(e[d]=l))}if("not_valid"!==m)for(const i of n.refiner(e,c))i.explanation=t.message,m="not_refined",yield[i,void 0];"valid"===m&&(yield[void 0,e])}class c{constructor(e){const{type:n,schema:t,validator:i,refiner:a,coercer:r=e=>e,entries:o=function*(){}}=e;this.type=n,this.schema=t,this.entries=o,this.coercer=r,this.validator=i?(e,n)=>s(i(e,n),n,this,e):()=>[],this.refiner=a?(e,n)=>s(a(e,n),n,this,e):()=>[]}assert(e,n){return function(e,n,t){const i=l(e,n,{message:t});if(i[0])throw i[0]}(e,this,n)}create(e,n){return m(e,this,n)}is(e){return d(e,this)}mask(e,n){return function(e,n,t){const i=l(e,n,{coerce:!0,mask:!0,message:t});if(i[0])throw i[0];return i[1]}(e,this,n)}validate(e,n={}){return l(e,this,n)}}function m(e,n,t){const i=l(e,n,{coerce:!0,message:t});if(i[0])throw i[0];return i[1]}function d(e,n){return!l(e,n)[0]}function l(e,n,t={}){const a=u(e,n,t),r=function(e){const{done:n,value:t}=e.next();return n?void 0:t}(a);return r[0]?[new i(r[0],(function*(){for(const e of a)e[0]&&(yield e[0])})),void 0]:[void 0,r[1]]}function p(e,n){return new c({type:e,schema:null,validator:n})}function g(e){return new c({type:"array",schema:e,*entries(n){if(e&&Array.isArray(n))for(const[t,i]of n.entries())yield[t,i,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${r(e)}`})}function y(e){const n={},t=e.map((e=>r(e))).join();for(const t of e)n[t]=t;return new c({type:"enums",schema:n,validator:n=>e.includes(n)||`Expected one of \`${t}\`, but received: ${r(n)}`})}function f(e){return p("instance",(n=>n instanceof e||`Expected a \`${e.name}\` instance, but received: ${r(n)}`))}function S(){return p("integer",(e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${r(e)}`))}function h(){return p("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${r(e)}`))}function w(e){return new c({...e,validator:(n,t)=>void 0===n||e.validator(n,t),refiner:(n,t)=>void 0===n||e.refiner(n,t)})}function b(){return p("string",(e=>"string"==typeof e||`Expected a string, but received: ${r(e)}`))}function M(e){const n=Object.keys(e);return new c({type:"type",schema:e,*entries(t){if(a(t))for(const i of n)yield[i,t[i],e[i]]},validator:e=>a(e)||`Expected an object, but received: ${r(e)}`,coercer:e=>a(e)?{...e}:e})}function k(e,n,t){return new c({...e,coercer:(i,a)=>d(i,n)?e.coercer(t(i,a),a):e.coercer(i,a)})}},20181:(e,n,t)=>{var i=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,u="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g,c="object"==typeof self&&self&&self.Object===Object&&self,m=u||c||Function("return this")(),d=Object.prototype.toString,l=Math.max,p=Math.min,g=function(){return m.Date.now()};function y(e){var n=typeof e;return!!e&&("object"==n||"function"==n)}function f(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(y(e)){var n="function"==typeof e.valueOf?e.valueOf():e;e=y(n)?n+"":n}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var t=r.test(e);return t||o.test(e)?s(e.slice(2),t?2:8):a.test(e)?NaN:+e}e.exports=function(e,n,t){var i,a,r,o,s,u,c=0,m=!1,d=!1,S=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(n){var t=i,r=a;return i=a=void 0,c=n,o=e.apply(r,t)}function w(e){var t=e-u;return void 0===u||t>=n||t<0||d&&e-c>=r}function b(){var e=g();if(w(e))return M(e);s=setTimeout(b,function(e){var t=n-(e-u);return d?p(t,r-(e-c)):t}(e))}function M(e){return s=void 0,S&&i?h(e):(i=a=void 0,o)}function k(){var e=g(),t=w(e);if(i=arguments,a=this,u=e,t){if(void 0===s)return function(e){return c=e,s=setTimeout(b,n),m?h(e):o}(u);if(d)return s=setTimeout(b,n),h(u)}return void 0===s&&(s=setTimeout(b,n)),o}return n=f(n)||0,y(t)&&(m=!!t.leading,r=(d="maxWait"in t)?l(f(t.maxWait)||0,n):r,S="trailing"in t?!!t.trailing:S),k.cancel=function(){void 0!==s&&clearTimeout(s),c=0,i=u=a=s=void 0},k.flush=function(){return void 0===s?o:M(g())},k}},96706:(e,n,t)=>{"use strict";t.d(n,{Nq:()=>L,Ki:()=>A,qf:()=>T,XS:()=>j,cm:()=>R,uW:()=>B,$Z:()=>x,_e:()=>W,zP:()=>V,bB:()=>E,On:()=>U,Mp:()=>q,oy:()=>G,y9:()=>F});var i=t(62643),a=t(11162),r=t(71369),o=t.n(r),s=t(43162),u=(t(66822),t(96763)),c=t(48287).Buffer;class m extends Error{constructor(e,n,t,i,a){super(e),this.txid=void 0,this.code=void 0,this.programIds=void 0,this.serializedTx=void 0,this.txid=n,this.code=t,this.programIds=i,this.serializedTx=a,Object.setPrototypeOf(this,Error.prototype)}}const d="Unknown error, visit the explorer",l="Transaction locked too many accounts",p="The account does not have enough SOL to perform the operation",g="Transaction has expired and was not confirmed. Please try again.",y="The token account is frozen",f="11111111111111111111111111111111";const S=e=>new Promise((n=>setTimeout(n,e))),h={skipPreflight:!0};const w=async({connection:e,signedTransaction:n,blockhash:t,lastValidBlockHeight:a,idl:r,skipPreflight:d,idlProgramId:y,minContextSlot:f})=>{var w;let M=c.from(n.serialize()),k=function(e){const n="signature"in e?e.signature:e.signatures[0];if(!n)throw new Error("Missing transaction signature, the transaction was not signed by the fee payer");return s.Wp.bytes.bs58.encode(n)}(n);const{value:v}=await e.simulateTransaction("message"in n?n:new i.VersionedTransaction(n.compileMessage()),{replaceRecentBlockhash:!0,commitment:"processed",minContextSlot:f}),{err:P,logs:A}=v;if(P){const e=b({err:P,logMessages:A},void 0,r,y);if(!d)return e.serializedTx=c.from(n.serialize()).toString("base64"),{error:e,txid:void 0};if(e.message===p||e.message===l)return e.serializedTx=c.from(n.serialize()).toString("base64"),{error:e,txid:void 0}}const T=await async function({connection:e,serializedTransaction:n,blockhashWithExpiryBlockHeight:t}){const a=await e.sendRawTransaction(n,h),r=new AbortController,s=r.signal;try{(async()=>{for(;;){if(await S(2e3),s.aborted)return;try{await e.sendRawTransaction(n,h)}catch(e){u.warn(`Failed to resend transaction: ${e}`)}}})();const i=t.lastValidBlockHeight-150;await Promise.race([e.confirmTransaction({...t,lastValidBlockHeight:i,signature:a,abortSignal:s},"confirmed"),new Promise((async n=>{for(;!s.aborted;){var t;await S(2e3);const i=await e.getSignatureStatus(a,{searchTransactionHistory:!1});"confirmed"===(null==i||null===(t=i.value)||void 0===t?void 0:t.confirmationStatus)&&n(i)}}))])}catch(e){if(e instanceof i.TransactionExpiredBlockheightExceededError)return null;throw e}finally{r.abort()}return o()((async n=>{const t=await e.getTransaction(a,{commitment:"confirmed",maxSupportedTransactionVersion:0});return t||n(t),t}),{retries:5,minTimeout:1e3})}({connection:e,serializedTransaction:M,blockhashWithExpiryBlockHeight:{blockhash:t,lastValidBlockHeight:a}});if(!T){const e=new m(g);return e.serializedTx=c.from(n.serialize()).toString("base64"),{error:e,txid:void 0}}if(null!==(w=T.meta)&&void 0!==w&&w.err){const e=b(T.meta,k,r,y);return e.serializedTx=c.from(n.serialize()).toString("base64"),{error:e,transactionResponse:T,txid:k}}return{transactionResponse:T,txid:k}},b=(e,n,t,i)=>{const{code:r,programIds:o,message:s}=function({err:e,logMessages:n}){const t=e;let i;if(t&&"string"!=typeof t){if("InsufficientFundsForRent"in t)return{message:p,code:1,programIds:[a.TOKEN_PROGRAM_ID.toBase58()]};{const e=t.InstructionError,[o,s]=e;var r;if("string"==typeof s){if("ProgramFailedToComplete"===s&&n){const e=function(e){let n=[];for(let t=0;t<e.length;t++){const i=e[t].match(new RegExp(/Program (\S+) failed: Program failed to complete/));i&&n.push(i[1])}return n}(n);if(e.length>0)return{message:"Program failed to complete",programIds:e,code:i}}}else if(i=null!==(r=s.Custom)&&void 0!==r?r:e[1],n){const t=function(e,n){for(let t=0;t<e.length;t++){const i=e[t].match(new RegExp(`Program ([1-9A-HJ-NP-Za-km-z]{32,44}) failed: custom program error: 0x${n.toString(16)}`));if(i)return i[1]}}(n,i);if(t)return t===f?function(e){const n=e[1].Custom;let t="";switch(n){case 0:t="An account with the same address already exists";break;case 1:t=p;break;default:t=d}return{code:n,programIds:[f],message:t}}(e):t===a.TOKEN_PROGRAM_ID.toBase58()&&17===i?{message:y,programIds:[t],code:i}:{message:d,programIds:[t],code:i}}}}return"InsufficientFundsForFee"===t?{message:p,code:1,programIds:[a.TOKEN_PROGRAM_ID.toBase58()]}:"TooManyAccountLocks"===t?{message:l,code:0,programIds:[]}:{message:"string"==typeof t&&t||d,code:i}}(e);if(i&&t&&null!=o&&o.includes(i.toBase58())){var u;let e=null===(u=t.errors)||void 0===u?void 0:u.find((e=>e.code===r));var c;if(e)return new m(null!==(c=e.msg)&&void 0!==c?c:e.name,n,e.code,o)}return new m(s,n,r,o)};var M=t(54341),k=(t(75951),t(96763)),v=t(48287).Buffer,P={version:"0.1.0",name:"jupiter",instructions:[{name:"route",docs:["route_plan Topologically sorted trade DAG"],accounts:[{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"userTransferAuthority",isMut:!1,isSigner:!0},{name:"userSourceTokenAccount",isMut:!1,isSigner:!1},{name:"userDestinationTokenAccount",isMut:!1,isSigner:!1},{name:"destinationTokenAccount",isMut:!1,isSigner:!1,isOptional:!0},{name:"destinationMint",isMut:!1,isSigner:!1},{name:"platformFeeAccount",isMut:!0,isSigner:!1,isOptional:!0},{name:"eventAuthority",isMut:!1,isSigner:!1},{name:"program",isMut:!1,isSigner:!1}],args:[{name:"routePlan",type:{vec:{defined:"RoutePlanStep"}}},{name:"inAmount",type:"u64"},{name:"quotedOutAmount",type:"u64"},{name:"slippageBps",type:"u16"},{name:"platformFeeBps",type:"u8"}],returns:"u64"},{name:"routeWithTokenLedger",accounts:[{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"userTransferAuthority",isMut:!1,isSigner:!0},{name:"userSourceTokenAccount",isMut:!1,isSigner:!1},{name:"userDestinationTokenAccount",isMut:!1,isSigner:!1},{name:"destinationTokenAccount",isMut:!1,isSigner:!1,isOptional:!0},{name:"destinationMint",isMut:!1,isSigner:!1},{name:"platformFeeAccount",isMut:!0,isSigner:!1,isOptional:!0},{name:"tokenLedger",isMut:!1,isSigner:!1},{name:"eventAuthority",isMut:!1,isSigner:!1},{name:"program",isMut:!1,isSigner:!1}],args:[{name:"routePlan",type:{vec:{defined:"RoutePlanStep"}}},{name:"quotedOutAmount",type:"u64"},{name:"slippageBps",type:"u16"},{name:"platformFeeBps",type:"u8"}],returns:"u64"},{name:"sharedAccountsRoute",docs:["Route by using program owned token accounts and open orders accounts."],accounts:[{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"programAuthority",isMut:!1,isSigner:!1},{name:"userTransferAuthority",isMut:!1,isSigner:!0},{name:"sourceTokenAccount",isMut:!0,isSigner:!1},{name:"programSourceTokenAccount",isMut:!0,isSigner:!1},{name:"programDestinationTokenAccount",isMut:!0,isSigner:!1},{name:"destinationTokenAccount",isMut:!0,isSigner:!1},{name:"sourceMint",isMut:!1,isSigner:!1},{name:"destinationMint",isMut:!1,isSigner:!1},{name:"platformFeeAccount",isMut:!0,isSigner:!1,isOptional:!0},{name:"token2022Program",isMut:!1,isSigner:!1,isOptional:!0},{name:"eventAuthority",isMut:!1,isSigner:!1},{name:"program",isMut:!1,isSigner:!1}],args:[{name:"id",type:"u8"},{name:"routePlan",type:{vec:{defined:"RoutePlanStep"}}},{name:"inAmount",type:"u64"},{name:"quotedOutAmount",type:"u64"},{name:"slippageBps",type:"u16"},{name:"platformFeeBps",type:"u8"}],returns:"u64"},{name:"sharedAccountsRouteWithTokenLedger",accounts:[{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"programAuthority",isMut:!1,isSigner:!1},{name:"userTransferAuthority",isMut:!1,isSigner:!0},{name:"sourceTokenAccount",isMut:!0,isSigner:!1},{name:"programSourceTokenAccount",isMut:!0,isSigner:!1},{name:"programDestinationTokenAccount",isMut:!0,isSigner:!1},{name:"destinationTokenAccount",isMut:!0,isSigner:!1},{name:"sourceMint",isMut:!1,isSigner:!1},{name:"destinationMint",isMut:!1,isSigner:!1},{name:"platformFeeAccount",isMut:!0,isSigner:!1,isOptional:!0},{name:"token2022Program",isMut:!1,isSigner:!1,isOptional:!0},{name:"tokenLedger",isMut:!1,isSigner:!1},{name:"eventAuthority",isMut:!1,isSigner:!1},{name:"program",isMut:!1,isSigner:!1}],args:[{name:"id",type:"u8"},{name:"routePlan",type:{vec:{defined:"RoutePlanStep"}}},{name:"quotedOutAmount",type:"u64"},{name:"slippageBps",type:"u16"},{name:"platformFeeBps",type:"u8"}],returns:"u64"},{name:"exactOutRoute",accounts:[{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"userTransferAuthority",isMut:!1,isSigner:!0},{name:"userSourceTokenAccount",isMut:!1,isSigner:!1},{name:"userDestinationTokenAccount",isMut:!1,isSigner:!1},{name:"destinationTokenAccount",isMut:!1,isSigner:!1,isOptional:!0},{name:"sourceMint",isMut:!1,isSigner:!1},{name:"destinationMint",isMut:!1,isSigner:!1},{name:"platformFeeAccount",isMut:!0,isSigner:!1,isOptional:!0},{name:"token2022Program",isMut:!1,isSigner:!1,isOptional:!0},{name:"eventAuthority",isMut:!1,isSigner:!1},{name:"program",isMut:!1,isSigner:!1}],args:[{name:"routePlan",type:{vec:{defined:"RoutePlanStep"}}},{name:"outAmount",type:"u64"},{name:"quotedInAmount",type:"u64"},{name:"slippageBps",type:"u16"},{name:"platformFeeBps",type:"u8"}],returns:"u64"},{name:"sharedAccountsExactOutRoute",docs:["Route by using program owned token accounts and open orders accounts."],accounts:[{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"programAuthority",isMut:!1,isSigner:!1},{name:"userTransferAuthority",isMut:!1,isSigner:!0},{name:"sourceTokenAccount",isMut:!0,isSigner:!1},{name:"programSourceTokenAccount",isMut:!0,isSigner:!1},{name:"programDestinationTokenAccount",isMut:!0,isSigner:!1},{name:"destinationTokenAccount",isMut:!0,isSigner:!1},{name:"sourceMint",isMut:!1,isSigner:!1},{name:"destinationMint",isMut:!1,isSigner:!1},{name:"platformFeeAccount",isMut:!0,isSigner:!1,isOptional:!0},{name:"token2022Program",isMut:!1,isSigner:!1,isOptional:!0},{name:"eventAuthority",isMut:!1,isSigner:!1},{name:"program",isMut:!1,isSigner:!1}],args:[{name:"id",type:"u8"},{name:"routePlan",type:{vec:{defined:"RoutePlanStep"}}},{name:"outAmount",type:"u64"},{name:"quotedInAmount",type:"u64"},{name:"slippageBps",type:"u16"},{name:"platformFeeBps",type:"u8"}],returns:"u64"},{name:"setTokenLedger",accounts:[{name:"tokenLedger",isMut:!0,isSigner:!1},{name:"tokenAccount",isMut:!1,isSigner:!1}],args:[]},{name:"createOpenOrders",accounts:[{name:"openOrders",isMut:!0,isSigner:!1},{name:"payer",isMut:!0,isSigner:!0},{name:"dexProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"market",isMut:!1,isSigner:!1}],args:[]},{name:"createProgramOpenOrders",accounts:[{name:"openOrders",isMut:!0,isSigner:!1},{name:"payer",isMut:!0,isSigner:!0},{name:"programAuthority",isMut:!1,isSigner:!1},{name:"dexProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1},{name:"market",isMut:!1,isSigner:!1}],args:[{name:"id",type:"u8"}]},{name:"claim",accounts:[{name:"wallet",isMut:!0,isSigner:!1},{name:"programAuthority",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"id",type:"u8"}],returns:"u64"},{name:"claimToken",accounts:[{name:"payer",isMut:!0,isSigner:!0},{name:"wallet",isMut:!1,isSigner:!1},{name:"programAuthority",isMut:!1,isSigner:!1},{name:"programTokenAccount",isMut:!0,isSigner:!1},{name:"destinationTokenAccount",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"associatedTokenTokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[{name:"id",type:"u8"}],returns:"u64"},{name:"createTokenLedger",accounts:[{name:"tokenLedger",isMut:!0,isSigner:!0},{name:"payer",isMut:!0,isSigner:!0},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]}],accounts:[{name:"tokenLedger",type:{kind:"struct",fields:[{name:"tokenAccount",type:"publicKey"},{name:"amount",type:"u64"}]}}],types:[{name:"AmountWithSlippage",type:{kind:"struct",fields:[{name:"amount",type:"u64"},{name:"slippageBps",type:"u16"}]}},{name:"RoutePlanStep",type:{kind:"struct",fields:[{name:"swap",type:{defined:"Swap"}},{name:"percent",type:"u8"},{name:"inputIndex",type:"u8"},{name:"outputIndex",type:"u8"}]}},{name:"Side",type:{kind:"enum",variants:[{name:"Bid"},{name:"Ask"}]}},{name:"Swap",type:{kind:"enum",variants:[{name:"Saber"},{name:"SaberAddDecimalsDeposit"},{name:"SaberAddDecimalsWithdraw"},{name:"TokenSwap"},{name:"Sencha"},{name:"Step"},{name:"Cropper"},{name:"Raydium"},{name:"Crema",fields:[{name:"aToB",type:"bool"}]},{name:"Lifinity"},{name:"Mercurial"},{name:"Cykura"},{name:"Serum",fields:[{name:"side",type:{defined:"Side"}}]},{name:"MarinadeDeposit"},{name:"MarinadeUnstake"},{name:"Aldrin",fields:[{name:"side",type:{defined:"Side"}}]},{name:"AldrinV2",fields:[{name:"side",type:{defined:"Side"}}]},{name:"Whirlpool",fields:[{name:"aToB",type:"bool"}]},{name:"Invariant",fields:[{name:"xToY",type:"bool"}]},{name:"Meteora"},{name:"GooseFX"},{name:"DeltaFi",fields:[{name:"stable",type:"bool"}]},{name:"Balansol"},{name:"MarcoPolo",fields:[{name:"xToY",type:"bool"}]},{name:"Dradex",fields:[{name:"side",type:{defined:"Side"}}]},{name:"LifinityV2"},{name:"RaydiumClmm"},{name:"Openbook",fields:[{name:"side",type:{defined:"Side"}}]},{name:"Phoenix",fields:[{name:"side",type:{defined:"Side"}}]},{name:"Symmetry",fields:[{name:"fromTokenId",type:"u64"},{name:"toTokenId",type:"u64"}]},{name:"TokenSwapV2"},{name:"HeliumTreasuryManagementRedeemV0"},{name:"StakeDexStakeWrappedSol"},{name:"StakeDexSwapViaStake",fields:[{name:"bridgeStakeSeed",type:"u32"}]},{name:"GooseFXV2"},{name:"Perps"},{name:"PerpsAddLiquidity"},{name:"PerpsRemoveLiquidity"},{name:"MeteoraDlmm"},{name:"OpenBookV2",fields:[{name:"side",type:{defined:"Side"}}]},{name:"RaydiumClmmV2"},{name:"StakeDexPrefundWithdrawStakeAndDepositStake",fields:[{name:"bridgeStakeSeed",type:"u32"}]},{name:"Clone",fields:[{name:"poolIndex",type:"u8"},{name:"quantityIsInput",type:"bool"},{name:"quantityIsCollateral",type:"bool"}]},{name:"SanctumS",fields:[{name:"srcLstValueCalcAccs",type:"u8"},{name:"dstLstValueCalcAccs",type:"u8"},{name:"srcLstIndex",type:"u32"},{name:"dstLstIndex",type:"u32"}]},{name:"SanctumSAddLiquidity",fields:[{name:"lstValueCalcAccs",type:"u8"},{name:"lstIndex",type:"u32"}]},{name:"SanctumSRemoveLiquidity",fields:[{name:"lstValueCalcAccs",type:"u8"},{name:"lstIndex",type:"u32"}]},{name:"RaydiumCP"},{name:"WhirlpoolSwapV2",fields:[{name:"aToB",type:"bool"},{name:"remainingAccountsInfo",type:{option:{defined:"RemainingAccountsInfo"}}}]},{name:"OneIntro"}]}},{name:"RemainingAccountsSlice",type:{kind:"struct",fields:[{name:"accountsType",type:{defined:"AccountsType"}},{name:"length",type:"u8"}]}},{name:"RemainingAccountsInfo",type:{kind:"struct",fields:[{name:"slices",type:{vec:{defined:"RemainingAccountsSlice"}}}]}},{name:"AccountsType",type:{kind:"enum",variants:[{name:"TransferHookA"},{name:"TransferHookB"}]}}],events:[{name:"SwapEvent",fields:[{name:"amm",type:"publicKey",index:!1},{name:"inputMint",type:"publicKey",index:!1},{name:"inputAmount",type:"u64",index:!1},{name:"outputMint",type:"publicKey",index:!1},{name:"outputAmount",type:"u64",index:!1}]},{name:"FeeEvent",fields:[{name:"account",type:"publicKey",index:!1},{name:"mint",type:"publicKey",index:!1},{name:"amount",type:"u64",index:!1}]}],errors:[{code:6e3,name:"EmptyRoute",msg:"Empty route"},{code:6001,name:"SlippageToleranceExceeded",msg:"Slippage tolerance exceeded"},{code:6002,name:"InvalidCalculation",msg:"Invalid calculation"},{code:6003,name:"MissingPlatformFeeAccount",msg:"Missing platform fee account"},{code:6004,name:"InvalidSlippage",msg:"Invalid slippage"},{code:6005,name:"NotEnoughPercent",msg:"Not enough percent to 100"},{code:6006,name:"InvalidInputIndex",msg:"Token input index is invalid"},{code:6007,name:"InvalidOutputIndex",msg:"Token output index is invalid"},{code:6008,name:"NotEnoughAccountKeys",msg:"Not Enough Account keys"},{code:6009,name:"NonZeroMinimumOutAmountNotSupported",msg:"Non zero minimum out amount not supported"},{code:6010,name:"InvalidRoutePlan",msg:"Invalid route plan"},{code:6011,name:"InvalidReferralAuthority",msg:"Invalid referral authority"},{code:6012,name:"LedgerTokenAccountDoesNotMatch",msg:"Token account doesn't match the ledger"},{code:6013,name:"InvalidTokenLedger",msg:"Invalid token ledger"},{code:6014,name:"IncorrectTokenProgramID",msg:"Token program ID is invalid"},{code:6015,name:"TokenProgramNotProvided",msg:"Token program not provided"},{code:6016,name:"SwapNotSupported",msg:"Swap not supported"},{code:6017,name:"ExactOutAmountNotMatched",msg:"Exact out amount doesn't match"},{code:6018,name:"SourceAndDestinationMintCannotBeTheSame",msg:"Source mint and destination mint cannot the same"}]},A=new i.PublicKey("JUP4Fb2cqiRUcaTHdrPC8h2gNsA2ETXiPDD33WcGuJB"),T=new i.PublicKey("JUP6LkbZbjS1jKKwapdHNy74zcZ3tLUZoi5QNyVTaV4"),x=(new i.PublicKey("BHzPYvC5J38kUeqkcUXwfraLWJ68cmGWm43ksF3i8bmk"),new i.PublicKey("JUPSjgjMFjU4453KMgxhqVmzep6W352bQpE4RsNqXAx"),new i.PublicKey("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),new i.PublicKey("DESVgJVGajEgKGXhb6XmqDHGz3VjdgP7rEVESBgxmroY"),new i.PublicKey("675kPX9MHTjS2zt1qfr1NYHuzeLXfQM9H24wFSUt1Mp8"),new i.PublicKey("AMM55ShdkoGRB5jVYPjWziwk8m5MpwyDgsMWHaMSQWH6"),new i.PublicKey("CURVGoZn8zycx6FXwwevgBTB2gVvdbGTEpvMJDbgs2t4"),new i.PublicKey("DecZY86MU5Gj7kppfUCEmd4LbXXuyZH1yHaP2NTqdiZB"),new i.PublicKey("CTMAxxk34HjKWxQ3QLZK1HpaLXmBveao3ESePXbiyfzh"),new i.PublicKey("SCHAtsf8mbjyjiv4LkhLKutTf6JnZAbdJKFkXQNMFHZ"),new i.PublicKey("EewxydAPCCVuNEyrVN68PuSYdQ7wKn27V9Gjeoi8dy3S"),new i.PublicKey("CLMM9tUoggJu2wagPkkqs9eFG4BWhVBZWkP1qv3Sp7tR"),new i.PublicKey("FxYoB1VAx8TfLCwvmworJy16VH89v992qznUvBX5aR8K"),new i.PublicKey("MERLuDFBMmsHnsBPZw2sDQZHvXFMwp8EdjudcU2HKky"),new i.PublicKey("whirLbMiicVdio4qvUfM5KAg6Ct8VwpYzGff3uctyCc"),new i.PublicKey("HyaB3W9q6XdA5xwpU4XnSZV94htfmbmqJXZcEbRaJutt"),new i.PublicKey("8NsPwRFYqob3FzYvHYTjFK6WVFJADFN8Hn7yNQKcVNW1"),new i.PublicKey("J4uBbeoWpZE8fH58PM1Fp9n9K6f1aThyeVCyRdJbaXqt"),new i.PublicKey("cysPXAjehMpVKUapzbMCCnpFxUFFryEWEaLgnb9NrR8"),new i.PublicKey("DBsMwKfeoUHhxMi9x6wd2AsT12UwUCssjNbUzu1aKgqj"),new i.PublicKey("MarBmsSgKXdrN1egZf5sqe1TMai9K1rChYNDJgjq7aD"),new i.PublicKey("Dooar9JkhdZ7J3LHN3A7YCuoGRUggXhQaG4kijfLGU2j"),new i.PublicKey("DjVE6JNiYqPL2QXyCUUh8rNjHrbz9hXHNYt99MQ59qw1"),new i.PublicKey("9W959DqEETiGZocYWCQPaJ6sBmUzgfxXfqGeTEdp3aQP"),new i.PublicKey("SSwpMgqNDsyV7mAgN9ady4bDVu5ySjmmXejXvy2vLt1"),new i.PublicKey("PSwapMdSai8tjrEXcxFeQth87xC4rRsa4VA5mhGhXkP"),new i.PublicKey("SSwapUtytfBdBn1b9NUGG6foMVPtcWgpRU32HToDUZr"),new i.PublicKey("Eo7WjKq67rjJQSZxS6z3YkapzY3eMj6Xy8X5EQVn5UaB"),new i.PublicKey("24Uqj9JCLxUeoC3hGfh5W3s9FM9uCHDS2SG3LYwBpyTi"),new i.PublicKey("GNExJhNUhc9LN2DauuQAUJnXoy6DJ6zey3t9kT9A2PF3"),new i.PublicKey("ziSPuDShwunW4xNrCfTnSHTPVT6FZDREtdofpf1BJwe"),new i.PublicKey("7WduLbRfYhTJktjLw5FDEyrqoEv61aTTCuGAetgLjzN5"),new i.PublicKey("8CxKnuJeoeQXFwiG6XiGY2akBjvJA5k3bE52BfnuEmNQ"),new i.PublicKey("D3BBjqUdCYuP18fNvvMbPAZ8DpcRi4io2EsYHQawJDag"),new i.PublicKey("dp2waEWSBy5yKmq65ergoU3G6qRLmqa6K7We4rZSKph"),new i.PublicKey("1gE3LGQze8DQ3KD2C4ZUCmRX5g4njhY5yLfYmnmcvJR"),new i.PublicKey("76ygWLcvJLR6nSzRUpiQqqtX4Pabkq4vpaTxwr3mDcXA"),new i.PublicKey("2wT8Yq49kHgDzXuPxZSaeLaH1qbmGXtEyPy64bL7aD3c"),new i.PublicKey("571oqNkJauZ2tccLwf8CUB56hpLPZkop9X1Px4DE9rnQ"),new i.PublicKey("CAMMCzo5YL8w4VFF8KVHrK22GGUsp5VTaW7grrKgrWqK"),new i.PublicKey("srmqPvymJeFKQ4zGQed1GFppgkRHL9kaELCbyksJtPX")),K=(new i.PublicKey("9tKE7Mbmj4mxDjWatikzGAtkoWosiiZX9y6J4Hfm2R8H"),new i.PublicKey("BE5YRQ6N6LCw7UL3JwzVp317EWa4mzJY6JKDaudcXu7A"),new i.PublicKey("JM78XNzeQRmZXDAP4DSq88ZdErbuSXSLE6fkRsVDKSu"),new i.PublicKey("BSwp6bEBihVLdqJRKGgzjcGLHkcTuzmSo1TQkHepzH8p"),new i.PublicKey("2QWN6WjrJ3RAk51ecxLxaLPfFCYLAnmWJwJ1oKA92CRD"),new i.PublicKey("8NyaPDJeC2eaBGpkRpZKnD9S448AZGgjSvumFe92DRK2"),new i.PublicKey("PhoeNiXZ8ByJGLkxNfZRnkUfjvmuYqLR89jjFHGqdXY"),new i.PublicKey("2KehYt3KsEQR53jYcxjbQp2d2kCp4AkuQW68atufRwSr"),new i.PublicKey("So11111111111111111111111111111111111111112")),B={devnet:"https://jupiter-devnet.zhen8558.workers.dev/markets?v=3","mainnet-beta":"https://cache.jup.ag/markets?v=3",testnet:"https://api.jup.ag/api/markets/cache/devnet"},E={devnet:"https://api.jup.ag/api/tokens/devnet",testnet:"https://api.jup.ag/api/markets/devnet","mainnet-beta":"https://cache.jup.ag/tokens",localnet:"https://cache.jup.ag/tokens"},R=5e3,L=new i.PublicKey("BUX7s2ef2htTGb2KKoPHWkmzxPj4nTWMWRgs5CSbQxf9"),N={AlreadyInUse:{code:0,name:"AlreadyInUsed",msg:"Account already In Used"},InsufficientSOL:{code:1,name:"InsufficientSOL",msg:"Insufficient SOL"},TransactionNotConfirmed:{code:7e3,name:"TransactionNotConfirmed",msg:"Transaction was not confirmed"},BalancesNotExtractedProperly:{code:7001,name:"BalancesNotExtractedProperly",msg:"Balances cannot be extracted properly"},TooManyAccountLocked:{code:7002,name:"TooManyAccountsLocked",msg:"Transaction not proccessed due to too many accounts locked"},FrozenAccount:{code:17,name:"FrozenAccount",msg:"The token account is frozen"}},j=Object.freeze({...N,...P.errors.reduce(((e,n)=>({...e,[n.name]:n})),{})}),D=new s.BP(P,T,{});function I(e,n,t){if(e)return function(e,n,t){var i,a,r,o;const s=null==(a=null==(i=e.postTokenBalances)?void 0:i.find((e=>e.owner===n&&e.mint===t)))?void 0:a.uiTokenAmount.amount,u=null==(o=null==(r=e.preTokenBalances)?void 0:r.find((e=>e.owner===n&&e.mint===t)))?void 0:o.uiTokenAmount.amount;if(s)return Math.abs(parseInt(s)-(void 0!==u?parseInt(u):0))}(e,n.toBase58(),t.toBase58())}function O(e,n,t){const i=n.get(t.toBase58());return void 0!==i?Math.abs(e.postBalances[i]-e.preBalances[i]):0}function C(e){const n="signature"in e?e.signature:e.signatures[0];if(!n)throw new Error("Missing transaction signature, the transaction was not signed by the fee payer");return M.encode(n)}function F(e){if("version"in e)return e.message.recentBlockhash;if(!e.recentBlockhash)throw new Error("Missing blockhash");return e.recentBlockhash}var q=async({connection:e,wallet:n,onTransaction:t,inputMint:a,outputMint:r,sourceAddress:o,destinationAddress:u,swapTransaction:c,blockhashWithExpiryBlockHeight:d,owner:l,wrapUnwrapSOL:p,minContextSlot:g})=>{let y,f;try{if(l.signer)S=c,h=[l.signer],"version"in S?S.sign(h):S.sign(...h),C(S);else{if(!n)throw new Error("Signer wallet not found");c=function(e){return"version"in e?e:new i.Transaction({feePayer:e.feePayer,recentBlockhash:e.recentBlockhash}).add(...e.instructions)}(c),c=await n.signTransaction(c)}const b=C(c),M=!0;try{const n=(async()=>{try{const n=await w({...d,connection:e,signedTransaction:c,idl:P,idlProgramId:T,skipPreflight:M,minContextSlot:g});return"error"in n?z(n.error):n.transactionResponse}catch(e){return e}})();null==t||t(b,n);const i=await n;if(i instanceof Error)throw i;const[y,S]=function({txid:e,user:n,inputMint:t,outputMint:i,transactionResponse:a,hasWrappedSOL:r}){let o,u,c=[],d=[];if(a&&a.meta){let{meta:e,transaction:m}=a;if(c=function(e){var n;let t=[];if(e&&e.meta){let{meta:i}=e;null==(n=i.innerInstructions)||n.map((async e=>{e.instructions.map((async e=>{const n=s.Wp.bytes.bs58.decode(e.data),i=s.Wp.bytes.base64.encode(n.subarray(8)),a=D.coder.events.decode(i);a&&t.push(a)}))}))}return t}(a),d=c.filter((e=>"SwapEvent"===e.name)),[o,u]=function(e,n,t){let i=new s.BN(0),a=new s.BN(0);return e.forEach((e=>{e.data.inputMint.equals(n)&&(i=i.add(e.data.inputAmount)),e.data.outputMint.equals(t)&&(a=a.add(e.data.outputAmount))})),[Number(i.toString()),Number(a.toString())]}(d,t,i),!o||!u){const a=(l=m.message,p=e.loadedAddresses,l.getAccountKeys({accountKeysFromLookups:p}).keySegments().flat().reduce(((e,n,t)=>(e.set(n.toBase58(),t),e)),new Map));o=t.equals(K)&&!r?O(e,a,n):I(e,n,t),u=i.equals(K)&&!r?O(e,a,n):I(e,n,i)}}var l,p;if(!o||!u)throw new m("Cannot find source or destination token account balance change",e,N.BalancesNotExtractedProperly.code,[T.toBase58()]);return[o,u]}({txid:b,inputMint:a,outputMint:r,user:l.publicKey,transactionResponse:i,hasWrappedSOL:!p});f={txid:b,inputAddress:o,outputAddress:u,inputAmount:y,outputAmount:S}}catch(e){k.error(e),y=e}if(y||!f)throw y||new Error("Swap failed");return f}catch(e){return{error:e}}var S,h},z=e=>{switch(e.message){case g:{const e=N.TransactionNotConfirmed;return new m(e.msg,void 0,e.code,[T.toBase58()])}case l:{const e=N.TooManyAccountLocked;return new m(e.msg,void 0,e.code,[T.toBase58()])}case y:{const n=N.FrozenAccount;return new m(n.msg,void 0,n.code,e.programIds)}default:return e}},W=class e{_owner;constructor(e){this._owner=e}get publicKey(){return e.isKeyPair(this._owner)?this._owner.publicKey:this._owner}get signer(){return e.isKeyPair(this._owner)?this._owner:void 0}get isKeyPair(){return e.isKeyPair(this._owner)}get isPublicKey(){return e.isPublicKey(this._owner)}static isKeyPair(e){return void 0!==e.secretKey}static isPublicKey(n){return!e.isKeyPair(n)}},V=(e=>(e.ExactIn="ExactIn",e.ExactOut="ExactOut",e))(V||{});function H(e){return e.reduce(((e,n)=>n+e),0)}var U=({numOfAtasToBeCreated:e,numOfOpenOrdersToBeCreated:n,isInputMintSOL:t})=>{const i=new Array(n).fill(0).map((()=>23352760)),a=new Array(e).fill(0).map((()=>2039280)),r=5e3;return{signatureFee:r,openOrdersDeposits:i,ataDeposits:a,totalFeeAndDeposits:H([r,...i,...a]),minimumSOLForTransaction:H([r,...i,...a,t?890880:0])}},X=new i.PublicKey("REFER4ZgmyYx9c6He5XfaTMiGfdLwRnkV4RPp9t9iF3"),J=v.from("referral_ata"),G=async({connection:e,referralAccount:n,mint:t})=>{const r=i.PublicKey.findProgramAddressSync([J,n.toBuffer(),t.toBuffer()],X)[0],o=await e.getAccountInfo(r);if(!o)return null;const s=(e=>{if(null==e||0==e.length)return;const n=a.AccountLayout.decode(e);return n.mint=new i.PublicKey(n.mint),n.owner=new i.PublicKey(n.owner),n.amount=a.u64.fromBuffer(n.amount),0===n.delegateOption?(n.delegate=null,n.delegatedAmount=new a.u64(0)):(n.delegate=new i.PublicKey(n.delegate),n.delegatedAmount=a.u64.fromBuffer(n.delegatedAmount)),n.isInitialized=0!==n.state,n.isFrozen=2===n.state,1===n.isNativeOption?(n.rentExemptReserve=a.u64.fromBuffer(n.isNative),n.isNative=!0):(n.rentExemptReserve=null,n.isNative=!1),0===n.closeAuthorityOption?n.closeAuthority=null:n.closeAuthority=new i.PublicKey(n.closeAuthority),n})(o.data);return s?s.isFrozen?null:r:null}}}]);
//# sourceMappingURL=main-4.0.1-849.js.map