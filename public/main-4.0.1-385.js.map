{"version":3,"file":"main-4.0.1-385.js","mappings":"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","sources":["webpack://@jup-ag/terminal/./node_modules/@solana/buffer-layout/lib/Layout.js","webpack://@jup-ag/terminal/./node_modules/@solana/buffer-layout-utils/lib/cjs/web3.js","webpack://@jup-ag/terminal/./node_modules/@solana/buffer-layout-utils/lib/cjs/base.js","webpack://@jup-ag/terminal/./node_modules/@solana-mobile/mobile-wallet-adapter-protocol/lib/esm/index.js","webpack://@jup-ag/terminal/./node_modules/@solana-mobile/mobile-wallet-adapter-protocol-web3js/lib/esm/index.js","webpack://@jup-ag/terminal/./node_modules/@solana-mobile/wallet-adapter-mobile/lib/esm/index.js","webpack://@jup-ag/terminal/./node_modules/@solana/buffer-layout-utils/lib/cjs/decimal.js","webpack://@jup-ag/terminal/./node_modules/@solana/buffer-layout-utils/lib/esm/base.mjs","webpack://@jup-ag/terminal/./node_modules/@solana/buffer-layout-utils/lib/esm/bigint.mjs","webpack://@jup-ag/terminal/./node_modules/@solana/buffer-layout-utils/lib/esm/decimal.mjs","webpack://@jup-ag/terminal/./node_modules/@solana/buffer-layout-utils/lib/esm/native.mjs","webpack://@jup-ag/terminal/./node_modules/@solana/buffer-layout-utils/lib/esm/web3.mjs","webpack://@jup-ag/terminal/./node_modules/screenfull/dist/screenfull.js","webpack://@jup-ag/terminal/./node_modules/set-harmonic-interval/lib/index.esm.js","webpack://@jup-ag/terminal/./node_modules/@solana/buffer-layout-utils/lib/cjs/native.js","webpack://@jup-ag/terminal/./node_modules/@solana-mobile/mobile-wallet-adapter-protocol-web3js/node_modules/bs58/index.js","webpack://@jup-ag/terminal/./node_modules/@solana-mobile/mobile-wallet-adapter-protocol-web3js/node_modules/base-x/src/index.js","webpack://@jup-ag/terminal/./node_modules/@solana/buffer-layout-utils/lib/cjs/index.js","webpack://@jup-ag/terminal/./node_modules/@solana/buffer-layout-utils/lib/cjs/bigint.js","webpack://@jup-ag/terminal/./node_modules/safe-buffer/index.js"],"sourcesContent":["/* The MIT License (MIT)\n *\n * Copyright 2015-2018 Peter A. Bigot\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n/**\n * Support for translating between Uint8Array instances and JavaScript\n * native types.\n *\n * {@link module:Layout~Layout|Layout} is the basis of a class\n * hierarchy that associates property names with sequences of encoded\n * bytes.\n *\n * Layouts are supported for these scalar (numeric) types:\n * * {@link module:Layout~UInt|Unsigned integers in little-endian\n *   format} with {@link module:Layout.u8|8-bit}, {@link\n *   module:Layout.u16|16-bit}, {@link module:Layout.u24|24-bit},\n *   {@link module:Layout.u32|32-bit}, {@link\n *   module:Layout.u40|40-bit}, and {@link module:Layout.u48|48-bit}\n *   representation ranges;\n * * {@link module:Layout~UIntBE|Unsigned integers in big-endian\n *   format} with {@link module:Layout.u16be|16-bit}, {@link\n *   module:Layout.u24be|24-bit}, {@link module:Layout.u32be|32-bit},\n *   {@link module:Layout.u40be|40-bit}, and {@link\n *   module:Layout.u48be|48-bit} representation ranges;\n * * {@link module:Layout~Int|Signed integers in little-endian\n *   format} with {@link module:Layout.s8|8-bit}, {@link\n *   module:Layout.s16|16-bit}, {@link module:Layout.s24|24-bit},\n *   {@link module:Layout.s32|32-bit}, {@link\n *   module:Layout.s40|40-bit}, and {@link module:Layout.s48|48-bit}\n *   representation ranges;\n * * {@link module:Layout~IntBE|Signed integers in big-endian format}\n *   with {@link module:Layout.s16be|16-bit}, {@link\n *   module:Layout.s24be|24-bit}, {@link module:Layout.s32be|32-bit},\n *   {@link module:Layout.s40be|40-bit}, and {@link\n *   module:Layout.s48be|48-bit} representation ranges;\n * * 64-bit integral values that decode to an exact (if magnitude is\n *   less than 2^53) or nearby integral Number in {@link\n *   module:Layout.nu64|unsigned little-endian}, {@link\n *   module:Layout.nu64be|unsigned big-endian}, {@link\n *   module:Layout.ns64|signed little-endian}, and {@link\n *   module:Layout.ns64be|unsigned big-endian} encodings;\n * * 32-bit floating point values with {@link\n *   module:Layout.f32|little-endian} and {@link\n *   module:Layout.f32be|big-endian} representations;\n * * 64-bit floating point values with {@link\n *   module:Layout.f64|little-endian} and {@link\n *   module:Layout.f64be|big-endian} representations;\n * * {@link module:Layout.const|Constants} that take no space in the\n *   encoded expression.\n *\n * and for these aggregate types:\n * * {@link module:Layout.seq|Sequence}s of instances of a {@link\n *   module:Layout~Layout|Layout}, with JavaScript representation as\n *   an Array and constant or data-dependent {@link\n *   module:Layout~Sequence#count|length};\n * * {@link module:Layout.struct|Structure}s that aggregate a\n *   heterogeneous sequence of {@link module:Layout~Layout|Layout}\n *   instances, with JavaScript representation as an Object;\n * * {@link module:Layout.union|Union}s that support multiple {@link\n *   module:Layout~VariantLayout|variant layouts} over a fixed\n *   (padded) or variable (not padded) span of bytes, using an\n *   unsigned integer at the start of the data or a separate {@link\n *   module:Layout.unionLayoutDiscriminator|layout element} to\n *   determine which layout to use when interpreting the buffer\n *   contents;\n * * {@link module:Layout.bits|BitStructure}s that contain a sequence\n *   of individual {@link\n *   module:Layout~BitStructure#addField|BitField}s packed into an 8,\n *   16, 24, or 32-bit unsigned integer starting at the least- or\n *   most-significant bit;\n * * {@link module:Layout.cstr|C strings} of varying length;\n * * {@link module:Layout.blob|Blobs} of fixed- or variable-{@link\n *   module:Layout~Blob#length|length} raw data.\n *\n * All {@link module:Layout~Layout|Layout} instances are immutable\n * after construction, to prevent internal state from becoming\n * inconsistent.\n *\n * @local Layout\n * @local ExternalLayout\n * @local GreedyCount\n * @local OffsetLayout\n * @local UInt\n * @local UIntBE\n * @local Int\n * @local IntBE\n * @local NearUInt64\n * @local NearUInt64BE\n * @local NearInt64\n * @local NearInt64BE\n * @local Float\n * @local FloatBE\n * @local Double\n * @local DoubleBE\n * @local Sequence\n * @local Structure\n * @local UnionDiscriminator\n * @local UnionLayoutDiscriminator\n * @local Union\n * @local VariantLayout\n * @local BitStructure\n * @local BitField\n * @local Boolean\n * @local Blob\n * @local CString\n * @local Constant\n * @local bindConstructorLayout\n * @module Layout\n * @license MIT\n * @author Peter A. Bigot\n * @see {@link https://github.com/pabigot/buffer-layout|buffer-layout on GitHub}\n */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.s16 = exports.s8 = exports.nu64be = exports.u48be = exports.u40be = exports.u32be = exports.u24be = exports.u16be = exports.nu64 = exports.u48 = exports.u40 = exports.u32 = exports.u24 = exports.u16 = exports.u8 = exports.offset = exports.greedy = exports.Constant = exports.UTF8 = exports.CString = exports.Blob = exports.Boolean = exports.BitField = exports.BitStructure = exports.VariantLayout = exports.Union = exports.UnionLayoutDiscriminator = exports.UnionDiscriminator = exports.Structure = exports.Sequence = exports.DoubleBE = exports.Double = exports.FloatBE = exports.Float = exports.NearInt64BE = exports.NearInt64 = exports.NearUInt64BE = exports.NearUInt64 = exports.IntBE = exports.Int = exports.UIntBE = exports.UInt = exports.OffsetLayout = exports.GreedyCount = exports.ExternalLayout = exports.bindConstructorLayout = exports.nameWithProperty = exports.Layout = exports.uint8ArrayToBuffer = exports.checkUint8Array = void 0;\nexports.constant = exports.utf8 = exports.cstr = exports.blob = exports.unionLayoutDiscriminator = exports.union = exports.seq = exports.bits = exports.struct = exports.f64be = exports.f64 = exports.f32be = exports.f32 = exports.ns64be = exports.s48be = exports.s40be = exports.s32be = exports.s24be = exports.s16be = exports.ns64 = exports.s48 = exports.s40 = exports.s32 = exports.s24 = void 0;\nconst buffer_1 = require(\"buffer\");\n/* Check if a value is a Uint8Array.\n *\n * @ignore */\nfunction checkUint8Array(b) {\n    if (!(b instanceof Uint8Array)) {\n        throw new TypeError('b must be a Uint8Array');\n    }\n}\nexports.checkUint8Array = checkUint8Array;\n/* Create a Buffer instance from a Uint8Array.\n *\n * @ignore */\nfunction uint8ArrayToBuffer(b) {\n    checkUint8Array(b);\n    return buffer_1.Buffer.from(b.buffer, b.byteOffset, b.length);\n}\nexports.uint8ArrayToBuffer = uint8ArrayToBuffer;\n/**\n * Base class for layout objects.\n *\n * **NOTE** This is an abstract base class; you can create instances\n * if it amuses you, but they won't support the {@link\n * Layout#encode|encode} or {@link Layout#decode|decode} functions.\n *\n * @param {Number} span - Initializer for {@link Layout#span|span}.  The\n * parameter must be an integer; a negative value signifies that the\n * span is {@link Layout#getSpan|value-specific}.\n *\n * @param {string} [property] - Initializer for {@link\n * Layout#property|property}.\n *\n * @abstract\n */\nclass Layout {\n    constructor(span, property) {\n        if (!Number.isInteger(span)) {\n            throw new TypeError('span must be an integer');\n        }\n        /** The span of the layout in bytes.\n         *\n         * Positive values are generally expected.\n         *\n         * Zero will only appear in {@link Constant}s and in {@link\n         * Sequence}s where the {@link Sequence#count|count} is zero.\n         *\n         * A negative value indicates that the span is value-specific, and\n         * must be obtained using {@link Layout#getSpan|getSpan}. */\n        this.span = span;\n        /** The property name used when this layout is represented in an\n         * Object.\n         *\n         * Used only for layouts that {@link Layout#decode|decode} to Object\n         * instances.  If left undefined the span of the unnamed layout will\n         * be treated as padding: it will not be mutated by {@link\n         * Layout#encode|encode} nor represented as a property in the\n         * decoded Object. */\n        this.property = property;\n    }\n    /** Function to create an Object into which decoded properties will\n     * be written.\n     *\n     * Used only for layouts that {@link Layout#decode|decode} to Object\n     * instances, which means:\n     * * {@link Structure}\n     * * {@link Union}\n     * * {@link VariantLayout}\n     * * {@link BitStructure}\n     *\n     * If left undefined the JavaScript representation of these layouts\n     * will be Object instances.\n     *\n     * See {@link bindConstructorLayout}.\n     */\n    makeDestinationObject() {\n        return {};\n    }\n    /**\n     * Calculate the span of a specific instance of a layout.\n     *\n     * @param {Uint8Array} b - the buffer that contains an encoded instance.\n     *\n     * @param {Number} [offset] - the offset at which the encoded instance\n     * starts.  If absent a zero offset is inferred.\n     *\n     * @return {Number} - the number of bytes covered by the layout\n     * instance.  If this method is not overridden in a subclass the\n     * definition-time constant {@link Layout#span|span} will be\n     * returned.\n     *\n     * @throws {RangeError} - if the length of the value cannot be\n     * determined.\n     */\n    getSpan(b, offset) {\n        if (0 > this.span) {\n            throw new RangeError('indeterminate span');\n        }\n        return this.span;\n    }\n    /**\n     * Replicate the layout using a new property.\n     *\n     * This function must be used to get a structurally-equivalent layout\n     * with a different name since all {@link Layout} instances are\n     * immutable.\n     *\n     * **NOTE** This is a shallow copy.  All fields except {@link\n     * Layout#property|property} are strictly equal to the origin layout.\n     *\n     * @param {String} property - the value for {@link\n     * Layout#property|property} in the replica.\n     *\n     * @returns {Layout} - the copy with {@link Layout#property|property}\n     * set to `property`.\n     */\n    replicate(property) {\n        const rv = Object.create(this.constructor.prototype);\n        Object.assign(rv, this);\n        rv.property = property;\n        return rv;\n    }\n    /**\n     * Create an object from layout properties and an array of values.\n     *\n     * **NOTE** This function returns `undefined` if invoked on a layout\n     * that does not return its value as an Object.  Objects are\n     * returned for things that are a {@link Structure}, which includes\n     * {@link VariantLayout|variant layouts} if they are structures, and\n     * excludes {@link Union}s.  If you want this feature for a union\n     * you must use {@link Union.getVariant|getVariant} to select the\n     * desired layout.\n     *\n     * @param {Array} values - an array of values that correspond to the\n     * default order for properties.  As with {@link Layout#decode|decode}\n     * layout elements that have no property name are skipped when\n     * iterating over the array values.  Only the top-level properties are\n     * assigned; arguments are not assigned to properties of contained\n     * layouts.  Any unused values are ignored.\n     *\n     * @return {(Object|undefined)}\n     */\n    fromArray(values) {\n        return undefined;\n    }\n}\nexports.Layout = Layout;\n/* Provide text that carries a name (such as for a function that will\n * be throwing an error) annotated with the property of a given layout\n * (such as one for which the value was unacceptable).\n *\n * @ignore */\nfunction nameWithProperty(name, lo) {\n    if (lo.property) {\n        return name + '[' + lo.property + ']';\n    }\n    return name;\n}\nexports.nameWithProperty = nameWithProperty;\n/**\n * Augment a class so that instances can be encoded/decoded using a\n * given layout.\n *\n * Calling this function couples `Class` with `layout` in several ways:\n *\n * * `Class.layout_` becomes a static member property equal to `layout`;\n * * `layout.boundConstructor_` becomes a static member property equal\n *    to `Class`;\n * * The {@link Layout#makeDestinationObject|makeDestinationObject()}\n *   property of `layout` is set to a function that returns a `new\n *   Class()`;\n * * `Class.decode(b, offset)` becomes a static member function that\n *   delegates to {@link Layout#decode|layout.decode}.  The\n *   synthesized function may be captured and extended.\n * * `Class.prototype.encode(b, offset)` provides an instance member\n *   function that delegates to {@link Layout#encode|layout.encode}\n *   with `src` set to `this`.  The synthesized function may be\n *   captured and extended, but when the extension is invoked `this`\n *   must be explicitly bound to the instance.\n *\n * @param {class} Class - a JavaScript class with a nullary\n * constructor.\n *\n * @param {Layout} layout - the {@link Layout} instance used to encode\n * instances of `Class`.\n */\n// `Class` must be a constructor Function, but the assignment of a `layout_` property to it makes it difficult to type\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nfunction bindConstructorLayout(Class, layout) {\n    if ('function' !== typeof Class) {\n        throw new TypeError('Class must be constructor');\n    }\n    if (Object.prototype.hasOwnProperty.call(Class, 'layout_')) {\n        throw new Error('Class is already bound to a layout');\n    }\n    if (!(layout && (layout instanceof Layout))) {\n        throw new TypeError('layout must be a Layout');\n    }\n    if (Object.prototype.hasOwnProperty.call(layout, 'boundConstructor_')) {\n        throw new Error('layout is already bound to a constructor');\n    }\n    Class.layout_ = layout;\n    layout.boundConstructor_ = Class;\n    layout.makeDestinationObject = (() => new Class());\n    Object.defineProperty(Class.prototype, 'encode', {\n        value(b, offset) {\n            return layout.encode(this, b, offset);\n        },\n        writable: true,\n    });\n    Object.defineProperty(Class, 'decode', {\n        value(b, offset) {\n            return layout.decode(b, offset);\n        },\n        writable: true,\n    });\n}\nexports.bindConstructorLayout = bindConstructorLayout;\n/**\n * An object that behaves like a layout but does not consume space\n * within its containing layout.\n *\n * This is primarily used to obtain metadata about a member, such as a\n * {@link OffsetLayout} that can provide data about a {@link\n * Layout#getSpan|value-specific span}.\n *\n * **NOTE** This is an abstract base class; you can create instances\n * if it amuses you, but they won't support {@link\n * ExternalLayout#isCount|isCount} or other {@link Layout} functions.\n *\n * @param {Number} span - initializer for {@link Layout#span|span}.\n * The parameter can range from 1 through 6.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @abstract\n * @augments {Layout}\n */\nclass ExternalLayout extends Layout {\n    /**\n     * Return `true` iff the external layout decodes to an unsigned\n     * integer layout.\n     *\n     * In that case it can be used as the source of {@link\n     * Sequence#count|Sequence counts}, {@link Blob#length|Blob lengths},\n     * or as {@link UnionLayoutDiscriminator#layout|external union\n     * discriminators}.\n     *\n     * @abstract\n     */\n    isCount() {\n        throw new Error('ExternalLayout is abstract');\n    }\n}\nexports.ExternalLayout = ExternalLayout;\n/**\n * An {@link ExternalLayout} that determines its {@link\n * Layout#decode|value} based on offset into and length of the buffer\n * on which it is invoked.\n *\n * *Factory*: {@link module:Layout.greedy|greedy}\n *\n * @param {Number} [elementSpan] - initializer for {@link\n * GreedyCount#elementSpan|elementSpan}.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {ExternalLayout}\n */\nclass GreedyCount extends ExternalLayout {\n    constructor(elementSpan = 1, property) {\n        if ((!Number.isInteger(elementSpan)) || (0 >= elementSpan)) {\n            throw new TypeError('elementSpan must be a (positive) integer');\n        }\n        super(-1, property);\n        /** The layout for individual elements of the sequence.  The value\n         * must be a positive integer.  If not provided, the value will be\n         * 1. */\n        this.elementSpan = elementSpan;\n    }\n    /** @override */\n    isCount() {\n        return true;\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        checkUint8Array(b);\n        const rem = b.length - offset;\n        return Math.floor(rem / this.elementSpan);\n    }\n    /** @override */\n    encode(src, b, offset) {\n        return 0;\n    }\n}\nexports.GreedyCount = GreedyCount;\n/**\n * An {@link ExternalLayout} that supports accessing a {@link Layout}\n * at a fixed offset from the start of another Layout.  The offset may\n * be before, within, or after the base layout.\n *\n * *Factory*: {@link module:Layout.offset|offset}\n *\n * @param {Layout} layout - initializer for {@link\n * OffsetLayout#layout|layout}, modulo `property`.\n *\n * @param {Number} [offset] - Initializes {@link\n * OffsetLayout#offset|offset}.  Defaults to zero.\n *\n * @param {string} [property] - Optional new property name for a\n * {@link Layout#replicate| replica} of `layout` to be used as {@link\n * OffsetLayout#layout|layout}.  If not provided the `layout` is used\n * unchanged.\n *\n * @augments {Layout}\n */\nclass OffsetLayout extends ExternalLayout {\n    constructor(layout, offset = 0, property) {\n        if (!(layout instanceof Layout)) {\n            throw new TypeError('layout must be a Layout');\n        }\n        if (!Number.isInteger(offset)) {\n            throw new TypeError('offset must be integer or undefined');\n        }\n        super(layout.span, property || layout.property);\n        /** The subordinated layout. */\n        this.layout = layout;\n        /** The location of {@link OffsetLayout#layout} relative to the\n         * start of another layout.\n         *\n         * The value may be positive or negative, but an error will thrown\n         * if at the point of use it goes outside the span of the Uint8Array\n         * being accessed.  */\n        this.offset = offset;\n    }\n    /** @override */\n    isCount() {\n        return ((this.layout instanceof UInt)\n            || (this.layout instanceof UIntBE));\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        return this.layout.decode(b, offset + this.offset);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        return this.layout.encode(src, b, offset + this.offset);\n    }\n}\nexports.OffsetLayout = OffsetLayout;\n/**\n * Represent an unsigned integer in little-endian format.\n *\n * *Factory*: {@link module:Layout.u8|u8}, {@link\n *  module:Layout.u16|u16}, {@link module:Layout.u24|u24}, {@link\n *  module:Layout.u32|u32}, {@link module:Layout.u40|u40}, {@link\n *  module:Layout.u48|u48}\n *\n * @param {Number} span - initializer for {@link Layout#span|span}.\n * The parameter can range from 1 through 6.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass UInt extends Layout {\n    constructor(span, property) {\n        super(span, property);\n        if (6 < this.span) {\n            throw new RangeError('span must not exceed 6 bytes');\n        }\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        return uint8ArrayToBuffer(b).readUIntLE(offset, this.span);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        uint8ArrayToBuffer(b).writeUIntLE(src, offset, this.span);\n        return this.span;\n    }\n}\nexports.UInt = UInt;\n/**\n * Represent an unsigned integer in big-endian format.\n *\n * *Factory*: {@link module:Layout.u8be|u8be}, {@link\n * module:Layout.u16be|u16be}, {@link module:Layout.u24be|u24be},\n * {@link module:Layout.u32be|u32be}, {@link\n * module:Layout.u40be|u40be}, {@link module:Layout.u48be|u48be}\n *\n * @param {Number} span - initializer for {@link Layout#span|span}.\n * The parameter can range from 1 through 6.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass UIntBE extends Layout {\n    constructor(span, property) {\n        super(span, property);\n        if (6 < this.span) {\n            throw new RangeError('span must not exceed 6 bytes');\n        }\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        return uint8ArrayToBuffer(b).readUIntBE(offset, this.span);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        uint8ArrayToBuffer(b).writeUIntBE(src, offset, this.span);\n        return this.span;\n    }\n}\nexports.UIntBE = UIntBE;\n/**\n * Represent a signed integer in little-endian format.\n *\n * *Factory*: {@link module:Layout.s8|s8}, {@link\n *  module:Layout.s16|s16}, {@link module:Layout.s24|s24}, {@link\n *  module:Layout.s32|s32}, {@link module:Layout.s40|s40}, {@link\n *  module:Layout.s48|s48}\n *\n * @param {Number} span - initializer for {@link Layout#span|span}.\n * The parameter can range from 1 through 6.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass Int extends Layout {\n    constructor(span, property) {\n        super(span, property);\n        if (6 < this.span) {\n            throw new RangeError('span must not exceed 6 bytes');\n        }\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        return uint8ArrayToBuffer(b).readIntLE(offset, this.span);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        uint8ArrayToBuffer(b).writeIntLE(src, offset, this.span);\n        return this.span;\n    }\n}\nexports.Int = Int;\n/**\n * Represent a signed integer in big-endian format.\n *\n * *Factory*: {@link module:Layout.s8be|s8be}, {@link\n * module:Layout.s16be|s16be}, {@link module:Layout.s24be|s24be},\n * {@link module:Layout.s32be|s32be}, {@link\n * module:Layout.s40be|s40be}, {@link module:Layout.s48be|s48be}\n *\n * @param {Number} span - initializer for {@link Layout#span|span}.\n * The parameter can range from 1 through 6.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass IntBE extends Layout {\n    constructor(span, property) {\n        super(span, property);\n        if (6 < this.span) {\n            throw new RangeError('span must not exceed 6 bytes');\n        }\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        return uint8ArrayToBuffer(b).readIntBE(offset, this.span);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        uint8ArrayToBuffer(b).writeIntBE(src, offset, this.span);\n        return this.span;\n    }\n}\nexports.IntBE = IntBE;\nconst V2E32 = Math.pow(2, 32);\n/* True modulus high and low 32-bit words, where low word is always\n * non-negative. */\nfunction divmodInt64(src) {\n    const hi32 = Math.floor(src / V2E32);\n    const lo32 = src - (hi32 * V2E32);\n    return { hi32, lo32 };\n}\n/* Reconstruct Number from quotient and non-negative remainder */\nfunction roundedInt64(hi32, lo32) {\n    return hi32 * V2E32 + lo32;\n}\n/**\n * Represent an unsigned 64-bit integer in little-endian format when\n * encoded and as a near integral JavaScript Number when decoded.\n *\n * *Factory*: {@link module:Layout.nu64|nu64}\n *\n * **NOTE** Values with magnitude greater than 2^52 may not decode to\n * the exact value of the encoded representation.\n *\n * @augments {Layout}\n */\nclass NearUInt64 extends Layout {\n    constructor(property) {\n        super(8, property);\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        const buffer = uint8ArrayToBuffer(b);\n        const lo32 = buffer.readUInt32LE(offset);\n        const hi32 = buffer.readUInt32LE(offset + 4);\n        return roundedInt64(hi32, lo32);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        const split = divmodInt64(src);\n        const buffer = uint8ArrayToBuffer(b);\n        buffer.writeUInt32LE(split.lo32, offset);\n        buffer.writeUInt32LE(split.hi32, offset + 4);\n        return 8;\n    }\n}\nexports.NearUInt64 = NearUInt64;\n/**\n * Represent an unsigned 64-bit integer in big-endian format when\n * encoded and as a near integral JavaScript Number when decoded.\n *\n * *Factory*: {@link module:Layout.nu64be|nu64be}\n *\n * **NOTE** Values with magnitude greater than 2^52 may not decode to\n * the exact value of the encoded representation.\n *\n * @augments {Layout}\n */\nclass NearUInt64BE extends Layout {\n    constructor(property) {\n        super(8, property);\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        const buffer = uint8ArrayToBuffer(b);\n        const hi32 = buffer.readUInt32BE(offset);\n        const lo32 = buffer.readUInt32BE(offset + 4);\n        return roundedInt64(hi32, lo32);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        const split = divmodInt64(src);\n        const buffer = uint8ArrayToBuffer(b);\n        buffer.writeUInt32BE(split.hi32, offset);\n        buffer.writeUInt32BE(split.lo32, offset + 4);\n        return 8;\n    }\n}\nexports.NearUInt64BE = NearUInt64BE;\n/**\n * Represent a signed 64-bit integer in little-endian format when\n * encoded and as a near integral JavaScript Number when decoded.\n *\n * *Factory*: {@link module:Layout.ns64|ns64}\n *\n * **NOTE** Values with magnitude greater than 2^52 may not decode to\n * the exact value of the encoded representation.\n *\n * @augments {Layout}\n */\nclass NearInt64 extends Layout {\n    constructor(property) {\n        super(8, property);\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        const buffer = uint8ArrayToBuffer(b);\n        const lo32 = buffer.readUInt32LE(offset);\n        const hi32 = buffer.readInt32LE(offset + 4);\n        return roundedInt64(hi32, lo32);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        const split = divmodInt64(src);\n        const buffer = uint8ArrayToBuffer(b);\n        buffer.writeUInt32LE(split.lo32, offset);\n        buffer.writeInt32LE(split.hi32, offset + 4);\n        return 8;\n    }\n}\nexports.NearInt64 = NearInt64;\n/**\n * Represent a signed 64-bit integer in big-endian format when\n * encoded and as a near integral JavaScript Number when decoded.\n *\n * *Factory*: {@link module:Layout.ns64be|ns64be}\n *\n * **NOTE** Values with magnitude greater than 2^52 may not decode to\n * the exact value of the encoded representation.\n *\n * @augments {Layout}\n */\nclass NearInt64BE extends Layout {\n    constructor(property) {\n        super(8, property);\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        const buffer = uint8ArrayToBuffer(b);\n        const hi32 = buffer.readInt32BE(offset);\n        const lo32 = buffer.readUInt32BE(offset + 4);\n        return roundedInt64(hi32, lo32);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        const split = divmodInt64(src);\n        const buffer = uint8ArrayToBuffer(b);\n        buffer.writeInt32BE(split.hi32, offset);\n        buffer.writeUInt32BE(split.lo32, offset + 4);\n        return 8;\n    }\n}\nexports.NearInt64BE = NearInt64BE;\n/**\n * Represent a 32-bit floating point number in little-endian format.\n *\n * *Factory*: {@link module:Layout.f32|f32}\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass Float extends Layout {\n    constructor(property) {\n        super(4, property);\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        return uint8ArrayToBuffer(b).readFloatLE(offset);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        uint8ArrayToBuffer(b).writeFloatLE(src, offset);\n        return 4;\n    }\n}\nexports.Float = Float;\n/**\n * Represent a 32-bit floating point number in big-endian format.\n *\n * *Factory*: {@link module:Layout.f32be|f32be}\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass FloatBE extends Layout {\n    constructor(property) {\n        super(4, property);\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        return uint8ArrayToBuffer(b).readFloatBE(offset);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        uint8ArrayToBuffer(b).writeFloatBE(src, offset);\n        return 4;\n    }\n}\nexports.FloatBE = FloatBE;\n/**\n * Represent a 64-bit floating point number in little-endian format.\n *\n * *Factory*: {@link module:Layout.f64|f64}\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass Double extends Layout {\n    constructor(property) {\n        super(8, property);\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        return uint8ArrayToBuffer(b).readDoubleLE(offset);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        uint8ArrayToBuffer(b).writeDoubleLE(src, offset);\n        return 8;\n    }\n}\nexports.Double = Double;\n/**\n * Represent a 64-bit floating point number in big-endian format.\n *\n * *Factory*: {@link module:Layout.f64be|f64be}\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass DoubleBE extends Layout {\n    constructor(property) {\n        super(8, property);\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        return uint8ArrayToBuffer(b).readDoubleBE(offset);\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        uint8ArrayToBuffer(b).writeDoubleBE(src, offset);\n        return 8;\n    }\n}\nexports.DoubleBE = DoubleBE;\n/**\n * Represent a contiguous sequence of a specific layout as an Array.\n *\n * *Factory*: {@link module:Layout.seq|seq}\n *\n * @param {Layout} elementLayout - initializer for {@link\n * Sequence#elementLayout|elementLayout}.\n *\n * @param {(Number|ExternalLayout)} count - initializer for {@link\n * Sequence#count|count}.  The parameter must be either a positive\n * integer or an instance of {@link ExternalLayout}.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass Sequence extends Layout {\n    constructor(elementLayout, count, property) {\n        if (!(elementLayout instanceof Layout)) {\n            throw new TypeError('elementLayout must be a Layout');\n        }\n        if (!(((count instanceof ExternalLayout) && count.isCount())\n            || (Number.isInteger(count) && (0 <= count)))) {\n            throw new TypeError('count must be non-negative integer '\n                + 'or an unsigned integer ExternalLayout');\n        }\n        let span = -1;\n        if ((!(count instanceof ExternalLayout))\n            && (0 < elementLayout.span)) {\n            span = count * elementLayout.span;\n        }\n        super(span, property);\n        /** The layout for individual elements of the sequence. */\n        this.elementLayout = elementLayout;\n        /** The number of elements in the sequence.\n         *\n         * This will be either a non-negative integer or an instance of\n         * {@link ExternalLayout} for which {@link\n         * ExternalLayout#isCount|isCount()} is `true`. */\n        this.count = count;\n    }\n    /** @override */\n    getSpan(b, offset = 0) {\n        if (0 <= this.span) {\n            return this.span;\n        }\n        let span = 0;\n        let count = this.count;\n        if (count instanceof ExternalLayout) {\n            count = count.decode(b, offset);\n        }\n        if (0 < this.elementLayout.span) {\n            span = count * this.elementLayout.span;\n        }\n        else {\n            let idx = 0;\n            while (idx < count) {\n                span += this.elementLayout.getSpan(b, offset + span);\n                ++idx;\n            }\n        }\n        return span;\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        const rv = [];\n        let i = 0;\n        let count = this.count;\n        if (count instanceof ExternalLayout) {\n            count = count.decode(b, offset);\n        }\n        while (i < count) {\n            rv.push(this.elementLayout.decode(b, offset));\n            offset += this.elementLayout.getSpan(b, offset);\n            i += 1;\n        }\n        return rv;\n    }\n    /** Implement {@link Layout#encode|encode} for {@link Sequence}.\n     *\n     * **NOTE** If `src` is shorter than {@link Sequence#count|count} then\n     * the unused space in the buffer is left unchanged.  If `src` is\n     * longer than {@link Sequence#count|count} the unneeded elements are\n     * ignored.\n     *\n     * **NOTE** If {@link Layout#count|count} is an instance of {@link\n     * ExternalLayout} then the length of `src` will be encoded as the\n     * count after `src` is encoded. */\n    encode(src, b, offset = 0) {\n        const elo = this.elementLayout;\n        const span = src.reduce((span, v) => {\n            return span + elo.encode(v, b, offset + span);\n        }, 0);\n        if (this.count instanceof ExternalLayout) {\n            this.count.encode(src.length, b, offset);\n        }\n        return span;\n    }\n}\nexports.Sequence = Sequence;\n/**\n * Represent a contiguous sequence of arbitrary layout elements as an\n * Object.\n *\n * *Factory*: {@link module:Layout.struct|struct}\n *\n * **NOTE** The {@link Layout#span|span} of the structure is variable\n * if any layout in {@link Structure#fields|fields} has a variable\n * span.  When {@link Layout#encode|encoding} we must have a value for\n * all variable-length fields, or we wouldn't be able to figure out\n * how much space to use for storage.  We can only identify the value\n * for a field when it has a {@link Layout#property|property}.  As\n * such, although a structure may contain both unnamed fields and\n * variable-length fields, it cannot contain an unnamed\n * variable-length field.\n *\n * @param {Layout[]} fields - initializer for {@link\n * Structure#fields|fields}.  An error is raised if this contains a\n * variable-length field for which a {@link Layout#property|property}\n * is not defined.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @param {Boolean} [decodePrefixes] - initializer for {@link\n * Structure#decodePrefixes|property}.\n *\n * @throws {Error} - if `fields` contains an unnamed variable-length\n * layout.\n *\n * @augments {Layout}\n */\nclass Structure extends Layout {\n    constructor(fields, property, decodePrefixes) {\n        if (!(Array.isArray(fields)\n            && fields.reduce((acc, v) => acc && (v instanceof Layout), true))) {\n            throw new TypeError('fields must be array of Layout instances');\n        }\n        if (('boolean' === typeof property)\n            && (undefined === decodePrefixes)) {\n            decodePrefixes = property;\n            property = undefined;\n        }\n        /* Verify absence of unnamed variable-length fields. */\n        for (const fd of fields) {\n            if ((0 > fd.span)\n                && (undefined === fd.property)) {\n                throw new Error('fields cannot contain unnamed variable-length layout');\n            }\n        }\n        let span = -1;\n        try {\n            span = fields.reduce((span, fd) => span + fd.getSpan(), 0);\n        }\n        catch (e) {\n            // ignore error\n        }\n        super(span, property);\n        /** The sequence of {@link Layout} values that comprise the\n         * structure.\n         *\n         * The individual elements need not be the same type, and may be\n         * either scalar or aggregate layouts.  If a member layout leaves\n         * its {@link Layout#property|property} undefined the\n         * corresponding region of the buffer associated with the element\n         * will not be mutated.\n         *\n         * @type {Layout[]} */\n        this.fields = fields;\n        /** Control behavior of {@link Layout#decode|decode()} given short\n         * buffers.\n         *\n         * In some situations a structure many be extended with additional\n         * fields over time, with older installations providing only a\n         * prefix of the full structure.  If this property is `true`\n         * decoding will accept those buffers and leave subsequent fields\n         * undefined, as long as the buffer ends at a field boundary.\n         * Defaults to `false`. */\n        this.decodePrefixes = !!decodePrefixes;\n    }\n    /** @override */\n    getSpan(b, offset = 0) {\n        if (0 <= this.span) {\n            return this.span;\n        }\n        let span = 0;\n        try {\n            span = this.fields.reduce((span, fd) => {\n                const fsp = fd.getSpan(b, offset);\n                offset += fsp;\n                return span + fsp;\n            }, 0);\n        }\n        catch (e) {\n            throw new RangeError('indeterminate span');\n        }\n        return span;\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        checkUint8Array(b);\n        const dest = this.makeDestinationObject();\n        for (const fd of this.fields) {\n            if (undefined !== fd.property) {\n                dest[fd.property] = fd.decode(b, offset);\n            }\n            offset += fd.getSpan(b, offset);\n            if (this.decodePrefixes\n                && (b.length === offset)) {\n                break;\n            }\n        }\n        return dest;\n    }\n    /** Implement {@link Layout#encode|encode} for {@link Structure}.\n     *\n     * If `src` is missing a property for a member with a defined {@link\n     * Layout#property|property} the corresponding region of the buffer is\n     * left unmodified. */\n    encode(src, b, offset = 0) {\n        const firstOffset = offset;\n        let lastOffset = 0;\n        let lastWrote = 0;\n        for (const fd of this.fields) {\n            let span = fd.span;\n            lastWrote = (0 < span) ? span : 0;\n            if (undefined !== fd.property) {\n                const fv = src[fd.property];\n                if (undefined !== fv) {\n                    lastWrote = fd.encode(fv, b, offset);\n                    if (0 > span) {\n                        /* Read the as-encoded span, which is not necessarily the\n                         * same as what we wrote. */\n                        span = fd.getSpan(b, offset);\n                    }\n                }\n            }\n            lastOffset = offset;\n            offset += span;\n        }\n        /* Use (lastOffset + lastWrote) instead of offset because the last\n         * item may have had a dynamic length and we don't want to include\n         * the padding between it and the end of the space reserved for\n         * it. */\n        return (lastOffset + lastWrote) - firstOffset;\n    }\n    /** @override */\n    fromArray(values) {\n        const dest = this.makeDestinationObject();\n        for (const fd of this.fields) {\n            if ((undefined !== fd.property)\n                && (0 < values.length)) {\n                dest[fd.property] = values.shift();\n            }\n        }\n        return dest;\n    }\n    /**\n     * Get access to the layout of a given property.\n     *\n     * @param {String} property - the structure member of interest.\n     *\n     * @return {Layout} - the layout associated with `property`, or\n     * undefined if there is no such property.\n     */\n    layoutFor(property) {\n        if ('string' !== typeof property) {\n            throw new TypeError('property must be string');\n        }\n        for (const fd of this.fields) {\n            if (fd.property === property) {\n                return fd;\n            }\n        }\n        return undefined;\n    }\n    /**\n     * Get the offset of a structure member.\n     *\n     * @param {String} property - the structure member of interest.\n     *\n     * @return {Number} - the offset in bytes to the start of `property`\n     * within the structure, or undefined if `property` is not a field\n     * within the structure.  If the property is a member but follows a\n     * variable-length structure member a negative number will be\n     * returned.\n     */\n    offsetOf(property) {\n        if ('string' !== typeof property) {\n            throw new TypeError('property must be string');\n        }\n        let offset = 0;\n        for (const fd of this.fields) {\n            if (fd.property === property) {\n                return offset;\n            }\n            if (0 > fd.span) {\n                offset = -1;\n            }\n            else if (0 <= offset) {\n                offset += fd.span;\n            }\n        }\n        return undefined;\n    }\n}\nexports.Structure = Structure;\n/**\n * An object that can provide a {@link\n * Union#discriminator|discriminator} API for {@link Union}.\n *\n * **NOTE** This is an abstract base class; you can create instances\n * if it amuses you, but they won't support the {@link\n * UnionDiscriminator#encode|encode} or {@link\n * UnionDiscriminator#decode|decode} functions.\n *\n * @param {string} [property] - Default for {@link\n * UnionDiscriminator#property|property}.\n *\n * @abstract\n */\nclass UnionDiscriminator {\n    constructor(property) {\n        /** The {@link Layout#property|property} to be used when the\n         * discriminator is referenced in isolation (generally when {@link\n         * Union#decode|Union decode} cannot delegate to a specific\n         * variant). */\n        this.property = property;\n    }\n    /** Analog to {@link Layout#decode|Layout decode} for union discriminators.\n     *\n     * The implementation of this method need not reference the buffer if\n     * variant information is available through other means. */\n    decode(b, offset) {\n        throw new Error('UnionDiscriminator is abstract');\n    }\n    /** Analog to {@link Layout#decode|Layout encode} for union discriminators.\n     *\n     * The implementation of this method need not store the value if\n     * variant information is maintained through other means. */\n    encode(src, b, offset) {\n        throw new Error('UnionDiscriminator is abstract');\n    }\n}\nexports.UnionDiscriminator = UnionDiscriminator;\n/**\n * An object that can provide a {@link\n * UnionDiscriminator|discriminator API} for {@link Union} using an\n * unsigned integral {@link Layout} instance located either inside or\n * outside the union.\n *\n * @param {ExternalLayout} layout - initializes {@link\n * UnionLayoutDiscriminator#layout|layout}.  Must satisfy {@link\n * ExternalLayout#isCount|isCount()}.\n *\n * @param {string} [property] - Default for {@link\n * UnionDiscriminator#property|property}, superseding the property\n * from `layout`, but defaulting to `variant` if neither `property`\n * nor layout provide a property name.\n *\n * @augments {UnionDiscriminator}\n */\nclass UnionLayoutDiscriminator extends UnionDiscriminator {\n    constructor(layout, property) {\n        if (!((layout instanceof ExternalLayout)\n            && layout.isCount())) {\n            throw new TypeError('layout must be an unsigned integer ExternalLayout');\n        }\n        super(property || layout.property || 'variant');\n        /** The {@link ExternalLayout} used to access the discriminator\n         * value. */\n        this.layout = layout;\n    }\n    /** Delegate decoding to {@link UnionLayoutDiscriminator#layout|layout}. */\n    decode(b, offset) {\n        return this.layout.decode(b, offset);\n    }\n    /** Delegate encoding to {@link UnionLayoutDiscriminator#layout|layout}. */\n    encode(src, b, offset) {\n        return this.layout.encode(src, b, offset);\n    }\n}\nexports.UnionLayoutDiscriminator = UnionLayoutDiscriminator;\n/**\n * Represent any number of span-compatible layouts.\n *\n * *Factory*: {@link module:Layout.union|union}\n *\n * If the union has a {@link Union#defaultLayout|default layout} that\n * layout must have a non-negative {@link Layout#span|span}.  The span\n * of a fixed-span union includes its {@link\n * Union#discriminator|discriminator} if the variant is a {@link\n * Union#usesPrefixDiscriminator|prefix of the union}, plus the span\n * of its {@link Union#defaultLayout|default layout}.\n *\n * If the union does not have a default layout then the encoded span\n * of the union depends on the encoded span of its variant (which may\n * be fixed or variable).\n *\n * {@link VariantLayout#layout|Variant layout}s are added through\n * {@link Union#addVariant|addVariant}.  If the union has a default\n * layout, the span of the {@link VariantLayout#layout|layout\n * contained by the variant} must not exceed the span of the {@link\n * Union#defaultLayout|default layout} (minus the span of a {@link\n * Union#usesPrefixDiscriminator|prefix disriminator}, if used).  The\n * span of the variant will equal the span of the union itself.\n *\n * The variant for a buffer can only be identified from the {@link\n * Union#discriminator|discriminator} {@link\n * UnionDiscriminator#property|property} (in the case of the {@link\n * Union#defaultLayout|default layout}), or by using {@link\n * Union#getVariant|getVariant} and examining the resulting {@link\n * VariantLayout} instance.\n *\n * A variant compatible with a JavaScript object can be identified\n * using {@link Union#getSourceVariant|getSourceVariant}.\n *\n * @param {(UnionDiscriminator|ExternalLayout|Layout)} discr - How to\n * identify the layout used to interpret the union contents.  The\n * parameter must be an instance of {@link UnionDiscriminator}, an\n * {@link ExternalLayout} that satisfies {@link\n * ExternalLayout#isCount|isCount()}, or {@link UInt} (or {@link\n * UIntBE}).  When a non-external layout element is passed the layout\n * appears at the start of the union.  In all cases the (synthesized)\n * {@link UnionDiscriminator} instance is recorded as {@link\n * Union#discriminator|discriminator}.\n *\n * @param {(Layout|null)} defaultLayout - initializer for {@link\n * Union#defaultLayout|defaultLayout}.  If absent defaults to `null`.\n * If `null` there is no default layout: the union has data-dependent\n * length and attempts to decode or encode unrecognized variants will\n * throw an exception.  A {@link Layout} instance must have a\n * non-negative {@link Layout#span|span}, and if it lacks a {@link\n * Layout#property|property} the {@link\n * Union#defaultLayout|defaultLayout} will be a {@link\n * Layout#replicate|replica} with property `content`.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass Union extends Layout {\n    constructor(discr, defaultLayout, property) {\n        let discriminator;\n        if ((discr instanceof UInt)\n            || (discr instanceof UIntBE)) {\n            discriminator = new UnionLayoutDiscriminator(new OffsetLayout(discr));\n        }\n        else if ((discr instanceof ExternalLayout)\n            && discr.isCount()) {\n            discriminator = new UnionLayoutDiscriminator(discr);\n        }\n        else if (!(discr instanceof UnionDiscriminator)) {\n            throw new TypeError('discr must be a UnionDiscriminator '\n                + 'or an unsigned integer layout');\n        }\n        else {\n            discriminator = discr;\n        }\n        if (undefined === defaultLayout) {\n            defaultLayout = null;\n        }\n        if (!((null === defaultLayout)\n            || (defaultLayout instanceof Layout))) {\n            throw new TypeError('defaultLayout must be null or a Layout');\n        }\n        if (null !== defaultLayout) {\n            if (0 > defaultLayout.span) {\n                throw new Error('defaultLayout must have constant span');\n            }\n            if (undefined === defaultLayout.property) {\n                defaultLayout = defaultLayout.replicate('content');\n            }\n        }\n        /* The union span can be estimated only if there's a default\n         * layout.  The union spans its default layout, plus any prefix\n         * variant layout.  By construction both layouts, if present, have\n         * non-negative span. */\n        let span = -1;\n        if (defaultLayout) {\n            span = defaultLayout.span;\n            if ((0 <= span) && ((discr instanceof UInt)\n                || (discr instanceof UIntBE))) {\n                span += discriminator.layout.span;\n            }\n        }\n        super(span, property);\n        /** The interface for the discriminator value in isolation.\n         *\n         * This a {@link UnionDiscriminator} either passed to the\n         * constructor or synthesized from the `discr` constructor\n         * argument.  {@link\n         * Union#usesPrefixDiscriminator|usesPrefixDiscriminator} will be\n         * `true` iff the `discr` parameter was a non-offset {@link\n         * Layout} instance. */\n        this.discriminator = discriminator;\n        /** `true` if the {@link Union#discriminator|discriminator} is the\n         * first field in the union.\n         *\n         * If `false` the discriminator is obtained from somewhere\n         * else. */\n        this.usesPrefixDiscriminator = (discr instanceof UInt)\n            || (discr instanceof UIntBE);\n        /** The layout for non-discriminator content when the value of the\n         * discriminator is not recognized.\n         *\n         * This is the value passed to the constructor.  It is\n         * structurally equivalent to the second component of {@link\n         * Union#layout|layout} but may have a different property\n         * name. */\n        this.defaultLayout = defaultLayout;\n        /** A registry of allowed variants.\n         *\n         * The keys are unsigned integers which should be compatible with\n         * {@link Union.discriminator|discriminator}.  The property value\n         * is the corresponding {@link VariantLayout} instances assigned\n         * to this union by {@link Union#addVariant|addVariant}.\n         *\n         * **NOTE** The registry remains mutable so that variants can be\n         * {@link Union#addVariant|added} at any time.  Users should not\n         * manipulate the content of this property. */\n        this.registry = {};\n        /* Private variable used when invoking getSourceVariant */\n        let boundGetSourceVariant = this.defaultGetSourceVariant.bind(this);\n        /** Function to infer the variant selected by a source object.\n         *\n         * Defaults to {@link\n         * Union#defaultGetSourceVariant|defaultGetSourceVariant} but may\n         * be overridden using {@link\n         * Union#configGetSourceVariant|configGetSourceVariant}.\n         *\n         * @param {Object} src - as with {@link\n         * Union#defaultGetSourceVariant|defaultGetSourceVariant}.\n         *\n         * @returns {(undefined|VariantLayout)} The default variant\n         * (`undefined`) or first registered variant that uses a property\n         * available in `src`. */\n        this.getSourceVariant = function (src) {\n            return boundGetSourceVariant(src);\n        };\n        /** Function to override the implementation of {@link\n         * Union#getSourceVariant|getSourceVariant}.\n         *\n         * Use this if the desired variant cannot be identified using the\n         * algorithm of {@link\n         * Union#defaultGetSourceVariant|defaultGetSourceVariant}.\n         *\n         * **NOTE** The provided function will be invoked bound to this\n         * Union instance, providing local access to {@link\n         * Union#registry|registry}.\n         *\n         * @param {Function} gsv - a function that follows the API of\n         * {@link Union#defaultGetSourceVariant|defaultGetSourceVariant}. */\n        this.configGetSourceVariant = function (gsv) {\n            boundGetSourceVariant = gsv.bind(this);\n        };\n    }\n    /** @override */\n    getSpan(b, offset = 0) {\n        if (0 <= this.span) {\n            return this.span;\n        }\n        /* Default layouts always have non-negative span, so we don't have\n         * one and we have to recognize the variant which will in turn\n         * determine the span. */\n        const vlo = this.getVariant(b, offset);\n        if (!vlo) {\n            throw new Error('unable to determine span for unrecognized variant');\n        }\n        return vlo.getSpan(b, offset);\n    }\n    /**\n     * Method to infer a registered Union variant compatible with `src`.\n     *\n     * The first satisfied rule in the following sequence defines the\n     * return value:\n     * * If `src` has properties matching the Union discriminator and\n     *   the default layout, `undefined` is returned regardless of the\n     *   value of the discriminator property (this ensures the default\n     *   layout will be used);\n     * * If `src` has a property matching the Union discriminator, the\n     *   value of the discriminator identifies a registered variant, and\n     *   either (a) the variant has no layout, or (b) `src` has the\n     *   variant's property, then the variant is returned (because the\n     *   source satisfies the constraints of the variant it identifies);\n     * * If `src` does not have a property matching the Union\n     *   discriminator, but does have a property matching a registered\n     *   variant, then the variant is returned (because the source\n     *   matches a variant without an explicit conflict);\n     * * An error is thrown (because we either can't identify a variant,\n     *   or we were explicitly told the variant but can't satisfy it).\n     *\n     * @param {Object} src - an object presumed to be compatible with\n     * the content of the Union.\n     *\n     * @return {(undefined|VariantLayout)} - as described above.\n     *\n     * @throws {Error} - if `src` cannot be associated with a default or\n     * registered variant.\n     */\n    defaultGetSourceVariant(src) {\n        if (Object.prototype.hasOwnProperty.call(src, this.discriminator.property)) {\n            if (this.defaultLayout && this.defaultLayout.property\n                && Object.prototype.hasOwnProperty.call(src, this.defaultLayout.property)) {\n                return undefined;\n            }\n            const vlo = this.registry[src[this.discriminator.property]];\n            if (vlo\n                && ((!vlo.layout)\n                    || (vlo.property && Object.prototype.hasOwnProperty.call(src, vlo.property)))) {\n                return vlo;\n            }\n        }\n        else {\n            for (const tag in this.registry) {\n                const vlo = this.registry[tag];\n                if (vlo.property && Object.prototype.hasOwnProperty.call(src, vlo.property)) {\n                    return vlo;\n                }\n            }\n        }\n        throw new Error('unable to infer src variant');\n    }\n    /** Implement {@link Layout#decode|decode} for {@link Union}.\n     *\n     * If the variant is {@link Union#addVariant|registered} the return\n     * value is an instance of that variant, with no explicit\n     * discriminator.  Otherwise the {@link Union#defaultLayout|default\n     * layout} is used to decode the content. */\n    decode(b, offset = 0) {\n        let dest;\n        const dlo = this.discriminator;\n        const discr = dlo.decode(b, offset);\n        const clo = this.registry[discr];\n        if (undefined === clo) {\n            const defaultLayout = this.defaultLayout;\n            let contentOffset = 0;\n            if (this.usesPrefixDiscriminator) {\n                contentOffset = dlo.layout.span;\n            }\n            dest = this.makeDestinationObject();\n            dest[dlo.property] = discr;\n            // defaultLayout.property can be undefined, but this is allowed by buffer-layout\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            dest[defaultLayout.property] = defaultLayout.decode(b, offset + contentOffset);\n        }\n        else {\n            dest = clo.decode(b, offset);\n        }\n        return dest;\n    }\n    /** Implement {@link Layout#encode|encode} for {@link Union}.\n     *\n     * This API assumes the `src` object is consistent with the union's\n     * {@link Union#defaultLayout|default layout}.  To encode variants\n     * use the appropriate variant-specific {@link VariantLayout#encode}\n     * method. */\n    encode(src, b, offset = 0) {\n        const vlo = this.getSourceVariant(src);\n        if (undefined === vlo) {\n            const dlo = this.discriminator;\n            // this.defaultLayout is not undefined when vlo is undefined\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            const clo = this.defaultLayout;\n            let contentOffset = 0;\n            if (this.usesPrefixDiscriminator) {\n                contentOffset = dlo.layout.span;\n            }\n            dlo.encode(src[dlo.property], b, offset);\n            // clo.property is not undefined when vlo is undefined\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            return contentOffset + clo.encode(src[clo.property], b, offset + contentOffset);\n        }\n        return vlo.encode(src, b, offset);\n    }\n    /** Register a new variant structure within a union.  The newly\n     * created variant is returned.\n     *\n     * @param {Number} variant - initializer for {@link\n     * VariantLayout#variant|variant}.\n     *\n     * @param {Layout} layout - initializer for {@link\n     * VariantLayout#layout|layout}.\n     *\n     * @param {String} property - initializer for {@link\n     * Layout#property|property}.\n     *\n     * @return {VariantLayout} */\n    addVariant(variant, layout, property) {\n        const rv = new VariantLayout(this, variant, layout, property);\n        this.registry[variant] = rv;\n        return rv;\n    }\n    /**\n     * Get the layout associated with a registered variant.\n     *\n     * If `vb` does not produce a registered variant the function returns\n     * `undefined`.\n     *\n     * @param {(Number|Uint8Array)} vb - either the variant number, or a\n     * buffer from which the discriminator is to be read.\n     *\n     * @param {Number} offset - offset into `vb` for the start of the\n     * union.  Used only when `vb` is an instance of {Uint8Array}.\n     *\n     * @return {({VariantLayout}|undefined)}\n     */\n    getVariant(vb, offset = 0) {\n        let variant;\n        if (vb instanceof Uint8Array) {\n            variant = this.discriminator.decode(vb, offset);\n        }\n        else {\n            variant = vb;\n        }\n        return this.registry[variant];\n    }\n}\nexports.Union = Union;\n/**\n * Represent a specific variant within a containing union.\n *\n * **NOTE** The {@link Layout#span|span} of the variant may include\n * the span of the {@link Union#discriminator|discriminator} used to\n * identify it, but values read and written using the variant strictly\n * conform to the content of {@link VariantLayout#layout|layout}.\n *\n * **NOTE** User code should not invoke this constructor directly.  Use\n * the union {@link Union#addVariant|addVariant} helper method.\n *\n * @param {Union} union - initializer for {@link\n * VariantLayout#union|union}.\n *\n * @param {Number} variant - initializer for {@link\n * VariantLayout#variant|variant}.\n *\n * @param {Layout} [layout] - initializer for {@link\n * VariantLayout#layout|layout}.  If absent the variant carries no\n * data.\n *\n * @param {String} [property] - initializer for {@link\n * Layout#property|property}.  Unlike many other layouts, variant\n * layouts normally include a property name so they can be identified\n * within their containing {@link Union}.  The property identifier may\n * be absent only if `layout` is is absent.\n *\n * @augments {Layout}\n */\nclass VariantLayout extends Layout {\n    constructor(union, variant, layout, property) {\n        if (!(union instanceof Union)) {\n            throw new TypeError('union must be a Union');\n        }\n        if ((!Number.isInteger(variant)) || (0 > variant)) {\n            throw new TypeError('variant must be a (non-negative) integer');\n        }\n        if (('string' === typeof layout)\n            && (undefined === property)) {\n            property = layout;\n            layout = null;\n        }\n        if (layout) {\n            if (!(layout instanceof Layout)) {\n                throw new TypeError('layout must be a Layout');\n            }\n            if ((null !== union.defaultLayout)\n                && (0 <= layout.span)\n                && (layout.span > union.defaultLayout.span)) {\n                throw new Error('variant span exceeds span of containing union');\n            }\n            if ('string' !== typeof property) {\n                throw new TypeError('variant must have a String property');\n            }\n        }\n        let span = union.span;\n        if (0 > union.span) {\n            span = layout ? layout.span : 0;\n            if ((0 <= span) && union.usesPrefixDiscriminator) {\n                span += union.discriminator.layout.span;\n            }\n        }\n        super(span, property);\n        /** The {@link Union} to which this variant belongs. */\n        this.union = union;\n        /** The unsigned integral value identifying this variant within\n         * the {@link Union#discriminator|discriminator} of the containing\n         * union. */\n        this.variant = variant;\n        /** The {@link Layout} to be used when reading/writing the\n         * non-discriminator part of the {@link\n         * VariantLayout#union|union}.  If `null` the variant carries no\n         * data. */\n        this.layout = layout || null;\n    }\n    /** @override */\n    getSpan(b, offset = 0) {\n        if (0 <= this.span) {\n            /* Will be equal to the containing union span if that is not\n             * variable. */\n            return this.span;\n        }\n        let contentOffset = 0;\n        if (this.union.usesPrefixDiscriminator) {\n            contentOffset = this.union.discriminator.layout.span;\n        }\n        /* Span is defined solely by the variant (and prefix discriminator) */\n        let span = 0;\n        if (this.layout) {\n            span = this.layout.getSpan(b, offset + contentOffset);\n        }\n        return contentOffset + span;\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        const dest = this.makeDestinationObject();\n        if (this !== this.union.getVariant(b, offset)) {\n            throw new Error('variant mismatch');\n        }\n        let contentOffset = 0;\n        if (this.union.usesPrefixDiscriminator) {\n            contentOffset = this.union.discriminator.layout.span;\n        }\n        if (this.layout) {\n            dest[this.property] = this.layout.decode(b, offset + contentOffset);\n        }\n        else if (this.property) {\n            dest[this.property] = true;\n        }\n        else if (this.union.usesPrefixDiscriminator) {\n            dest[this.union.discriminator.property] = this.variant;\n        }\n        return dest;\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        let contentOffset = 0;\n        if (this.union.usesPrefixDiscriminator) {\n            contentOffset = this.union.discriminator.layout.span;\n        }\n        if (this.layout\n            && (!Object.prototype.hasOwnProperty.call(src, this.property))) {\n            throw new TypeError('variant lacks property ' + this.property);\n        }\n        this.union.discriminator.encode(this.variant, b, offset);\n        let span = contentOffset;\n        if (this.layout) {\n            this.layout.encode(src[this.property], b, offset + contentOffset);\n            span += this.layout.getSpan(b, offset + contentOffset);\n            if ((0 <= this.union.span)\n                && (span > this.union.span)) {\n                throw new Error('encoded variant overruns containing union');\n            }\n        }\n        return span;\n    }\n    /** Delegate {@link Layout#fromArray|fromArray} to {@link\n     * VariantLayout#layout|layout}. */\n    fromArray(values) {\n        if (this.layout) {\n            return this.layout.fromArray(values);\n        }\n        return undefined;\n    }\n}\nexports.VariantLayout = VariantLayout;\n/** JavaScript chose to define bitwise operations as operating on\n * signed 32-bit values in 2's complement form, meaning any integer\n * with bit 31 set is going to look negative.  For right shifts that's\n * not a problem, because `>>>` is a logical shift, but for every\n * other bitwise operator we have to compensate for possible negative\n * results. */\nfunction fixBitwiseResult(v) {\n    if (0 > v) {\n        v += 0x100000000;\n    }\n    return v;\n}\n/**\n * Contain a sequence of bit fields as an unsigned integer.\n *\n * *Factory*: {@link module:Layout.bits|bits}\n *\n * This is a container element; within it there are {@link BitField}\n * instances that provide the extracted properties.  The container\n * simply defines the aggregate representation and its bit ordering.\n * The representation is an object containing properties with numeric\n * or {@link Boolean} values.\n *\n * {@link BitField}s are added with the {@link\n * BitStructure#addField|addField} and {@link\n * BitStructure#addBoolean|addBoolean} methods.\n\n * @param {Layout} word - initializer for {@link\n * BitStructure#word|word}.  The parameter must be an instance of\n * {@link UInt} (or {@link UIntBE}) that is no more than 4 bytes wide.\n *\n * @param {bool} [msb] - `true` if the bit numbering starts at the\n * most significant bit of the containing word; `false` (default) if\n * it starts at the least significant bit of the containing word.  If\n * the parameter at this position is a string and `property` is\n * `undefined` the value of this argument will instead be used as the\n * value of `property`.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass BitStructure extends Layout {\n    constructor(word, msb, property) {\n        if (!((word instanceof UInt)\n            || (word instanceof UIntBE))) {\n            throw new TypeError('word must be a UInt or UIntBE layout');\n        }\n        if (('string' === typeof msb)\n            && (undefined === property)) {\n            property = msb;\n            msb = false;\n        }\n        if (4 < word.span) {\n            throw new RangeError('word cannot exceed 32 bits');\n        }\n        super(word.span, property);\n        /** The layout used for the packed value.  {@link BitField}\n         * instances are packed sequentially depending on {@link\n         * BitStructure#msb|msb}. */\n        this.word = word;\n        /** Whether the bit sequences are packed starting at the most\n         * significant bit growing down (`true`), or the least significant\n         * bit growing up (`false`).\n         *\n         * **NOTE** Regardless of this value, the least significant bit of\n         * any {@link BitField} value is the least significant bit of the\n         * corresponding section of the packed value. */\n        this.msb = !!msb;\n        /** The sequence of {@link BitField} layouts that comprise the\n         * packed structure.\n         *\n         * **NOTE** The array remains mutable to allow fields to be {@link\n         * BitStructure#addField|added} after construction.  Users should\n         * not manipulate the content of this property.*/\n        this.fields = [];\n        /* Storage for the value.  Capture a variable instead of using an\n         * instance property because we don't want anything to change the\n         * value without going through the mutator. */\n        let value = 0;\n        this._packedSetValue = function (v) {\n            value = fixBitwiseResult(v);\n            return this;\n        };\n        this._packedGetValue = function () {\n            return value;\n        };\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        const dest = this.makeDestinationObject();\n        const value = this.word.decode(b, offset);\n        this._packedSetValue(value);\n        for (const fd of this.fields) {\n            if (undefined !== fd.property) {\n                dest[fd.property] = fd.decode(b);\n            }\n        }\n        return dest;\n    }\n    /** Implement {@link Layout#encode|encode} for {@link BitStructure}.\n     *\n     * If `src` is missing a property for a member with a defined {@link\n     * Layout#property|property} the corresponding region of the packed\n     * value is left unmodified.  Unused bits are also left unmodified. */\n    encode(src, b, offset = 0) {\n        const value = this.word.decode(b, offset);\n        this._packedSetValue(value);\n        for (const fd of this.fields) {\n            if (undefined !== fd.property) {\n                const fv = src[fd.property];\n                if (undefined !== fv) {\n                    fd.encode(fv);\n                }\n            }\n        }\n        return this.word.encode(this._packedGetValue(), b, offset);\n    }\n    /** Register a new bitfield with a containing bit structure.  The\n     * resulting bitfield is returned.\n     *\n     * @param {Number} bits - initializer for {@link BitField#bits|bits}.\n     *\n     * @param {string} property - initializer for {@link\n     * Layout#property|property}.\n     *\n     * @return {BitField} */\n    addField(bits, property) {\n        const bf = new BitField(this, bits, property);\n        this.fields.push(bf);\n        return bf;\n    }\n    /** As with {@link BitStructure#addField|addField} for single-bit\n     * fields with `boolean` value representation.\n     *\n     * @param {string} property - initializer for {@link\n     * Layout#property|property}.\n     *\n     * @return {Boolean} */\n    // `Boolean` conflicts with the native primitive type\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    addBoolean(property) {\n        // This is my Boolean, not the Javascript one.\n        const bf = new Boolean(this, property);\n        this.fields.push(bf);\n        return bf;\n    }\n    /**\n     * Get access to the bit field for a given property.\n     *\n     * @param {String} property - the bit field of interest.\n     *\n     * @return {BitField} - the field associated with `property`, or\n     * undefined if there is no such property.\n     */\n    fieldFor(property) {\n        if ('string' !== typeof property) {\n            throw new TypeError('property must be string');\n        }\n        for (const fd of this.fields) {\n            if (fd.property === property) {\n                return fd;\n            }\n        }\n        return undefined;\n    }\n}\nexports.BitStructure = BitStructure;\n/**\n * Represent a sequence of bits within a {@link BitStructure}.\n *\n * All bit field values are represented as unsigned integers.\n *\n * **NOTE** User code should not invoke this constructor directly.\n * Use the container {@link BitStructure#addField|addField} helper\n * method.\n *\n * **NOTE** BitField instances are not instances of {@link Layout}\n * since {@link Layout#span|span} measures 8-bit units.\n *\n * @param {BitStructure} container - initializer for {@link\n * BitField#container|container}.\n *\n * @param {Number} bits - initializer for {@link BitField#bits|bits}.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n */\nclass BitField {\n    constructor(container, bits, property) {\n        if (!(container instanceof BitStructure)) {\n            throw new TypeError('container must be a BitStructure');\n        }\n        if ((!Number.isInteger(bits)) || (0 >= bits)) {\n            throw new TypeError('bits must be positive integer');\n        }\n        const totalBits = 8 * container.span;\n        const usedBits = container.fields.reduce((sum, fd) => sum + fd.bits, 0);\n        if ((bits + usedBits) > totalBits) {\n            throw new Error('bits too long for span remainder ('\n                + (totalBits - usedBits) + ' of '\n                + totalBits + ' remain)');\n        }\n        /** The {@link BitStructure} instance to which this bit field\n         * belongs. */\n        this.container = container;\n        /** The span of this value in bits. */\n        this.bits = bits;\n        /** A mask of {@link BitField#bits|bits} bits isolating value bits\n         * that fit within the field.\n         *\n         * That is, it masks a value that has not yet been shifted into\n         * position within its containing packed integer. */\n        this.valueMask = (1 << bits) - 1;\n        if (32 === bits) { // shifted value out of range\n            this.valueMask = 0xFFFFFFFF;\n        }\n        /** The offset of the value within the containing packed unsigned\n         * integer.  The least significant bit of the packed value is at\n         * offset zero, regardless of bit ordering used. */\n        this.start = usedBits;\n        if (this.container.msb) {\n            this.start = totalBits - usedBits - bits;\n        }\n        /** A mask of {@link BitField#bits|bits} isolating the field value\n         * within the containing packed unsigned integer. */\n        this.wordMask = fixBitwiseResult(this.valueMask << this.start);\n        /** The property name used when this bitfield is represented in an\n         * Object.\n         *\n         * Intended to be functionally equivalent to {@link\n         * Layout#property}.\n         *\n         * If left undefined the corresponding span of bits will be\n         * treated as padding: it will not be mutated by {@link\n         * Layout#encode|encode} nor represented as a property in the\n         * decoded Object. */\n        this.property = property;\n    }\n    /** Store a value into the corresponding subsequence of the containing\n     * bit field. */\n    decode(b, offset) {\n        const word = this.container._packedGetValue();\n        const wordValue = fixBitwiseResult(word & this.wordMask);\n        const value = wordValue >>> this.start;\n        return value;\n    }\n    /** Store a value into the corresponding subsequence of the containing\n     * bit field.\n     *\n     * **NOTE** This is not a specialization of {@link\n     * Layout#encode|Layout.encode} and there is no return value. */\n    encode(value) {\n        if ('number' !== typeof value\n            || !Number.isInteger(value)\n            || (value !== fixBitwiseResult(value & this.valueMask))) {\n            throw new TypeError(nameWithProperty('BitField.encode', this)\n                + ' value must be integer not exceeding ' + this.valueMask);\n        }\n        const word = this.container._packedGetValue();\n        const wordValue = fixBitwiseResult(value << this.start);\n        this.container._packedSetValue(fixBitwiseResult(word & ~this.wordMask)\n            | wordValue);\n    }\n}\nexports.BitField = BitField;\n/**\n * Represent a single bit within a {@link BitStructure} as a\n * JavaScript boolean.\n *\n * **NOTE** User code should not invoke this constructor directly.\n * Use the container {@link BitStructure#addBoolean|addBoolean} helper\n * method.\n *\n * @param {BitStructure} container - initializer for {@link\n * BitField#container|container}.\n *\n * @param {string} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {BitField}\n */\n/* eslint-disable no-extend-native */\nclass Boolean extends BitField {\n    constructor(container, property) {\n        super(container, 1, property);\n    }\n    /** Override {@link BitField#decode|decode} for {@link Boolean|Boolean}.\n     *\n     * @returns {boolean} */\n    decode(b, offset) {\n        return !!super.decode(b, offset);\n    }\n    /** @override */\n    encode(value) {\n        if ('boolean' === typeof value) {\n            // BitField requires integer values\n            value = +value;\n        }\n        super.encode(value);\n    }\n}\nexports.Boolean = Boolean;\n/* eslint-enable no-extend-native */\n/**\n * Contain a fixed-length block of arbitrary data, represented as a\n * Uint8Array.\n *\n * *Factory*: {@link module:Layout.blob|blob}\n *\n * @param {(Number|ExternalLayout)} length - initializes {@link\n * Blob#length|length}.\n *\n * @param {String} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass Blob extends Layout {\n    constructor(length, property) {\n        if (!(((length instanceof ExternalLayout) && length.isCount())\n            || (Number.isInteger(length) && (0 <= length)))) {\n            throw new TypeError('length must be positive integer '\n                + 'or an unsigned integer ExternalLayout');\n        }\n        let span = -1;\n        if (!(length instanceof ExternalLayout)) {\n            span = length;\n        }\n        super(span, property);\n        /** The number of bytes in the blob.\n         *\n         * This may be a non-negative integer, or an instance of {@link\n         * ExternalLayout} that satisfies {@link\n         * ExternalLayout#isCount|isCount()}. */\n        this.length = length;\n    }\n    /** @override */\n    getSpan(b, offset) {\n        let span = this.span;\n        if (0 > span) {\n            span = this.length.decode(b, offset);\n        }\n        return span;\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        let span = this.span;\n        if (0 > span) {\n            span = this.length.decode(b, offset);\n        }\n        return uint8ArrayToBuffer(b).slice(offset, offset + span);\n    }\n    /** Implement {@link Layout#encode|encode} for {@link Blob}.\n     *\n     * **NOTE** If {@link Layout#count|count} is an instance of {@link\n     * ExternalLayout} then the length of `src` will be encoded as the\n     * count after `src` is encoded. */\n    encode(src, b, offset) {\n        let span = this.length;\n        if (this.length instanceof ExternalLayout) {\n            span = src.length;\n        }\n        if (!(src instanceof Uint8Array && span === src.length)) {\n            throw new TypeError(nameWithProperty('Blob.encode', this)\n                + ' requires (length ' + span + ') Uint8Array as src');\n        }\n        if ((offset + span) > b.length) {\n            throw new RangeError('encoding overruns Uint8Array');\n        }\n        const srcBuffer = uint8ArrayToBuffer(src);\n        uint8ArrayToBuffer(b).write(srcBuffer.toString('hex'), offset, span, 'hex');\n        if (this.length instanceof ExternalLayout) {\n            this.length.encode(span, b, offset);\n        }\n        return span;\n    }\n}\nexports.Blob = Blob;\n/**\n * Contain a `NUL`-terminated UTF8 string.\n *\n * *Factory*: {@link module:Layout.cstr|cstr}\n *\n * **NOTE** Any UTF8 string that incorporates a zero-valued byte will\n * not be correctly decoded by this layout.\n *\n * @param {String} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass CString extends Layout {\n    constructor(property) {\n        super(-1, property);\n    }\n    /** @override */\n    getSpan(b, offset = 0) {\n        checkUint8Array(b);\n        let idx = offset;\n        while ((idx < b.length) && (0 !== b[idx])) {\n            idx += 1;\n        }\n        return 1 + idx - offset;\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        const span = this.getSpan(b, offset);\n        return uint8ArrayToBuffer(b).slice(offset, offset + span - 1).toString('utf-8');\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        /* Must force this to a string, lest it be a number and the\n         * \"utf8-encoding\" below actually allocate a buffer of length\n         * src */\n        if ('string' !== typeof src) {\n            src = String(src);\n        }\n        const srcb = buffer_1.Buffer.from(src, 'utf8');\n        const span = srcb.length;\n        if ((offset + span) > b.length) {\n            throw new RangeError('encoding overruns Buffer');\n        }\n        const buffer = uint8ArrayToBuffer(b);\n        srcb.copy(buffer, offset);\n        buffer[offset + span] = 0;\n        return span + 1;\n    }\n}\nexports.CString = CString;\n/**\n * Contain a UTF8 string with implicit length.\n *\n * *Factory*: {@link module:Layout.utf8|utf8}\n *\n * **NOTE** Because the length is implicit in the size of the buffer\n * this layout should be used only in isolation, or in a situation\n * where the length can be expressed by operating on a slice of the\n * containing buffer.\n *\n * @param {Number} [maxSpan] - the maximum length allowed for encoded\n * string content.  If not provided there is no bound on the allowed\n * content.\n *\n * @param {String} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass UTF8 extends Layout {\n    constructor(maxSpan, property) {\n        if (('string' === typeof maxSpan) && (undefined === property)) {\n            property = maxSpan;\n            maxSpan = undefined;\n        }\n        if (undefined === maxSpan) {\n            maxSpan = -1;\n        }\n        else if (!Number.isInteger(maxSpan)) {\n            throw new TypeError('maxSpan must be an integer');\n        }\n        super(-1, property);\n        /** The maximum span of the layout in bytes.\n         *\n         * Positive values are generally expected.  Zero is abnormal.\n         * Attempts to encode or decode a value that exceeds this length\n         * will throw a `RangeError`.\n         *\n         * A negative value indicates that there is no bound on the length\n         * of the content. */\n        this.maxSpan = maxSpan;\n    }\n    /** @override */\n    getSpan(b, offset = 0) {\n        checkUint8Array(b);\n        return b.length - offset;\n    }\n    /** @override */\n    decode(b, offset = 0) {\n        const span = this.getSpan(b, offset);\n        if ((0 <= this.maxSpan)\n            && (this.maxSpan < span)) {\n            throw new RangeError('text length exceeds maxSpan');\n        }\n        return uint8ArrayToBuffer(b).slice(offset, offset + span).toString('utf-8');\n    }\n    /** @override */\n    encode(src, b, offset = 0) {\n        /* Must force this to a string, lest it be a number and the\n         * \"utf8-encoding\" below actually allocate a buffer of length\n         * src */\n        if ('string' !== typeof src) {\n            src = String(src);\n        }\n        const srcb = buffer_1.Buffer.from(src, 'utf8');\n        const span = srcb.length;\n        if ((0 <= this.maxSpan)\n            && (this.maxSpan < span)) {\n            throw new RangeError('text length exceeds maxSpan');\n        }\n        if ((offset + span) > b.length) {\n            throw new RangeError('encoding overruns Buffer');\n        }\n        srcb.copy(uint8ArrayToBuffer(b), offset);\n        return span;\n    }\n}\nexports.UTF8 = UTF8;\n/**\n * Contain a constant value.\n *\n * This layout may be used in cases where a JavaScript value can be\n * inferred without an expression in the binary encoding.  An example\n * would be a {@link VariantLayout|variant layout} where the content\n * is implied by the union {@link Union#discriminator|discriminator}.\n *\n * @param {Object|Number|String} value - initializer for {@link\n * Constant#value|value}.  If the value is an object (or array) and\n * the application intends the object to remain unchanged regardless\n * of what is done to values decoded by this layout, the value should\n * be frozen prior passing it to this constructor.\n *\n * @param {String} [property] - initializer for {@link\n * Layout#property|property}.\n *\n * @augments {Layout}\n */\nclass Constant extends Layout {\n    constructor(value, property) {\n        super(0, property);\n        /** The value produced by this constant when the layout is {@link\n         * Constant#decode|decoded}.\n         *\n         * Any JavaScript value including `null` and `undefined` is\n         * permitted.\n         *\n         * **WARNING** If `value` passed in the constructor was not\n         * frozen, it is possible for users of decoded values to change\n         * the content of the value. */\n        this.value = value;\n    }\n    /** @override */\n    decode(b, offset) {\n        return this.value;\n    }\n    /** @override */\n    encode(src, b, offset) {\n        /* Constants take no space */\n        return 0;\n    }\n}\nexports.Constant = Constant;\n/** Factory for {@link GreedyCount}. */\nexports.greedy = ((elementSpan, property) => new GreedyCount(elementSpan, property));\n/** Factory for {@link OffsetLayout}. */\nexports.offset = ((layout, offset, property) => new OffsetLayout(layout, offset, property));\n/** Factory for {@link UInt|unsigned int layouts} spanning one\n * byte. */\nexports.u8 = ((property) => new UInt(1, property));\n/** Factory for {@link UInt|little-endian unsigned int layouts}\n * spanning two bytes. */\nexports.u16 = ((property) => new UInt(2, property));\n/** Factory for {@link UInt|little-endian unsigned int layouts}\n * spanning three bytes. */\nexports.u24 = ((property) => new UInt(3, property));\n/** Factory for {@link UInt|little-endian unsigned int layouts}\n * spanning four bytes. */\nexports.u32 = ((property) => new UInt(4, property));\n/** Factory for {@link UInt|little-endian unsigned int layouts}\n * spanning five bytes. */\nexports.u40 = ((property) => new UInt(5, property));\n/** Factory for {@link UInt|little-endian unsigned int layouts}\n * spanning six bytes. */\nexports.u48 = ((property) => new UInt(6, property));\n/** Factory for {@link NearUInt64|little-endian unsigned int\n * layouts} interpreted as Numbers. */\nexports.nu64 = ((property) => new NearUInt64(property));\n/** Factory for {@link UInt|big-endian unsigned int layouts}\n * spanning two bytes. */\nexports.u16be = ((property) => new UIntBE(2, property));\n/** Factory for {@link UInt|big-endian unsigned int layouts}\n * spanning three bytes. */\nexports.u24be = ((property) => new UIntBE(3, property));\n/** Factory for {@link UInt|big-endian unsigned int layouts}\n * spanning four bytes. */\nexports.u32be = ((property) => new UIntBE(4, property));\n/** Factory for {@link UInt|big-endian unsigned int layouts}\n * spanning five bytes. */\nexports.u40be = ((property) => new UIntBE(5, property));\n/** Factory for {@link UInt|big-endian unsigned int layouts}\n * spanning six bytes. */\nexports.u48be = ((property) => new UIntBE(6, property));\n/** Factory for {@link NearUInt64BE|big-endian unsigned int\n * layouts} interpreted as Numbers. */\nexports.nu64be = ((property) => new NearUInt64BE(property));\n/** Factory for {@link Int|signed int layouts} spanning one\n * byte. */\nexports.s8 = ((property) => new Int(1, property));\n/** Factory for {@link Int|little-endian signed int layouts}\n * spanning two bytes. */\nexports.s16 = ((property) => new Int(2, property));\n/** Factory for {@link Int|little-endian signed int layouts}\n * spanning three bytes. */\nexports.s24 = ((property) => new Int(3, property));\n/** Factory for {@link Int|little-endian signed int layouts}\n * spanning four bytes. */\nexports.s32 = ((property) => new Int(4, property));\n/** Factory for {@link Int|little-endian signed int layouts}\n * spanning five bytes. */\nexports.s40 = ((property) => new Int(5, property));\n/** Factory for {@link Int|little-endian signed int layouts}\n * spanning six bytes. */\nexports.s48 = ((property) => new Int(6, property));\n/** Factory for {@link NearInt64|little-endian signed int layouts}\n * interpreted as Numbers. */\nexports.ns64 = ((property) => new NearInt64(property));\n/** Factory for {@link Int|big-endian signed int layouts}\n * spanning two bytes. */\nexports.s16be = ((property) => new IntBE(2, property));\n/** Factory for {@link Int|big-endian signed int layouts}\n * spanning three bytes. */\nexports.s24be = ((property) => new IntBE(3, property));\n/** Factory for {@link Int|big-endian signed int layouts}\n * spanning four bytes. */\nexports.s32be = ((property) => new IntBE(4, property));\n/** Factory for {@link Int|big-endian signed int layouts}\n * spanning five bytes. */\nexports.s40be = ((property) => new IntBE(5, property));\n/** Factory for {@link Int|big-endian signed int layouts}\n * spanning six bytes. */\nexports.s48be = ((property) => new IntBE(6, property));\n/** Factory for {@link NearInt64BE|big-endian signed int layouts}\n * interpreted as Numbers. */\nexports.ns64be = ((property) => new NearInt64BE(property));\n/** Factory for {@link Float|little-endian 32-bit floating point} values. */\nexports.f32 = ((property) => new Float(property));\n/** Factory for {@link FloatBE|big-endian 32-bit floating point} values. */\nexports.f32be = ((property) => new FloatBE(property));\n/** Factory for {@link Double|little-endian 64-bit floating point} values. */\nexports.f64 = ((property) => new Double(property));\n/** Factory for {@link DoubleBE|big-endian 64-bit floating point} values. */\nexports.f64be = ((property) => new DoubleBE(property));\n/** Factory for {@link Structure} values. */\nexports.struct = ((fields, property, decodePrefixes) => new Structure(fields, property, decodePrefixes));\n/** Factory for {@link BitStructure} values. */\nexports.bits = ((word, msb, property) => new BitStructure(word, msb, property));\n/** Factory for {@link Sequence} values. */\nexports.seq = ((elementLayout, count, property) => new Sequence(elementLayout, count, property));\n/** Factory for {@link Union} values. */\nexports.union = ((discr, defaultLayout, property) => new Union(discr, defaultLayout, property));\n/** Factory for {@link UnionLayoutDiscriminator} values. */\nexports.unionLayoutDiscriminator = ((layout, property) => new UnionLayoutDiscriminator(layout, property));\n/** Factory for {@link Blob} values. */\nexports.blob = ((length, property) => new Blob(length, property));\n/** Factory for {@link CString} values. */\nexports.cstr = ((property) => new CString(property));\n/** Factory for {@link UTF8} values. */\nexports.utf8 = ((maxSpan, property) => new UTF8(maxSpan, property));\n/** Factory for {@link Constant} values. */\nexports.constant = ((value, property) => new Constant(value, property));\n//# sourceMappingURL=Layout.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.publicKey = void 0;\nconst buffer_layout_1 = require(\"@solana/buffer-layout\");\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst base_1 = require(\"./base\");\nconst publicKey = (property) => {\n    const layout = (0, buffer_layout_1.blob)(32, property);\n    const { encode, decode } = (0, base_1.encodeDecode)(layout);\n    const publicKeyLayout = layout;\n    publicKeyLayout.decode = (buffer, offset) => {\n        const src = decode(buffer, offset);\n        return new web3_js_1.PublicKey(src);\n    };\n    publicKeyLayout.encode = (publicKey, buffer, offset) => {\n        const src = publicKey.toBuffer();\n        return encode(src, buffer, offset);\n    };\n    return publicKeyLayout;\n};\nexports.publicKey = publicKey;\n//# sourceMappingURL=web3.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.encodeDecode = void 0;\nconst encodeDecode = (layout) => {\n    const decode = layout.decode.bind(layout);\n    const encode = layout.encode.bind(layout);\n    return { decode, encode };\n};\nexports.encodeDecode = encodeDecode;\n//# sourceMappingURL=base.js.map","import { createSignInMessageText } from '@solana/wallet-standard-util';\n\n// Typescript `enums` thwart tree-shaking. See https://bargsten.org/jsts/enums/\nconst SolanaMobileWalletAdapterErrorCode = {\n    ERROR_ASSOCIATION_PORT_OUT_OF_RANGE: 'ERROR_ASSOCIATION_PORT_OUT_OF_RANGE',\n    ERROR_REFLECTOR_ID_OUT_OF_RANGE: 'ERROR_REFLECTOR_ID_OUT_OF_RANGE',\n    ERROR_FORBIDDEN_WALLET_BASE_URL: 'ERROR_FORBIDDEN_WALLET_BASE_URL',\n    ERROR_SECURE_CONTEXT_REQUIRED: 'ERROR_SECURE_CONTEXT_REQUIRED',\n    ERROR_SESSION_CLOSED: 'ERROR_SESSION_CLOSED',\n    ERROR_SESSION_TIMEOUT: 'ERROR_SESSION_TIMEOUT',\n    ERROR_WALLET_NOT_FOUND: 'ERROR_WALLET_NOT_FOUND',\n    ERROR_INVALID_PROTOCOL_VERSION: 'ERROR_INVALID_PROTOCOL_VERSION',\n};\nclass SolanaMobileWalletAdapterError extends Error {\n    constructor(...args) {\n        const [code, message, data] = args;\n        super(message);\n        this.code = code;\n        this.data = data;\n        this.name = 'SolanaMobileWalletAdapterError';\n    }\n}\n// Typescript `enums` thwart tree-shaking. See https://bargsten.org/jsts/enums/\nconst SolanaMobileWalletAdapterProtocolErrorCode = {\n    // Keep these in sync with `mobilewalletadapter/common/ProtocolContract.java`.\n    ERROR_AUTHORIZATION_FAILED: -1,\n    ERROR_INVALID_PAYLOADS: -2,\n    ERROR_NOT_SIGNED: -3,\n    ERROR_NOT_SUBMITTED: -4,\n    ERROR_TOO_MANY_PAYLOADS: -5,\n    ERROR_ATTEST_ORIGIN_ANDROID: -100,\n};\nclass SolanaMobileWalletAdapterProtocolError extends Error {\n    constructor(...args) {\n        const [jsonRpcMessageId, code, message, data] = args;\n        super(message);\n        this.code = code;\n        this.data = data;\n        this.jsonRpcMessageId = jsonRpcMessageId;\n        this.name = 'SolanaMobileWalletAdapterProtocolError';\n    }\n}\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\n\nfunction createHelloReq(ecdhPublicKey, associationKeypairPrivateKey) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const publicKeyBuffer = yield crypto.subtle.exportKey('raw', ecdhPublicKey);\n        const signatureBuffer = yield crypto.subtle.sign({ hash: 'SHA-256', name: 'ECDSA' }, associationKeypairPrivateKey, publicKeyBuffer);\n        const response = new Uint8Array(publicKeyBuffer.byteLength + signatureBuffer.byteLength);\n        response.set(new Uint8Array(publicKeyBuffer), 0);\n        response.set(new Uint8Array(signatureBuffer), publicKeyBuffer.byteLength);\n        return response;\n    });\n}\n\nfunction encode(input) {\n    return window.btoa(input);\n}\n\nfunction createSIWSMessage(payload) {\n    return createSignInMessageText(payload);\n}\nfunction createSIWSMessageBase64(payload) {\n    return encode(createSIWSMessage(payload));\n}\n\n// optional features\nconst SolanaSignTransactions = 'solana:signTransactions';\nconst SolanaCloneAuthorization = 'solana:cloneAuthorization';\nconst SolanaSignInWithSolana = 'solana:signInWithSolana';\n\n/**\n * Creates a {@link MobileWallet} proxy that handles backwards compatibility and API to RPC conversion.\n *\n * @param protocolVersion the protocol version in use for this session/request\n * @param protocolRequestHandler callback function that handles sending the RPC request to the wallet endpoint.\n * @returns a {@link MobileWallet} proxy\n */\nfunction createMobileWalletProxy(protocolVersion, protocolRequestHandler) {\n    return new Proxy({}, {\n        get(target, p) {\n            if (target[p] == null) {\n                target[p] = function (inputParams) {\n                    return __awaiter(this, void 0, void 0, function* () {\n                        const { method, params } = handleMobileWalletRequest(p, inputParams, protocolVersion);\n                        const result = yield protocolRequestHandler(method, params);\n                        // if the request tried to sign in but the wallet did not return a sign in result, fallback on message signing\n                        if (method === 'authorize' && params.sign_in_payload && !result.sign_in_result) {\n                            result['sign_in_result'] = yield signInFallback(params.sign_in_payload, result, protocolRequestHandler);\n                        }\n                        return handleMobileWalletResponse(p, result, protocolVersion);\n                    });\n                };\n            }\n            return target[p];\n        },\n        defineProperty() {\n            return false;\n        },\n        deleteProperty() {\n            return false;\n        },\n    });\n}\n/**\n * Handles all {@link MobileWallet} API requests and determines the correct MWA RPC method and params to call.\n * This handles backwards compatibility, based on the provided @protocolVersion.\n *\n * @param methodName the name of {@link MobileWallet} method that was called\n * @param methodParams the parameters that were passed to the method\n * @param protocolVersion the protocol version in use for this session/request\n * @returns the RPC request method and params that should be sent to the wallet endpoint\n */\nfunction handleMobileWalletRequest(methodName, methodParams, protocolVersion) {\n    let params = methodParams;\n    let method = methodName\n        .toString()\n        .replace(/[A-Z]/g, (letter) => `_${letter.toLowerCase()}`)\n        .toLowerCase();\n    switch (methodName) {\n        case 'authorize': {\n            let { chain } = params;\n            if (protocolVersion === 'legacy') {\n                switch (chain) {\n                    case 'solana:testnet': {\n                        chain = 'testnet';\n                        break;\n                    }\n                    case 'solana:devnet': {\n                        chain = 'devnet';\n                        break;\n                    }\n                    case 'solana:mainnet': {\n                        chain = 'mainnet-beta';\n                        break;\n                    }\n                    default: {\n                        chain = params.cluster;\n                    }\n                }\n                params.cluster = chain;\n            }\n            else {\n                switch (chain) {\n                    case 'testnet':\n                    case 'devnet': {\n                        chain = `solana:${chain}`;\n                        break;\n                    }\n                    case 'mainnet-beta': {\n                        chain = 'solana:mainnet';\n                        break;\n                    }\n                }\n                params.chain = chain;\n            }\n        }\n        case 'reauthorize': {\n            const { auth_token, identity } = params;\n            if (auth_token) {\n                switch (protocolVersion) {\n                    case 'legacy': {\n                        method = 'reauthorize';\n                        params = { auth_token: auth_token, identity: identity };\n                        break;\n                    }\n                    default: {\n                        method = 'authorize';\n                        break;\n                    }\n                }\n            }\n            break;\n        }\n    }\n    return { method, params };\n}\n/**\n * Handles all {@link MobileWallet} API responses and modifies the response for backwards compatibility, if needed\n *\n * @param method the {@link MobileWallet} method that was called\n * @param response the original response that was returned by the method call\n * @param protocolVersion the protocol version in use for this session/request\n * @returns the possibly modified response\n */\nfunction handleMobileWalletResponse(method, response, protocolVersion) {\n    switch (method) {\n        case 'getCapabilities': {\n            const capabilities = response;\n            switch (protocolVersion) {\n                case 'legacy': {\n                    const features = [SolanaSignTransactions];\n                    if (capabilities.supports_clone_authorization === true) {\n                        features.push(SolanaCloneAuthorization);\n                    }\n                    return Object.assign(Object.assign({}, capabilities), { features: features });\n                }\n                case 'v1': {\n                    return Object.assign(Object.assign({}, capabilities), { supports_sign_and_send_transactions: true, supports_clone_authorization: capabilities.features.includes(SolanaCloneAuthorization) });\n                }\n            }\n        }\n    }\n    return response;\n}\nfunction signInFallback(signInPayload, authorizationResult, protocolRequestHandler) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const domain = (_a = signInPayload.domain) !== null && _a !== void 0 ? _a : window.location.host;\n        const address = authorizationResult.accounts[0].address;\n        const siwsMessage = createSIWSMessageBase64(Object.assign(Object.assign({}, signInPayload), { domain, address }));\n        const signMessageResult = yield protocolRequestHandler('sign_messages', {\n            addresses: [address],\n            payloads: [siwsMessage]\n        });\n        const signInResult = {\n            address: address,\n            signed_message: siwsMessage,\n            signature: signMessageResult.signed_payloads[0].slice(siwsMessage.length)\n        };\n        return signInResult;\n    });\n}\n\nconst SEQUENCE_NUMBER_BYTES = 4;\nfunction createSequenceNumberVector(sequenceNumber) {\n    if (sequenceNumber >= 4294967296) {\n        throw new Error('Outbound sequence number overflow. The maximum sequence number is 32-bytes.');\n    }\n    const byteArray = new ArrayBuffer(SEQUENCE_NUMBER_BYTES);\n    const view = new DataView(byteArray);\n    view.setUint32(0, sequenceNumber, /* littleEndian */ false);\n    return new Uint8Array(byteArray);\n}\n\nconst INITIALIZATION_VECTOR_BYTES = 12;\nconst ENCODED_PUBLIC_KEY_LENGTH_BYTES = 65;\nfunction encryptMessage(plaintext, sequenceNumber, sharedSecret) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const sequenceNumberVector = createSequenceNumberVector(sequenceNumber);\n        const initializationVector = new Uint8Array(INITIALIZATION_VECTOR_BYTES);\n        crypto.getRandomValues(initializationVector);\n        const ciphertext = yield crypto.subtle.encrypt(getAlgorithmParams(sequenceNumberVector, initializationVector), sharedSecret, new TextEncoder().encode(plaintext));\n        const response = new Uint8Array(sequenceNumberVector.byteLength + initializationVector.byteLength + ciphertext.byteLength);\n        response.set(new Uint8Array(sequenceNumberVector), 0);\n        response.set(new Uint8Array(initializationVector), sequenceNumberVector.byteLength);\n        response.set(new Uint8Array(ciphertext), sequenceNumberVector.byteLength + initializationVector.byteLength);\n        return response;\n    });\n}\nfunction decryptMessage(message, sharedSecret) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const sequenceNumberVector = message.slice(0, SEQUENCE_NUMBER_BYTES);\n        const initializationVector = message.slice(SEQUENCE_NUMBER_BYTES, SEQUENCE_NUMBER_BYTES + INITIALIZATION_VECTOR_BYTES);\n        const ciphertext = message.slice(SEQUENCE_NUMBER_BYTES + INITIALIZATION_VECTOR_BYTES);\n        const plaintextBuffer = yield crypto.subtle.decrypt(getAlgorithmParams(sequenceNumberVector, initializationVector), sharedSecret, ciphertext);\n        const plaintext = getUtf8Decoder().decode(plaintextBuffer);\n        return plaintext;\n    });\n}\nfunction getAlgorithmParams(sequenceNumber, initializationVector) {\n    return {\n        additionalData: sequenceNumber,\n        iv: initializationVector,\n        name: 'AES-GCM',\n        tagLength: 128, // 16 byte tag => 128 bits\n    };\n}\nlet _utf8Decoder;\nfunction getUtf8Decoder() {\n    if (_utf8Decoder === undefined) {\n        _utf8Decoder = new TextDecoder('utf-8');\n    }\n    return _utf8Decoder;\n}\n\nfunction generateAssociationKeypair() {\n    return __awaiter(this, void 0, void 0, function* () {\n        return yield crypto.subtle.generateKey({\n            name: 'ECDSA',\n            namedCurve: 'P-256',\n        }, false /* extractable */, ['sign'] /* keyUsages */);\n    });\n}\n\nfunction generateECDHKeypair() {\n    return __awaiter(this, void 0, void 0, function* () {\n        return yield crypto.subtle.generateKey({\n            name: 'ECDH',\n            namedCurve: 'P-256',\n        }, false /* extractable */, ['deriveKey', 'deriveBits'] /* keyUsages */);\n    });\n}\n\nfunction encryptJsonRpcMessage(jsonRpcMessage, sharedSecret) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const plaintext = JSON.stringify(jsonRpcMessage);\n        const sequenceNumber = jsonRpcMessage.id;\n        return encryptMessage(plaintext, sequenceNumber, sharedSecret);\n    });\n}\nfunction decryptJsonRpcMessage(message, sharedSecret) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const plaintext = yield decryptMessage(message, sharedSecret);\n        const jsonRpcMessage = JSON.parse(plaintext);\n        if (Object.hasOwnProperty.call(jsonRpcMessage, 'error')) {\n            throw new SolanaMobileWalletAdapterProtocolError(jsonRpcMessage.id, jsonRpcMessage.error.code, jsonRpcMessage.error.message);\n        }\n        return jsonRpcMessage;\n    });\n}\n\nfunction parseHelloRsp(payloadBuffer, // The X9.62-encoded wallet endpoint ephemeral ECDH public keypoint.\nassociationPublicKey, ecdhPrivateKey) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [associationPublicKeyBuffer, walletPublicKey] = yield Promise.all([\n            crypto.subtle.exportKey('raw', associationPublicKey),\n            crypto.subtle.importKey('raw', payloadBuffer.slice(0, ENCODED_PUBLIC_KEY_LENGTH_BYTES), { name: 'ECDH', namedCurve: 'P-256' }, false /* extractable */, [] /* keyUsages */),\n        ]);\n        const sharedSecret = yield crypto.subtle.deriveBits({ name: 'ECDH', public: walletPublicKey }, ecdhPrivateKey, 256);\n        const ecdhSecretKey = yield crypto.subtle.importKey('raw', sharedSecret, 'HKDF', false /* extractable */, ['deriveKey'] /* keyUsages */);\n        const aesKeyMaterialVal = yield crypto.subtle.deriveKey({\n            name: 'HKDF',\n            hash: 'SHA-256',\n            salt: new Uint8Array(associationPublicKeyBuffer),\n            info: new Uint8Array(),\n        }, ecdhSecretKey, { name: 'AES-GCM', length: 128 }, false /* extractable */, ['encrypt', 'decrypt']);\n        return aesKeyMaterialVal;\n    });\n}\n\nfunction parseSessionProps(message, sharedSecret) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const plaintext = yield decryptMessage(message, sharedSecret);\n        const jsonProperties = JSON.parse(plaintext);\n        let protocolVersion = 'legacy';\n        if (Object.hasOwnProperty.call(jsonProperties, 'v')) {\n            switch (jsonProperties.v) {\n                case 1:\n                case '1':\n                case 'v1':\n                    protocolVersion = 'v1';\n                    break;\n                case 'legacy':\n                    protocolVersion = 'legacy';\n                    break;\n                default:\n                    throw new SolanaMobileWalletAdapterError(SolanaMobileWalletAdapterErrorCode.ERROR_INVALID_PROTOCOL_VERSION, `Unknown/unsupported protocol version: ${jsonProperties.v}`);\n            }\n        }\n        return ({\n            protocol_version: protocolVersion\n        });\n    });\n}\n\nfunction getRandomAssociationPort() {\n    return assertAssociationPort(49152 + Math.floor(Math.random() * (65535 - 49152 + 1)));\n}\nfunction assertAssociationPort(port) {\n    if (port < 49152 || port > 65535) {\n        throw new SolanaMobileWalletAdapterError(SolanaMobileWalletAdapterErrorCode.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE, `Association port number must be between 49152 and 65535. ${port} given.`, { port });\n    }\n    return port;\n}\n\n// https://stackoverflow.com/a/9458996/802047\nfunction arrayBufferToBase64String(buffer) {\n    let binary = '';\n    const bytes = new Uint8Array(buffer);\n    const len = bytes.byteLength;\n    for (let ii = 0; ii < len; ii++) {\n        binary += String.fromCharCode(bytes[ii]);\n    }\n    return window.btoa(binary);\n}\n\nfunction getStringWithURLUnsafeCharactersReplaced(unsafeBase64EncodedString) {\n    return unsafeBase64EncodedString.replace(/[/+=]/g, (m) => ({\n        '/': '_',\n        '+': '-',\n        '=': '.',\n    }[m]));\n}\n\nfunction getRandomReflectorId() {\n    return assertReflectorId(getRandomInt(0, 9007199254740991)); // 0 < id < 2^53 - 1\n}\nfunction getRandomInt(min, max) {\n    const randomBuffer = new Uint32Array(1);\n    window.crypto.getRandomValues(randomBuffer);\n    let randomNumber = randomBuffer[0] / (0xffffffff + 1);\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(randomNumber * (max - min + 1)) + min;\n}\nfunction assertReflectorId(id) {\n    if (id < 0 || id > 9007199254740991) { // 0 < id < 2^53 - 1\n        throw new SolanaMobileWalletAdapterError(SolanaMobileWalletAdapterErrorCode.ERROR_REFLECTOR_ID_OUT_OF_RANGE, `Association port number must be between 49152 and 65535. ${id} given.`, { id });\n    }\n    return id;\n}\n\nconst INTENT_NAME = 'solana-wallet';\nfunction getPathParts(pathString) {\n    return (pathString\n        // Strip leading and trailing slashes\n        .replace(/(^\\/+|\\/+$)/g, '')\n        // Return an array of directories\n        .split('/'));\n}\nfunction getIntentURL(methodPathname, intentUrlBase) {\n    let baseUrl = null;\n    if (intentUrlBase) {\n        try {\n            baseUrl = new URL(intentUrlBase);\n        }\n        catch (_a) { } // eslint-disable-line no-empty\n        if ((baseUrl === null || baseUrl === void 0 ? void 0 : baseUrl.protocol) !== 'https:') {\n            throw new SolanaMobileWalletAdapterError(SolanaMobileWalletAdapterErrorCode.ERROR_FORBIDDEN_WALLET_BASE_URL, 'Base URLs supplied by wallets must be valid `https` URLs');\n        }\n    }\n    baseUrl || (baseUrl = new URL(`${INTENT_NAME}:/`));\n    const pathname = methodPathname.startsWith('/')\n        ? // Method is an absolute path. Replace it wholesale.\n            methodPathname\n        : // Method is a relative path. Merge it with the existing one.\n            [...getPathParts(baseUrl.pathname), ...getPathParts(methodPathname)].join('/');\n    return new URL(pathname, baseUrl);\n}\nfunction getAssociateAndroidIntentURL(associationPublicKey, putativePort, associationURLBase, protocolVersions = ['v1']) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const associationPort = assertAssociationPort(putativePort);\n        const exportedKey = yield crypto.subtle.exportKey('raw', associationPublicKey);\n        const encodedKey = arrayBufferToBase64String(exportedKey);\n        const url = getIntentURL('v1/associate/local', associationURLBase);\n        url.searchParams.set('association', getStringWithURLUnsafeCharactersReplaced(encodedKey));\n        url.searchParams.set('port', `${associationPort}`);\n        protocolVersions.forEach((version) => {\n            url.searchParams.set('v', version);\n        });\n        return url;\n    });\n}\nfunction getRemoteAssociateAndroidIntentURL(associationPublicKey, hostAuthority, putativeId, associationURLBase, protocolVersions = ['v1']) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const reflectorId = assertReflectorId(putativeId);\n        const exportedKey = yield crypto.subtle.exportKey('raw', associationPublicKey);\n        const encodedKey = arrayBufferToBase64String(exportedKey);\n        const url = getIntentURL('v1/associate/remote', associationURLBase);\n        url.searchParams.set('association', getStringWithURLUnsafeCharactersReplaced(encodedKey));\n        url.searchParams.set('reflector', `${hostAuthority}`);\n        url.searchParams.set('id', `${reflectorId}`);\n        protocolVersions.forEach((version) => {\n            url.searchParams.set('v', version);\n        });\n        return url;\n    });\n}\n\n// Typescript `enums` thwart tree-shaking. See https://bargsten.org/jsts/enums/\nconst Browser = {\n    Firefox: 0,\n    Other: 1,\n};\nfunction assertUnreachable(x) {\n    return x;\n}\nfunction getBrowser() {\n    return navigator.userAgent.indexOf('Firefox/') !== -1 ? Browser.Firefox : Browser.Other;\n}\nfunction getDetectionPromise() {\n    // Chrome and others silently fail if a custom protocol is not supported.\n    // For these, we wait to see if the browser is navigated away from in\n    // a reasonable amount of time (ie. the native wallet opened).\n    return new Promise((resolve, reject) => {\n        function cleanup() {\n            clearTimeout(timeoutId);\n            window.removeEventListener('blur', handleBlur);\n        }\n        function handleBlur() {\n            cleanup();\n            resolve();\n        }\n        window.addEventListener('blur', handleBlur);\n        const timeoutId = setTimeout(() => {\n            cleanup();\n            reject();\n        }, 2000);\n    });\n}\nlet _frame = null;\nfunction launchUrlThroughHiddenFrame(url) {\n    if (_frame == null) {\n        _frame = document.createElement('iframe');\n        _frame.style.display = 'none';\n        document.body.appendChild(_frame);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    _frame.contentWindow.location.href = url.toString();\n}\nfunction launchAssociation(associationUrl) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (associationUrl.protocol === 'https:') {\n            // The association URL is an Android 'App Link' or iOS 'Universal Link'.\n            // These are regular web URLs that are designed to launch an app if it\n            // is installed or load the actual target webpage if not.\n            window.location.assign(associationUrl);\n        }\n        else {\n            // The association URL has a custom protocol (eg. `solana-wallet:`)\n            try {\n                const browser = getBrowser();\n                switch (browser) {\n                    case Browser.Firefox:\n                        // If a custom protocol is not supported in Firefox, it throws.\n                        launchUrlThroughHiddenFrame(associationUrl);\n                        // If we reached this line, it's supported.\n                        break;\n                    case Browser.Other: {\n                        const detectionPromise = getDetectionPromise();\n                        window.location.assign(associationUrl);\n                        yield detectionPromise;\n                        break;\n                    }\n                    default:\n                        assertUnreachable(browser);\n                }\n            }\n            catch (e) {\n                throw new SolanaMobileWalletAdapterError(SolanaMobileWalletAdapterErrorCode.ERROR_WALLET_NOT_FOUND, 'Found no installed wallet that supports the mobile wallet protocol.');\n            }\n        }\n    });\n}\nfunction startSession(associationPublicKey, associationURLBase) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const randomAssociationPort = getRandomAssociationPort();\n        const associationUrl = yield getAssociateAndroidIntentURL(associationPublicKey, randomAssociationPort, associationURLBase);\n        yield launchAssociation(associationUrl);\n        return randomAssociationPort;\n    });\n}\nfunction getRemoteSessionUrl(associationPublicKey, hostAuthority, associationURLBase) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const randomReflectorId = getRandomReflectorId();\n        const associationUrl = yield getRemoteAssociateAndroidIntentURL(associationPublicKey, hostAuthority, randomReflectorId, associationURLBase);\n        return { associationUrl, reflectorId: randomReflectorId };\n    });\n}\n\nconst WEBSOCKET_CONNECTION_CONFIG = {\n    /**\n     * 300 milliseconds is a generally accepted threshold for what someone\n     * would consider an acceptable response time for a user interface\n     * after having performed a low-attention tapping task. We set the initial\n     * interval at which we wait for the wallet to set up the websocket at\n     * half this, as per the Nyquist frequency, with a progressive backoff\n     * sequence from there. The total wait time is 30s, which allows for the\n     * user to be presented with a disambiguation dialog, select a wallet, and\n     * for the wallet app to subsequently start.\n     */\n    retryDelayScheduleMs: [150, 150, 200, 500, 500, 750, 750, 1000],\n    timeoutMs: 30000,\n};\nconst WEBSOCKET_PROTOCOL = 'com.solana.mobilewalletadapter.v1';\nfunction assertSecureContext() {\n    if (typeof window === 'undefined' || window.isSecureContext !== true) {\n        throw new SolanaMobileWalletAdapterError(SolanaMobileWalletAdapterErrorCode.ERROR_SECURE_CONTEXT_REQUIRED, 'The mobile wallet adapter protocol must be used in a secure context (`https`).');\n    }\n}\nfunction assertSecureEndpointSpecificURI(walletUriBase) {\n    let url;\n    try {\n        url = new URL(walletUriBase);\n    }\n    catch (_a) {\n        throw new SolanaMobileWalletAdapterError(SolanaMobileWalletAdapterErrorCode.ERROR_FORBIDDEN_WALLET_BASE_URL, 'Invalid base URL supplied by wallet');\n    }\n    if (url.protocol !== 'https:') {\n        throw new SolanaMobileWalletAdapterError(SolanaMobileWalletAdapterErrorCode.ERROR_FORBIDDEN_WALLET_BASE_URL, 'Base URLs supplied by wallets must be valid `https` URLs');\n    }\n}\nfunction getSequenceNumberFromByteArray(byteArray) {\n    const view = new DataView(byteArray);\n    return view.getUint32(0, /* littleEndian */ false);\n}\nfunction transact(callback, config) {\n    return __awaiter(this, void 0, void 0, function* () {\n        assertSecureContext();\n        const associationKeypair = yield generateAssociationKeypair();\n        const sessionPort = yield startSession(associationKeypair.publicKey, config === null || config === void 0 ? void 0 : config.baseUri);\n        const websocketURL = `ws://localhost:${sessionPort}/solana-wallet`;\n        let connectionStartTime;\n        const getNextRetryDelayMs = (() => {\n            const schedule = [...WEBSOCKET_CONNECTION_CONFIG.retryDelayScheduleMs];\n            return () => (schedule.length > 1 ? schedule.shift() : schedule[0]);\n        })();\n        let nextJsonRpcMessageId = 1;\n        let lastKnownInboundSequenceNumber = 0;\n        let state = { __type: 'disconnected' };\n        return new Promise((resolve, reject) => {\n            let socket;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const jsonRpcResponsePromises = {};\n            const handleOpen = () => __awaiter(this, void 0, void 0, function* () {\n                if (state.__type !== 'connecting') {\n                    console.warn('Expected adapter state to be `connecting` at the moment the websocket opens. ' +\n                        `Got \\`${state.__type}\\`.`);\n                    return;\n                }\n                socket.removeEventListener('open', handleOpen);\n                // previous versions of this library and walletlib incorrectly implemented the MWA session \n                // establishment protocol for local connections. The dapp is supposed to wait for the \n                // APP_PING message before sending the HELLO_REQ. Instead, the dapp was sending the HELLO_REQ \n                // immediately upon connection to the websocket server regardless of wether or not an \n                // APP_PING was sent by the wallet/websocket server. We must continue to support this behavior \n                // in case the user is using a wallet that has not updated their walletlib implementation. \n                const { associationKeypair } = state;\n                const ecdhKeypair = yield generateECDHKeypair();\n                socket.send(yield createHelloReq(ecdhKeypair.publicKey, associationKeypair.privateKey));\n                state = {\n                    __type: 'hello_req_sent',\n                    associationPublicKey: associationKeypair.publicKey,\n                    ecdhPrivateKey: ecdhKeypair.privateKey,\n                };\n            });\n            const handleClose = (evt) => {\n                if (evt.wasClean) {\n                    state = { __type: 'disconnected' };\n                }\n                else {\n                    reject(new SolanaMobileWalletAdapterError(SolanaMobileWalletAdapterErrorCode.ERROR_SESSION_CLOSED, `The wallet session dropped unexpectedly (${evt.code}: ${evt.reason}).`, { closeEvent: evt }));\n                }\n                disposeSocket();\n            };\n            const handleError = (_evt) => __awaiter(this, void 0, void 0, function* () {\n                disposeSocket();\n                if (Date.now() - connectionStartTime >= WEBSOCKET_CONNECTION_CONFIG.timeoutMs) {\n                    reject(new SolanaMobileWalletAdapterError(SolanaMobileWalletAdapterErrorCode.ERROR_SESSION_TIMEOUT, `Failed to connect to the wallet websocket at ${websocketURL}.`));\n                }\n                else {\n                    yield new Promise((resolve) => {\n                        const retryDelayMs = getNextRetryDelayMs();\n                        retryWaitTimeoutId = window.setTimeout(resolve, retryDelayMs);\n                    });\n                    attemptSocketConnection();\n                }\n            });\n            const handleMessage = (evt) => __awaiter(this, void 0, void 0, function* () {\n                const responseBuffer = yield evt.data.arrayBuffer();\n                switch (state.__type) {\n                    case 'connecting':\n                        if (responseBuffer.byteLength !== 0) {\n                            throw new Error('Encountered unexpected message while connecting');\n                        }\n                        const ecdhKeypair = yield generateECDHKeypair();\n                        socket.send(yield createHelloReq(ecdhKeypair.publicKey, associationKeypair.privateKey));\n                        state = {\n                            __type: 'hello_req_sent',\n                            associationPublicKey: associationKeypair.publicKey,\n                            ecdhPrivateKey: ecdhKeypair.privateKey,\n                        };\n                        break;\n                    case 'connected':\n                        try {\n                            const sequenceNumberVector = responseBuffer.slice(0, SEQUENCE_NUMBER_BYTES);\n                            const sequenceNumber = getSequenceNumberFromByteArray(sequenceNumberVector);\n                            if (sequenceNumber !== (lastKnownInboundSequenceNumber + 1)) {\n                                throw new Error('Encrypted message has invalid sequence number');\n                            }\n                            lastKnownInboundSequenceNumber = sequenceNumber;\n                            const jsonRpcMessage = yield decryptJsonRpcMessage(responseBuffer, state.sharedSecret);\n                            const responsePromise = jsonRpcResponsePromises[jsonRpcMessage.id];\n                            delete jsonRpcResponsePromises[jsonRpcMessage.id];\n                            responsePromise.resolve(jsonRpcMessage.result);\n                        }\n                        catch (e) {\n                            if (e instanceof SolanaMobileWalletAdapterProtocolError) {\n                                const responsePromise = jsonRpcResponsePromises[e.jsonRpcMessageId];\n                                delete jsonRpcResponsePromises[e.jsonRpcMessageId];\n                                responsePromise.reject(e);\n                            }\n                            else {\n                                throw e;\n                            }\n                        }\n                        break;\n                    case 'hello_req_sent': {\n                        // if we receive an APP_PING message (empty message), resend the HELLO_REQ (see above)\n                        if (responseBuffer.byteLength === 0) {\n                            const ecdhKeypair = yield generateECDHKeypair();\n                            socket.send(yield createHelloReq(ecdhKeypair.publicKey, associationKeypair.privateKey));\n                            state = {\n                                __type: 'hello_req_sent',\n                                associationPublicKey: associationKeypair.publicKey,\n                                ecdhPrivateKey: ecdhKeypair.privateKey,\n                            };\n                            break;\n                        }\n                        const sharedSecret = yield parseHelloRsp(responseBuffer, state.associationPublicKey, state.ecdhPrivateKey);\n                        const sessionPropertiesBuffer = responseBuffer.slice(ENCODED_PUBLIC_KEY_LENGTH_BYTES);\n                        const sessionProperties = sessionPropertiesBuffer.byteLength !== 0\n                            ? yield (() => __awaiter(this, void 0, void 0, function* () {\n                                const sequenceNumberVector = sessionPropertiesBuffer.slice(0, SEQUENCE_NUMBER_BYTES);\n                                const sequenceNumber = getSequenceNumberFromByteArray(sequenceNumberVector);\n                                if (sequenceNumber !== (lastKnownInboundSequenceNumber + 1)) {\n                                    throw new Error('Encrypted message has invalid sequence number');\n                                }\n                                lastKnownInboundSequenceNumber = sequenceNumber;\n                                return parseSessionProps(sessionPropertiesBuffer, sharedSecret);\n                            }))() : { protocol_version: 'legacy' };\n                        state = { __type: 'connected', sharedSecret, sessionProperties };\n                        const wallet = createMobileWalletProxy(sessionProperties.protocol_version, (method, params) => __awaiter(this, void 0, void 0, function* () {\n                            const id = nextJsonRpcMessageId++;\n                            socket.send(yield encryptJsonRpcMessage({\n                                id,\n                                jsonrpc: '2.0',\n                                method,\n                                params: params !== null && params !== void 0 ? params : {},\n                            }, sharedSecret));\n                            return new Promise((resolve, reject) => {\n                                jsonRpcResponsePromises[id] = {\n                                    resolve(result) {\n                                        switch (method) {\n                                            case 'authorize':\n                                            case 'reauthorize': {\n                                                const { wallet_uri_base } = result;\n                                                if (wallet_uri_base != null) {\n                                                    try {\n                                                        assertSecureEndpointSpecificURI(wallet_uri_base);\n                                                    }\n                                                    catch (e) {\n                                                        reject(e);\n                                                        return;\n                                                    }\n                                                }\n                                                break;\n                                            }\n                                        }\n                                        resolve(result);\n                                    },\n                                    reject,\n                                };\n                            });\n                        }));\n                        try {\n                            resolve(yield callback(wallet));\n                        }\n                        catch (e) {\n                            reject(e);\n                        }\n                        finally {\n                            disposeSocket();\n                            socket.close();\n                        }\n                        break;\n                    }\n                }\n            });\n            let disposeSocket;\n            let retryWaitTimeoutId;\n            const attemptSocketConnection = () => {\n                if (disposeSocket) {\n                    disposeSocket();\n                }\n                state = { __type: 'connecting', associationKeypair };\n                if (connectionStartTime === undefined) {\n                    connectionStartTime = Date.now();\n                }\n                socket = new WebSocket(websocketURL, [WEBSOCKET_PROTOCOL]);\n                socket.addEventListener('open', handleOpen);\n                socket.addEventListener('close', handleClose);\n                socket.addEventListener('error', handleError);\n                socket.addEventListener('message', handleMessage);\n                disposeSocket = () => {\n                    window.clearTimeout(retryWaitTimeoutId);\n                    socket.removeEventListener('open', handleOpen);\n                    socket.removeEventListener('close', handleClose);\n                    socket.removeEventListener('error', handleError);\n                    socket.removeEventListener('message', handleMessage);\n                };\n            };\n            attemptSocketConnection();\n        });\n    });\n}\nfunction transactRemote(callback, config) {\n    return __awaiter(this, void 0, void 0, function* () {\n        assertSecureContext();\n        const associationKeypair = yield generateAssociationKeypair();\n        const { associationUrl, reflectorId } = yield getRemoteSessionUrl(associationKeypair.publicKey, config.remoteHostAuthority, config === null || config === void 0 ? void 0 : config.baseUri);\n        const websocketURL = `wss://${config === null || config === void 0 ? void 0 : config.remoteHostAuthority}/reflect?id=${reflectorId}`;\n        let connectionStartTime;\n        const getNextRetryDelayMs = (() => {\n            const schedule = [...WEBSOCKET_CONNECTION_CONFIG.retryDelayScheduleMs];\n            return () => (schedule.length > 1 ? schedule.shift() : schedule[0]);\n        })();\n        let nextJsonRpcMessageId = 1;\n        let lastKnownInboundSequenceNumber = 0;\n        let state = { __type: 'disconnected' };\n        return { associationUrl, result: new Promise((resolve, reject) => {\n                let socket;\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                const jsonRpcResponsePromises = {};\n                const handleOpen = () => __awaiter(this, void 0, void 0, function* () {\n                    if (state.__type !== 'connecting') {\n                        console.warn('Expected adapter state to be `connecting` at the moment the websocket opens. ' +\n                            `Got \\`${state.__type}\\`.`);\n                        return;\n                    }\n                    socket.removeEventListener('open', handleOpen);\n                });\n                const handleClose = (evt) => {\n                    if (evt.wasClean) {\n                        state = { __type: 'disconnected' };\n                    }\n                    else {\n                        reject(new SolanaMobileWalletAdapterError(SolanaMobileWalletAdapterErrorCode.ERROR_SESSION_CLOSED, `The wallet session dropped unexpectedly (${evt.code}: ${evt.reason}).`, { closeEvent: evt }));\n                    }\n                    disposeSocket();\n                };\n                const handleError = (_evt) => __awaiter(this, void 0, void 0, function* () {\n                    disposeSocket();\n                    if (Date.now() - connectionStartTime >= WEBSOCKET_CONNECTION_CONFIG.timeoutMs) {\n                        reject(new SolanaMobileWalletAdapterError(SolanaMobileWalletAdapterErrorCode.ERROR_SESSION_TIMEOUT, `Failed to connect to the wallet websocket at ${websocketURL}.`));\n                    }\n                    else {\n                        yield new Promise((resolve) => {\n                            const retryDelayMs = getNextRetryDelayMs();\n                            retryWaitTimeoutId = window.setTimeout(resolve, retryDelayMs);\n                        });\n                        attemptSocketConnection();\n                    }\n                });\n                const handleMessage = (evt) => __awaiter(this, void 0, void 0, function* () {\n                    const responseBuffer = yield evt.data.arrayBuffer();\n                    switch (state.__type) {\n                        case 'connecting':\n                            if (responseBuffer.byteLength !== 0) {\n                                throw new Error('Encountered unexpected message while connecting');\n                            }\n                            const ecdhKeypair = yield generateECDHKeypair();\n                            socket.send(yield createHelloReq(ecdhKeypair.publicKey, associationKeypair.privateKey));\n                            state = {\n                                __type: 'hello_req_sent',\n                                associationPublicKey: associationKeypair.publicKey,\n                                ecdhPrivateKey: ecdhKeypair.privateKey,\n                            };\n                            break;\n                        case 'connected':\n                            try {\n                                const sequenceNumberVector = responseBuffer.slice(0, SEQUENCE_NUMBER_BYTES);\n                                const sequenceNumber = getSequenceNumberFromByteArray(sequenceNumberVector);\n                                if (sequenceNumber !== (lastKnownInboundSequenceNumber + 1)) {\n                                    throw new Error('Encrypted message has invalid sequence number');\n                                }\n                                lastKnownInboundSequenceNumber = sequenceNumber;\n                                const jsonRpcMessage = yield decryptJsonRpcMessage(responseBuffer, state.sharedSecret);\n                                const responsePromise = jsonRpcResponsePromises[jsonRpcMessage.id];\n                                delete jsonRpcResponsePromises[jsonRpcMessage.id];\n                                responsePromise.resolve(jsonRpcMessage.result);\n                            }\n                            catch (e) {\n                                if (e instanceof SolanaMobileWalletAdapterProtocolError) {\n                                    const responsePromise = jsonRpcResponsePromises[e.jsonRpcMessageId];\n                                    delete jsonRpcResponsePromises[e.jsonRpcMessageId];\n                                    responsePromise.reject(e);\n                                }\n                                else {\n                                    throw e;\n                                }\n                            }\n                            break;\n                        case 'hello_req_sent': {\n                            const sharedSecret = yield parseHelloRsp(responseBuffer, state.associationPublicKey, state.ecdhPrivateKey);\n                            const sessionPropertiesBuffer = responseBuffer.slice(ENCODED_PUBLIC_KEY_LENGTH_BYTES);\n                            const sessionProperties = sessionPropertiesBuffer.byteLength !== 0\n                                ? yield (() => __awaiter(this, void 0, void 0, function* () {\n                                    const sequenceNumberVector = sessionPropertiesBuffer.slice(0, SEQUENCE_NUMBER_BYTES);\n                                    const sequenceNumber = getSequenceNumberFromByteArray(sequenceNumberVector);\n                                    if (sequenceNumber !== (lastKnownInboundSequenceNumber + 1)) {\n                                        throw new Error('Encrypted message has invalid sequence number');\n                                    }\n                                    lastKnownInboundSequenceNumber = sequenceNumber;\n                                    return parseSessionProps(sessionPropertiesBuffer, sharedSecret);\n                                }))() : { protocol_version: 'legacy' };\n                            state = { __type: 'connected', sharedSecret, sessionProperties };\n                            const wallet = createMobileWalletProxy(sessionProperties.protocol_version, (method, params) => __awaiter(this, void 0, void 0, function* () {\n                                const id = nextJsonRpcMessageId++;\n                                socket.send(yield encryptJsonRpcMessage({\n                                    id,\n                                    jsonrpc: '2.0',\n                                    method,\n                                    params: params !== null && params !== void 0 ? params : {},\n                                }, sharedSecret));\n                                return new Promise((resolve, reject) => {\n                                    jsonRpcResponsePromises[id] = {\n                                        resolve(result) {\n                                            switch (method) {\n                                                case 'authorize':\n                                                case 'reauthorize': {\n                                                    const { wallet_uri_base } = result;\n                                                    if (wallet_uri_base != null) {\n                                                        try {\n                                                            assertSecureEndpointSpecificURI(wallet_uri_base);\n                                                        }\n                                                        catch (e) {\n                                                            reject(e);\n                                                            return;\n                                                        }\n                                                    }\n                                                    break;\n                                                }\n                                            }\n                                            resolve(result);\n                                        },\n                                        reject,\n                                    };\n                                });\n                            }));\n                            try {\n                                resolve(yield callback(new Proxy(wallet, {\n                                    get(target, p) {\n                                        if (p == 'terminateSession') {\n                                            return function () {\n                                                return __awaiter(this, void 0, void 0, function* () {\n                                                    disposeSocket();\n                                                    socket.close();\n                                                    return;\n                                                });\n                                            };\n                                        }\n                                        else\n                                            return target[p];\n                                    },\n                                })));\n                            }\n                            catch (e) {\n                                reject(e);\n                            }\n                            break;\n                        }\n                    }\n                });\n                let disposeSocket;\n                let retryWaitTimeoutId;\n                const attemptSocketConnection = () => {\n                    if (disposeSocket) {\n                        disposeSocket();\n                    }\n                    state = { __type: 'connecting', associationKeypair };\n                    if (connectionStartTime === undefined) {\n                        connectionStartTime = Date.now();\n                    }\n                    socket = new WebSocket(websocketURL, [WEBSOCKET_PROTOCOL]);\n                    socket.addEventListener('open', handleOpen);\n                    socket.addEventListener('close', handleClose);\n                    socket.addEventListener('error', handleError);\n                    socket.addEventListener('message', handleMessage);\n                    disposeSocket = () => {\n                        window.clearTimeout(retryWaitTimeoutId);\n                        socket.removeEventListener('open', handleOpen);\n                        socket.removeEventListener('close', handleClose);\n                        socket.removeEventListener('error', handleError);\n                        socket.removeEventListener('message', handleMessage);\n                    };\n                };\n                attemptSocketConnection();\n            }) };\n    });\n}\n\nexport { SolanaCloneAuthorization, SolanaMobileWalletAdapterError, SolanaMobileWalletAdapterErrorCode, SolanaMobileWalletAdapterProtocolError, SolanaMobileWalletAdapterProtocolErrorCode, SolanaSignInWithSolana, SolanaSignTransactions, transact, transactRemote };\n","import { VersionedMessage, Transaction, VersionedTransaction, SIGNATURE_LENGTH_IN_BYTES } from '@solana/web3.js';\nimport { transact as transact$1, transactRemote as transactRemote$1 } from '@solana-mobile/mobile-wallet-adapter-protocol';\nimport bs58 from 'bs58';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\n\nfunction fromUint8Array(byteArray) {\n    return window.btoa(String.fromCharCode.call(null, ...byteArray));\n}\nfunction toUint8Array(base64EncodedByteArray) {\n    return new Uint8Array(window\n        .atob(base64EncodedByteArray)\n        .split('')\n        .map((c) => c.charCodeAt(0)));\n}\n\nfunction getPayloadFromTransaction(transaction) {\n    const serializedTransaction = 'version' in transaction\n        ? transaction.serialize()\n        : transaction.serialize({\n            requireAllSignatures: false,\n            verifySignatures: false,\n        });\n    const payload = fromUint8Array(serializedTransaction);\n    return payload;\n}\nfunction getTransactionFromWireMessage(byteArray) {\n    const numSignatures = byteArray[0];\n    const messageOffset = numSignatures * SIGNATURE_LENGTH_IN_BYTES + 1;\n    const version = VersionedMessage.deserializeMessageVersion(byteArray.slice(messageOffset, byteArray.length));\n    if (version === 'legacy') {\n        return Transaction.from(byteArray);\n    }\n    else {\n        return VersionedTransaction.deserialize(byteArray);\n    }\n}\nfunction transact(callback, config) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const augmentedCallback = (wallet) => {\n            const augmentedAPI = new Proxy({}, {\n                get(target, p) {\n                    if (target[p] == null) {\n                        switch (p) {\n                            case 'signAndSendTransactions':\n                                target[p] = function (_a) {\n                                    var { minContextSlot, commitment, skipPreflight, maxRetries, waitForCommitmentToSendNextTransaction, transactions } = _a, rest = __rest(_a, [\"minContextSlot\", \"commitment\", \"skipPreflight\", \"maxRetries\", \"waitForCommitmentToSendNextTransaction\", \"transactions\"]);\n                                    return __awaiter(this, void 0, void 0, function* () {\n                                        const payloads = transactions.map(getPayloadFromTransaction);\n                                        const options = {\n                                            min_context_slot: minContextSlot,\n                                            commitment: commitment,\n                                            skip_preflight: skipPreflight,\n                                            max_retries: maxRetries,\n                                            wait_for_commitment_to_send_next_transaction: waitForCommitmentToSendNextTransaction\n                                        };\n                                        const { signatures: base64EncodedSignatures } = yield wallet.signAndSendTransactions(Object.assign(Object.assign(Object.assign({}, rest), (Object.values(options).some(element => element != null)\n                                            ? { options: options }\n                                            : null)), { payloads }));\n                                        const signatures = base64EncodedSignatures.map(toUint8Array).map(bs58.encode);\n                                        return signatures;\n                                    });\n                                };\n                                break;\n                            case 'signMessages':\n                                target[p] = function (_a) {\n                                    var { payloads } = _a, rest = __rest(_a, [\"payloads\"]);\n                                    return __awaiter(this, void 0, void 0, function* () {\n                                        const base64EncodedPayloads = payloads.map(fromUint8Array);\n                                        const { signed_payloads: base64EncodedSignedMessages } = yield wallet.signMessages(Object.assign(Object.assign({}, rest), { payloads: base64EncodedPayloads }));\n                                        const signedMessages = base64EncodedSignedMessages.map(toUint8Array);\n                                        return signedMessages;\n                                    });\n                                };\n                                break;\n                            case 'signTransactions':\n                                target[p] = function (_a) {\n                                    var { transactions } = _a, rest = __rest(_a, [\"transactions\"]);\n                                    return __awaiter(this, void 0, void 0, function* () {\n                                        const payloads = transactions.map(getPayloadFromTransaction);\n                                        const { signed_payloads: base64EncodedCompiledTransactions } = yield wallet.signTransactions(Object.assign(Object.assign({}, rest), { payloads }));\n                                        const compiledTransactions = base64EncodedCompiledTransactions.map(toUint8Array);\n                                        const signedTransactions = compiledTransactions.map(getTransactionFromWireMessage);\n                                        return signedTransactions;\n                                    });\n                                };\n                                break;\n                            default: {\n                                target[p] = wallet[p];\n                                break;\n                            }\n                        }\n                    }\n                    return target[p];\n                },\n                defineProperty() {\n                    return false;\n                },\n                deleteProperty() {\n                    return false;\n                },\n            });\n            return callback(augmentedAPI);\n        };\n        return yield transact$1(augmentedCallback, config);\n    });\n}\nfunction transactRemote(callback, config) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const augmentedCallback = (wallet) => {\n            const augmentedAPI = new Proxy({}, {\n                get(target, p) {\n                    if (target[p] == null) {\n                        switch (p) {\n                            case 'signAndSendTransactions':\n                                target[p] = function (_a) {\n                                    var { minContextSlot, commitment, skipPreflight, maxRetries, waitForCommitmentToSendNextTransaction, transactions } = _a, rest = __rest(_a, [\"minContextSlot\", \"commitment\", \"skipPreflight\", \"maxRetries\", \"waitForCommitmentToSendNextTransaction\", \"transactions\"]);\n                                    return __awaiter(this, void 0, void 0, function* () {\n                                        const payloads = transactions.map(getPayloadFromTransaction);\n                                        const options = {\n                                            min_context_slot: minContextSlot,\n                                            commitment: commitment,\n                                            skip_preflight: skipPreflight,\n                                            max_retries: maxRetries,\n                                            wait_for_commitment_to_send_next_transaction: waitForCommitmentToSendNextTransaction\n                                        };\n                                        const { signatures: base64EncodedSignatures } = yield wallet.signAndSendTransactions(Object.assign(Object.assign(Object.assign({}, rest), (Object.values(options).some(element => element != null)\n                                            ? { options: options }\n                                            : null)), { payloads }));\n                                        const signatures = base64EncodedSignatures.map(toUint8Array).map(bs58.encode);\n                                        return signatures;\n                                    });\n                                };\n                                break;\n                            case 'signMessages':\n                                target[p] = function (_a) {\n                                    var { payloads } = _a, rest = __rest(_a, [\"payloads\"]);\n                                    return __awaiter(this, void 0, void 0, function* () {\n                                        const base64EncodedPayloads = payloads.map(fromUint8Array);\n                                        const { signed_payloads: base64EncodedSignedMessages } = yield wallet.signMessages(Object.assign(Object.assign({}, rest), { payloads: base64EncodedPayloads }));\n                                        const signedMessages = base64EncodedSignedMessages.map(toUint8Array);\n                                        return signedMessages;\n                                    });\n                                };\n                                break;\n                            case 'signTransactions':\n                                target[p] = function (_a) {\n                                    var { transactions } = _a, rest = __rest(_a, [\"transactions\"]);\n                                    return __awaiter(this, void 0, void 0, function* () {\n                                        const payloads = transactions.map(getPayloadFromTransaction);\n                                        const { signed_payloads: base64EncodedCompiledTransactions } = yield wallet.signTransactions(Object.assign(Object.assign({}, rest), { payloads }));\n                                        const compiledTransactions = base64EncodedCompiledTransactions.map(toUint8Array);\n                                        const signedTransactions = compiledTransactions.map(getTransactionFromWireMessage);\n                                        return signedTransactions;\n                                    });\n                                };\n                                break;\n                            default: {\n                                target[p] = wallet[p];\n                                break;\n                            }\n                        }\n                    }\n                    return target[p];\n                },\n                defineProperty() {\n                    return false;\n                },\n                deleteProperty() {\n                    return false;\n                },\n            });\n            return callback(augmentedAPI);\n        };\n        return yield transactRemote$1(augmentedCallback, config);\n    });\n}\n\nexport { transact, transactRemote };\n","import { BaseSignInMessageSignerWalletAdapter, WalletReadyState, WalletPublicKeyError, WalletNotReadyError, WalletConnectionError, WalletDisconnectedError, WalletNotConnectedError, WalletSignTransactionError, WalletSendTransactionError, WalletSignMessageError, isVersionedTransaction as isVersionedTransaction$1 } from '@solana/wallet-adapter-base';\nimport { PublicKey } from '@solana/web3.js';\nimport { transact, transactRemote } from '@solana-mobile/mobile-wallet-adapter-protocol-web3js';\nimport QRCode from 'qrcode';\nimport { toUint8Array as toUint8Array$1 } from 'js-base64';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\n\nfunction toUint8Array(base64EncodedByteArray) {\n    return new Uint8Array(window\n        .atob(base64EncodedByteArray)\n        .split('')\n        .map((c) => c.charCodeAt(0)));\n}\n\nfunction getIsSupported$1() {\n    return (typeof window !== 'undefined' &&\n        window.isSecureContext &&\n        typeof document !== 'undefined' &&\n        /android/i.test(navigator.userAgent));\n}\n\nconst SolanaMobileWalletAdapterWalletName = 'Mobile Wallet Adapter';\nconst SIGNATURE_LENGTH_IN_BYTES$1 = 64;\nfunction getPublicKeyFromAddress$1(address) {\n    const publicKeyByteArray = toUint8Array(address);\n    return new PublicKey(publicKeyByteArray);\n}\nfunction isVersionedTransaction(transaction) {\n    return 'version' in transaction;\n}\nfunction clusterToChainId(cluster) {\n    switch (cluster) {\n        case 'mainnet-beta':\n            return 'solana:mainnet';\n        case 'testnet':\n            return 'solana:testnet';\n        case 'devnet':\n            return 'solana:devnet';\n    }\n}\nclass SolanaMobileWalletAdapter extends BaseSignInMessageSignerWalletAdapter {\n    constructor(config) {\n        var _a;\n        super();\n        this.supportedTransactionVersions = new Set(\n        // FIXME(#244): We can't actually know what versions are supported until we know which wallet we're talking to.\n        ['legacy', 0]);\n        this.name = SolanaMobileWalletAdapterWalletName;\n        this.url = 'https://solanamobile.com/wallets';\n        this.icon = 'data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI4IiB3aWR0aD0iMjgiIHZpZXdCb3g9Ii0zIDAgMjggMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0RDQjhGRiI+PHBhdGggZD0iTTE3LjQgMTcuNEgxNXYyLjRoMi40di0yLjRabTEuMi05LjZoLTIuNHYyLjRoMi40VjcuOFoiLz48cGF0aCBkPSJNMjEuNiAzVjBoLTIuNHYzaC0zLjZWMGgtMi40djNoLTIuNHY2LjZINC41YTIuMSAyLjEgMCAxIDEgMC00LjJoMi43VjNINC41QTQuNSA0LjUgMCAwIDAgMCA3LjVWMjRoMjEuNnYtNi42aC0yLjR2NC4ySDIuNFYxMS41Yy41LjMgMS4yLjQgMS44LjVoNy41QTYuNiA2LjYgMCAwIDAgMjQgOVYzaC0yLjRabTAgNS43YTQuMiA0LjIgMCAxIDEtOC40IDBWNS40aDguNHYzLjNaIi8+PC9nPjwvc3ZnPg==';\n        this._connecting = false;\n        /**\n         * Every time the connection is recycled in some way (eg. `disconnect()` is called)\n         * increment this and use it to make sure that `transact` calls from the previous\n         * 'generation' don't continue to do work and throw exceptions.\n         */\n        this._connectionGeneration = 0;\n        this._readyState = getIsSupported$1() ? WalletReadyState.Loadable : WalletReadyState.Unsupported;\n        this._authorizationResultCache = config.authorizationResultCache;\n        this._addressSelector = config.addressSelector;\n        this._appIdentity = config.appIdentity;\n        this._chain = (_a = config.chain) !== null && _a !== void 0 ? _a : clusterToChainId(config.cluster);\n        this._hostAuthority = config.remoteHostAuthority;\n        this._onWalletNotFound = config.onWalletNotFound;\n        if (this._readyState !== WalletReadyState.Unsupported) {\n            this._authorizationResultCache.get().then((authorizationResult) => {\n                if (authorizationResult) {\n                    // Having a prior authorization result is, right now, the best\n                    // indication that a mobile wallet is installed. There is no API\n                    // we can use to test for whether the association URI is supported.\n                    this.declareWalletAsInstalled();\n                }\n            });\n        }\n    }\n    get publicKey() {\n        if (this._publicKey == null && this._selectedAddress != null) {\n            try {\n                this._publicKey = getPublicKeyFromAddress$1(this._selectedAddress);\n            }\n            catch (e) {\n                throw new WalletPublicKeyError((e instanceof Error && (e === null || e === void 0 ? void 0 : e.message)) || 'Unknown error', e);\n            }\n        }\n        return this._publicKey ? this._publicKey : null;\n    }\n    get connected() {\n        return !!this._authorizationResult;\n    }\n    get connecting() {\n        return this._connecting;\n    }\n    get readyState() {\n        return this._readyState;\n    }\n    declareWalletAsInstalled() {\n        if (this._readyState !== WalletReadyState.Installed) {\n            this.emit('readyStateChange', (this._readyState = WalletReadyState.Installed));\n        }\n    }\n    runWithGuard(callback) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield callback();\n            }\n            catch (e) {\n                this.emit('error', e);\n                throw e;\n            }\n        });\n    }\n    /** @deprecated Use `autoConnect()` instead. */\n    autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.autoConnect();\n        });\n    }\n    autoConnect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.connecting || this.connected) {\n                return;\n            }\n            return yield this.runWithGuard(() => __awaiter(this, void 0, void 0, function* () {\n                if (this._readyState !== WalletReadyState.Installed && this._readyState !== WalletReadyState.Loadable) {\n                    throw new WalletNotReadyError();\n                }\n                this._connecting = true;\n                try {\n                    const cachedAuthorizationResult = yield this._authorizationResultCache.get();\n                    if (cachedAuthorizationResult) {\n                        // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                        this.handleAuthorizationResult(cachedAuthorizationResult);\n                    }\n                }\n                catch (e) {\n                    throw new WalletConnectionError((e instanceof Error && e.message) || 'Unknown error', e);\n                }\n                finally {\n                    this._connecting = false;\n                }\n            }));\n        });\n    }\n    connect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.connecting || this.connected) {\n                return;\n            }\n            return yield this.runWithGuard(() => __awaiter(this, void 0, void 0, function* () {\n                if (this._readyState !== WalletReadyState.Installed && this._readyState !== WalletReadyState.Loadable) {\n                    throw new WalletNotReadyError();\n                }\n                this._connecting = true;\n                try {\n                    yield this.performAuthorization();\n                }\n                catch (e) {\n                    throw new WalletConnectionError((e instanceof Error && e.message) || 'Unknown error', e);\n                }\n                finally {\n                    this._connecting = false;\n                }\n            }));\n        });\n    }\n    performAuthorization(signInPayload) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const cachedAuthorizationResult = yield this._authorizationResultCache.get();\n                if (cachedAuthorizationResult) {\n                    // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                    this.handleAuthorizationResult(cachedAuthorizationResult);\n                    return cachedAuthorizationResult;\n                }\n                return yield this.transact((wallet) => __awaiter(this, void 0, void 0, function* () {\n                    const authorizationResult = yield wallet.authorize({\n                        chain: this._chain,\n                        identity: this._appIdentity,\n                        sign_in_payload: signInPayload,\n                    });\n                    // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                    Promise.all([\n                        this._authorizationResultCache.set(authorizationResult),\n                        this.handleAuthorizationResult(authorizationResult),\n                    ]);\n                    return authorizationResult;\n                }));\n            }\n            catch (e) {\n                throw new WalletConnectionError((e instanceof Error && e.message) || 'Unknown error', e);\n            }\n        });\n    }\n    handleAuthorizationResult(authorizationResult) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const didPublicKeysChange = \n            // Case 1: We started from having no authorization.\n            this._authorizationResult == null ||\n                // Case 2: The number of authorized accounts changed.\n                ((_a = this._authorizationResult) === null || _a === void 0 ? void 0 : _a.accounts.length) !== authorizationResult.accounts.length ||\n                // Case 3: The new list of addresses isn't exactly the same as the old list, in the same order.\n                this._authorizationResult.accounts.some((account, ii) => account.address !== authorizationResult.accounts[ii].address);\n            this._authorizationResult = authorizationResult;\n            this.declareWalletAsInstalled();\n            if (didPublicKeysChange) {\n                const nextSelectedAddress = yield this._addressSelector.select(authorizationResult.accounts.map(({ address }) => address));\n                if (nextSelectedAddress !== this._selectedAddress) {\n                    this._selectedAddress = nextSelectedAddress;\n                    delete this._publicKey;\n                    this.emit('connect', \n                    // Having just set `this._selectedAddress`, `this.publicKey` is definitely non-null\n                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                    this.publicKey);\n                }\n            }\n        });\n    }\n    performReauthorization(wallet, authToken) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const authorizationResult = yield wallet.authorize({\n                    auth_token: authToken,\n                    identity: this._appIdentity,\n                });\n                // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                Promise.all([\n                    this._authorizationResultCache.set(authorizationResult),\n                    this.handleAuthorizationResult(authorizationResult),\n                ]);\n            }\n            catch (e) {\n                this.disconnect();\n                throw new WalletDisconnectedError((e instanceof Error && (e === null || e === void 0 ? void 0 : e.message)) || 'Unknown error', e);\n            }\n        });\n    }\n    disconnect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._authorizationResultCache.clear(); // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n            this._connecting = false;\n            this._connectionGeneration++;\n            delete this._authorizationResult;\n            delete this._publicKey;\n            delete this._selectedAddress;\n            this.emit('disconnect');\n        });\n    }\n    transact(callback) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const walletUriBase = (_a = this._authorizationResult) === null || _a === void 0 ? void 0 : _a.wallet_uri_base;\n            const config = walletUriBase ? { baseUri: walletUriBase } : undefined;\n            const remoteConfig = this._hostAuthority ? { remoteHostAuthority: this._hostAuthority } : undefined;\n            const currentConnectionGeneration = this._connectionGeneration;\n            try {\n                return yield transact(callback, Object.assign(Object.assign({}, config), remoteConfig));\n            }\n            catch (e) {\n                if (this._connectionGeneration !== currentConnectionGeneration) {\n                    yield new Promise(() => { }); // Never resolve.\n                }\n                if (e instanceof Error &&\n                    e.name === 'SolanaMobileWalletAdapterError' &&\n                    e.code === 'ERROR_WALLET_NOT_FOUND') {\n                    yield this._onWalletNotFound(this);\n                }\n                throw e;\n            }\n        });\n    }\n    assertIsAuthorized() {\n        if (!this._authorizationResult || !this._selectedAddress)\n            throw new WalletNotConnectedError();\n        return {\n            authToken: this._authorizationResult.auth_token,\n            selectedAddress: this._selectedAddress,\n        };\n    }\n    performSignTransactions(transactions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { authToken } = this.assertIsAuthorized();\n            try {\n                return yield this.transact((wallet) => __awaiter(this, void 0, void 0, function* () {\n                    yield this.performReauthorization(wallet, authToken);\n                    const signedTransactions = yield wallet.signTransactions({\n                        transactions,\n                    });\n                    return signedTransactions;\n                }));\n            }\n            catch (error) {\n                throw new WalletSignTransactionError(error === null || error === void 0 ? void 0 : error.message, error);\n            }\n        });\n    }\n    sendTransaction(transaction, connection, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.runWithGuard(() => __awaiter(this, void 0, void 0, function* () {\n                const { authToken } = this.assertIsAuthorized();\n                const minContextSlot = options === null || options === void 0 ? void 0 : options.minContextSlot;\n                try {\n                    return yield this.transact((wallet) => __awaiter(this, void 0, void 0, function* () {\n                        function getTargetCommitment() {\n                            let targetCommitment;\n                            switch (connection.commitment) {\n                                case 'confirmed':\n                                case 'finalized':\n                                case 'processed':\n                                    targetCommitment = connection.commitment;\n                                    break;\n                                default:\n                                    targetCommitment = 'finalized';\n                            }\n                            let targetPreflightCommitment;\n                            switch (options === null || options === void 0 ? void 0 : options.preflightCommitment) {\n                                case 'confirmed':\n                                case 'finalized':\n                                case 'processed':\n                                    targetPreflightCommitment = options.preflightCommitment;\n                                    break;\n                                case undefined:\n                                    targetPreflightCommitment = targetCommitment;\n                                    break;\n                                default:\n                                    targetPreflightCommitment = 'finalized';\n                            }\n                            const preflightCommitmentScore = targetPreflightCommitment === 'finalized'\n                                ? 2\n                                : targetPreflightCommitment === 'confirmed'\n                                    ? 1\n                                    : 0;\n                            const targetCommitmentScore = targetCommitment === 'finalized' ? 2 : targetCommitment === 'confirmed' ? 1 : 0;\n                            return preflightCommitmentScore < targetCommitmentScore\n                                ? targetPreflightCommitment\n                                : targetCommitment;\n                        }\n                        const [capabilities, _1, _2] = yield Promise.all([\n                            wallet.getCapabilities(),\n                            this.performReauthorization(wallet, authToken),\n                            isVersionedTransaction(transaction)\n                                ? null\n                                : /**\n                                   * Unlike versioned transactions, legacy `Transaction` objects\n                                   * may not have an associated `feePayer` or `recentBlockhash`.\n                                   * This code exists to patch them up in case they are missing.\n                                   */\n                                    (() => __awaiter(this, void 0, void 0, function* () {\n                                        var _a;\n                                        transaction.feePayer || (transaction.feePayer = (_a = this.publicKey) !== null && _a !== void 0 ? _a : undefined);\n                                        if (transaction.recentBlockhash == null) {\n                                            const { blockhash } = yield connection.getLatestBlockhash({\n                                                commitment: getTargetCommitment(),\n                                            });\n                                            transaction.recentBlockhash = blockhash;\n                                        }\n                                    }))(),\n                        ]);\n                        if (capabilities.supports_sign_and_send_transactions) {\n                            const signatures = yield wallet.signAndSendTransactions({\n                                minContextSlot,\n                                transactions: [transaction],\n                            });\n                            return signatures[0];\n                        }\n                        else {\n                            const [signedTransaction] = yield wallet.signTransactions({\n                                transactions: [transaction],\n                            });\n                            if (isVersionedTransaction(signedTransaction)) {\n                                return yield connection.sendTransaction(signedTransaction);\n                            }\n                            else {\n                                const serializedTransaction = signedTransaction.serialize();\n                                return yield connection.sendRawTransaction(serializedTransaction, Object.assign(Object.assign({}, options), { preflightCommitment: getTargetCommitment() }));\n                            }\n                        }\n                    }));\n                }\n                catch (error) {\n                    throw new WalletSendTransactionError(error === null || error === void 0 ? void 0 : error.message, error);\n                }\n            }));\n        });\n    }\n    signTransaction(transaction) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.runWithGuard(() => __awaiter(this, void 0, void 0, function* () {\n                const [signedTransaction] = yield this.performSignTransactions([transaction]);\n                return signedTransaction;\n            }));\n        });\n    }\n    signAllTransactions(transactions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.runWithGuard(() => __awaiter(this, void 0, void 0, function* () {\n                const signedTransactions = yield this.performSignTransactions(transactions);\n                return signedTransactions;\n            }));\n        });\n    }\n    signMessage(message) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.runWithGuard(() => __awaiter(this, void 0, void 0, function* () {\n                const { authToken, selectedAddress } = this.assertIsAuthorized();\n                try {\n                    return yield this.transact((wallet) => __awaiter(this, void 0, void 0, function* () {\n                        yield this.performReauthorization(wallet, authToken);\n                        const [signedMessage] = yield wallet.signMessages({\n                            addresses: [selectedAddress],\n                            payloads: [message],\n                        });\n                        const signature = signedMessage.slice(-SIGNATURE_LENGTH_IN_BYTES$1);\n                        return signature;\n                    }));\n                }\n                catch (error) {\n                    throw new WalletSignMessageError(error === null || error === void 0 ? void 0 : error.message, error);\n                }\n            }));\n        });\n    }\n    signIn(input) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.runWithGuard(() => __awaiter(this, void 0, void 0, function* () {\n                var _a, _b;\n                if (this._readyState !== WalletReadyState.Installed && this._readyState !== WalletReadyState.Loadable) {\n                    throw new WalletNotReadyError();\n                }\n                this._connecting = true;\n                try {\n                    const authorizationResult = yield this.performAuthorization(Object.assign(Object.assign({}, input), { domain: (_a = input === null || input === void 0 ? void 0 : input.domain) !== null && _a !== void 0 ? _a : window.location.host }));\n                    if (!authorizationResult.sign_in_result) {\n                        throw new Error(\"Sign in failed, no sign in result returned by wallet\");\n                    }\n                    const signedInAddress = authorizationResult.sign_in_result.address;\n                    const signedInAccount = Object.assign(Object.assign({}, (_b = authorizationResult.accounts.find(acc => acc.address == signedInAddress)) !== null && _b !== void 0 ? _b : {\n                        address: signedInAddress\n                    }), { publicKey: toUint8Array(signedInAddress) });\n                    return {\n                        account: signedInAccount,\n                        signedMessage: toUint8Array(authorizationResult.sign_in_result.signed_message),\n                        signature: toUint8Array(authorizationResult.sign_in_result.signature)\n                    };\n                }\n                catch (e) {\n                    throw new WalletConnectionError((e instanceof Error && e.message) || 'Unknown error', e);\n                }\n                finally {\n                    this._connecting = false;\n                }\n            }));\n        });\n    }\n}\n\nconst BluetoothHtml = `\r\n    <div class=\"mobile-wallet-adapter-embedded-modal-content\">\r\n    <button id=\"mobile-wallet-adapter-embedded-modal-close\" class=\"mobile-wallet-adapter-embedded-modal-close\">\r\n        <svg width=\"14\" height=\"14\">\r\n        <path d=\"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z\" />\r\n        </svg>\r\n    </button>\r\n    <h1><b>Jupiter</b> wants to connect</h1>\r\n    <p class=\"mobile-wallet-adapter-embedded-modal-subtitle\">Connect to your mobile wallet app through Bluetooth.</p>\r\n    <div class=\"mobile-wallet-adapter-embedded-modal-connection-status-container\">\r\n        <div id=\"status-not-connected\" class=\"connection-status\">\r\n        <svg class=\"bluetooth-icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n            <path fill=\"#a0a0a0\" d=\"M14.24 12.01l2.32 2.32c.28-.72.44-1.51.44-2.33 0-.82-.16-1.59-.43-2.31l-2.33 2.32zm5.29-5.3l-1.26 1.26c.63 1.21.98 2.57.98 4.02s-.36 2.82-.98 4.02l1.2 1.2c.97-1.54 1.54-3.36 1.54-5.31-.01-1.89-.55-3.67-1.48-5.19zm-3.82 1L10 2H9v7.59L4.41 5 3 6.41 8.59 12 3 17.59 4.41 19 9 14.41V22h1l5.71-5.71-4.3-4.29 4.3-4.29zM11 5.83l1.88 1.88L11 9.59V5.83zm1.88 10.46L11 18.17v-3.76l1.88 1.88z\"/>\r\n        </svg>\r\n        <p>Not connected</p>\r\n        </div>\r\n        <div id=\"status-connecting\" class=\"connection-status\" style=\"display:none;\">\r\n        <div class=\"spinner\"></div>\r\n        <p>Connecting...</p>\r\n        </div>\r\n        <div id=\"status-connected\" class=\"connection-status\" style=\"display:none;\">\r\n        <svg class=\"checkmark-icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\r\n            <path fill=\"#4CAF50\" d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\"/>\r\n        </svg>\r\n        <p>Connected</p>\r\n        </div>\r\n    </div>\r\n    <div class=\"button-group\">\r\n        <button id=\"cancel-btn\" class=\"cancel-btn\">Cancel</button>\r\n        <button id=\"connect-btn\" class=\"connect-btn\">Connect</button>\r\n    </div>\r\n    </div>\r\n`;\n\nconst QRCodeHtml = `\r\n<div class=\"mobile-wallet-adapter-embedded-modal-content\">\r\n  <button id=\"mobile-wallet-adapter-embedded-modal-close\" class=\"mobile-wallet-adapter-embedded-modal-close\">\r\n    <svg width=\"14\" height=\"14\">\r\n      <path d=\"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z\" />\r\n    </svg>\r\n  </button>\r\n  <h1>Scan to connect</h1>\r\n  <p class=\"mobile-wallet-adapter-embedded-modal-subtitle\">Use your wallet app to scan the QR Code and connect.</p>\r\n  <div id=\"mobile-wallet-adapter-embedded-modal-qr-code-container\" />\r\n</div>\r\n`;\n\nconst css = `\r\n.mobile-wallet-adapter-embedded-modal {\r\n    display: flex; /* Use flexbox to center content */\r\n    flex-direction: column;\r\n    justify-content: center; /* Center horizontally */\r\n    align-items: center; /* Center vertically */\r\n    position: fixed; /* Stay in place */\r\n    z-index: 1; /* Sit on top */\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%; /* Full width */\r\n    height: 100%; /* Full height */\r\n    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */\r\n}\r\n\r\n.mobile-wallet-adapter-embedded-modal-content {\r\n    background: #10141f;\r\n    padding: 20px;\r\n    border-radius: 10px;\r\n    width: 80%;\r\n    max-width: 500px;\r\n    text-align: center;\r\n    position: relative;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center; /* Center children horizontally */\r\n}\r\n\r\n.mobile-wallet-adapter-embedded-modal-subtitle {\r\n    color: #D8D8D8;\r\n}\r\n\r\n.mobile-wallet-adapter-embedded-modal-close {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    position: absolute;\r\n    top: 18px;\r\n    right: 18px;\r\n    padding: 12px;\r\n    cursor: pointer;\r\n    background: #1a1f2e;\r\n    border: none;\r\n    border-radius: 50%;\r\n}\r\n\r\n.mobile-wallet-adapter-embedded-modal-close:focus-visible {\r\n    outline-color: white;\r\n}\r\n\r\n.mobile-wallet-adapter-embedded-modal-close svg {\r\n    fill: #777;\r\n    transition: fill 200ms ease 0s;\r\n}\r\n\r\n.mobile-wallet-adapter-embedded-modal-close:hover svg {\r\n    fill: #fff;\r\n}\r\n\r\n.icon-container {\r\n    display: flex;\r\n    justify-content: center;\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.icon {\r\n    width: 80px;\r\n    height: 80px;\r\n    border-radius: 50%;\r\n    background-color: #ddd; /* Placeholder for icon background */\r\n}\r\n\r\n/* Modal Title */\r\n.mobile-wallet-adapter-embedded-modal-content h1 {\r\n    color: white;\r\n    font-size: 24px;   \r\n}\r\n\r\n.button-group {\r\n    display: flex;\r\n    width: 100%;\r\n    gap: 10px;\r\n}\r\n\r\n.connect-btn, .cancel-btn {\r\n    flex: 1;\r\n    padding: 12px 20px;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    border-radius: 10px;\r\n    transition: all 0.3s ease;\r\n}\r\n\r\n.connect-btn {\r\n    background-color: #007bff;\r\n    color: white;\r\n    border: none;\r\n}\r\n\r\n.connect-btn:hover {\r\n    background-color: #0056b3;\r\n}\r\n\r\n.cancel-btn {\r\n    background-color: transparent;\r\n    color: #a0a0a0;\r\n    border: 1px solid #a0a0a0;\r\n}\r\n\r\n.cancel-btn:hover {\r\n    background-color: rgba(160, 160, 160, 0.1);\r\n}\r\n\r\n/* BT Connection Status */\r\n\r\n.mobile-wallet-adapter-embedded-modal-connection-status-container {\r\n    margin: 20px 0px 20px 0px;\r\n}\r\n\r\n.connection-status {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    margin: 20px 0;\r\n}\r\n  \r\n.connection-status p {\r\n    margin-top: 10px;\r\n    color: #a0a0a0;\r\n}\r\n  \r\n.bluetooth-icon, .checkmark-icon {\r\n    width: 48px;\r\n    height: 48px;\r\n}\r\n  \r\n.spinner {\r\n    border: 4px solid #f3f3f3;\r\n    border-top: 4px solid #3498db;\r\n    border-radius: 50%;\r\n    width: 40px;\r\n    height: 40px;\r\n    animation: spin 1s linear infinite;\r\n}\r\n  \r\n@keyframes spin {\r\n    0% { transform: rotate(0deg); }\r\n    100% { transform: rotate(360deg); }\r\n}\r\n\r\n/* QR Code */\r\n\r\n#mobile-wallet-adapter-embedded-modal-qr-code-container {\r\n    width: 500px;\r\n    height: 500px;\r\n    align-content: center;\r\n}\r\n`;\n\nclass EmbeddedModal {\n    constructor(title) {\n        this._root = null;\n        this._title = title;\n        // Bind methods to ensure `this` context is correct\n        this.init = this.init.bind(this);\n        this.injectQRCodeHTML = this.injectQRCodeHTML.bind(this);\n        this.injectBluetoothHTML = this.injectBluetoothHTML.bind(this);\n        this.open = this.open.bind(this);\n        this.close = this.close.bind(this);\n        this.connect = this.connect.bind(this);\n        this._root = document.getElementById('mobile-wallet-adapter-embedded-root-ui');\n    }\n    init(qrCode) {\n        return __awaiter(this, void 0, void 0, function* () {\n            console.log('Injecting modal');\n            this.injectStyles();\n            this.injectQRCodeHTML(qrCode);\n        });\n    }\n    setConnectionStatus(status) {\n        if (!this._root)\n            return;\n        const statuses = ['not-connected', 'connecting', 'connected'];\n        statuses.forEach((s) => {\n            const el = this._root.querySelector(`#status-${s}`);\n            if (el instanceof HTMLElement) {\n                el.style.display = s === status ? 'flex' : 'none';\n            }\n        });\n    }\n    injectStyles() {\n        // Check if the styles have already been injected\n        if (document.getElementById('mobile-wallet-adapter-styles')) {\n            return;\n        }\n        const styleElement = document.createElement('style');\n        styleElement.id = 'mobile-wallet-adapter-styles';\n        styleElement.textContent = css;\n        document.head.appendChild(styleElement);\n    }\n    populateQRCode(qrUrl) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const qrcodeContainer = document.getElementById('mobile-wallet-adapter-embedded-modal-qr-code-container');\n            if (qrcodeContainer) {\n                const qrCodeElement = yield QRCode.toCanvas(qrUrl, { width: 400 });\n                if (qrcodeContainer.firstElementChild !== null) {\n                    qrcodeContainer.replaceChild(qrCodeElement, qrcodeContainer.firstElementChild);\n                }\n                else\n                    qrcodeContainer.appendChild(qrCodeElement);\n            }\n            else {\n                console.error('QRCode Container not found');\n            }\n        });\n    }\n    injectQRCodeHTML(qrCode) {\n        // Check if the HTML has already been injected\n        if (document.getElementById('mobile-wallet-adapter-embedded-root-ui')) {\n            if (!this._root)\n                this._root = document.getElementById('mobile-wallet-adapter-embedded-root-ui');\n            this.populateQRCode(qrCode);\n            return;\n        }\n        // Create a container for the modal\n        this._root = document.createElement('div');\n        this._root.id = 'mobile-wallet-adapter-embedded-root-ui';\n        this._root.className = 'mobile-wallet-adapter-embedded-modal';\n        this._root.innerHTML = QRCodeHtml;\n        this._root.style.display = 'none';\n        // Append the modal to the body\n        document.body.appendChild(this._root);\n        // Render the QRCode\n        this.populateQRCode(qrCode);\n        this.attachEventListeners();\n    }\n    injectBluetoothHTML() {\n        // Check if the HTML has already been injected\n        if (document.getElementById('mobile-wallet-adapter-embedded-root-ui')) {\n            return;\n        }\n        this._root = document.createElement('div');\n        this._root.id = 'mobile-wallet-adapter-embedded-root-ui';\n        this._root.className = 'mobile-wallet-adapter-embedded-modal';\n        this._root.innerHTML = BluetoothHtml;\n        document.body.appendChild(this._root);\n        this.attachEventListeners();\n    }\n    attachEventListeners() {\n        if (!this._root)\n            return;\n        const closeBtn = this._root.querySelector('#mobile-wallet-adapter-embedded-modal-close');\n        const cancelBtn = this._root.querySelector('#cancel-btn');\n        const connectBtn = this._root.querySelector('#connect-btn');\n        closeBtn === null || closeBtn === void 0 ? void 0 : closeBtn.addEventListener('click', () => this.close());\n        cancelBtn === null || cancelBtn === void 0 ? void 0 : cancelBtn.addEventListener('click', () => this.close());\n        connectBtn === null || connectBtn === void 0 ? void 0 : connectBtn.addEventListener('click', () => this.connect());\n    }\n    open() {\n        console.debug('Modal open');\n        if (this._root) {\n            this._root.style.display = 'flex';\n            this.setConnectionStatus('not-connected'); // Reset status when opening\n        }\n    }\n    close() {\n        console.debug('Modal close');\n        if (this._root) {\n            this._root.style.display = 'none';\n            this.setConnectionStatus('not-connected'); // Reset status when closing\n        }\n    }\n    connect() {\n        console.log('Connecting...');\n        // Mock connection\n        this.setConnectionStatus('connecting');\n        // Simulate connection process\n        setTimeout(() => {\n            this.setConnectionStatus('connected');\n            console.log('Connected!');\n        }, 5000); // 5 seconds delay\n    }\n}\n\nconst SolanaMobileWalletAdapterRemoteWalletName = 'MWA (Remote)';\nconst SIGNATURE_LENGTH_IN_BYTES = 64;\nfunction getPublicKeyFromAddress(address) {\n    const publicKeyByteArray = toUint8Array$1(address);\n    return new PublicKey(publicKeyByteArray);\n}\n/**\n * Determine the mobile operating system.\n * Returns true if running on a mobile operating system, or false otherwise.\n *\n * @returns {boolean}\n */\nfunction isMobileOperatingSystem() {\n    var userAgent = navigator.userAgent;\n    // Windows Phone must come first because its UA also contains \"Android\"\n    if (/windows phone/i.test(userAgent)) {\n        return true;\n    }\n    if (/android/i.test(userAgent)) {\n        return true;\n    }\n    // iOS detection from: http://stackoverflow.com/a/9039885/177710\n    if (/iPad|iPhone|iPod/.test(userAgent) && !window.MSStream) {\n        return true;\n    }\n    return false;\n}\nfunction getIsSupported() {\n    return (typeof window !== 'undefined' &&\n        window.isSecureContext &&\n        typeof document !== 'undefined' &&\n        !isMobileOperatingSystem());\n}\n/**\n * This burner wallet adapter is unsafe to use and is only included to provide an easy way for applications to test\n * Wallet Adapter without using a third-party wallet.\n */\nclass SolanaMobileWalletAdapterRemote extends BaseSignInMessageSignerWalletAdapter {\n    constructor(config) {\n        super();\n        this.supportedTransactionVersions = new Set(\n        // FIXME(#244): We can't actually know what versions are supported until we know which wallet we're talking to.\n        ['legacy', 0]);\n        this.name = SolanaMobileWalletAdapterRemoteWalletName;\n        this.url = 'https://solanamobile.com/wallets';\n        this.icon = 'data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI4IiB3aWR0aD0iMjgiIHZpZXdCb3g9Ii0zIDAgMjggMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0RDQjhGRiI+PHBhdGggZD0iTTE3LjQgMTcuNEgxNXYyLjRoMi40di0yLjRabTEuMi05LjZoLTIuNHYyLjRoMi40VjcuOFoiLz48cGF0aCBkPSJNMjEuNiAzVjBoLTIuNHYzaC0zLjZWMGgtMi40djNoLTIuNHY2LjZINC41YTIuMSAyLjEgMCAxIDEgMC00LjJoMi43VjNINC41QTQuNSA0LjUgMCAwIDAgMCA3LjVWMjRoMjEuNnYtNi42aC0yLjR2NC4ySDIuNFYxMS41Yy41LjMgMS4yLjQgMS44LjVoNy41QTYuNiA2LjYgMCAwIDAgMjQgOVYzaC0yLjRabTAgNS43YTQuMiA0LjIgMCAxIDEtOC40IDBWNS40aDguNHYzLjNaIi8+PC9nPjwvc3ZnPg==';\n        this._connecting = false;\n        /**\n         * Every time the connection is recycled in some way (eg. `disconnect()` is called)\n         * increment this and use it to make sure that `transact` calls from the previous\n         * 'generation' don't continue to do work and throw exceptions.\n         */\n        this._connectionGeneration = 0;\n        this._readyState = getIsSupported() ? WalletReadyState.Loadable : WalletReadyState.Unsupported;\n        this._authorizationResultCache = config.authorizationResultCache;\n        this._addressSelector = config.addressSelector;\n        this._appIdentity = config.appIdentity;\n        this._chain = config.chain;\n        this._hostAuthority = config.remoteHostAuthority;\n        this._onWalletNotFound = config.onWalletNotFound;\n        if (this._readyState !== WalletReadyState.Unsupported) {\n            this._authorizationResultCache.get().then((authorizationResult) => {\n                if (authorizationResult) {\n                    // Having a prior authorization result is, right now, the best\n                    // indication that a mobile wallet is installed. There is no API\n                    // we can use to test for whether the association URI is supported.\n                    this.declareWalletAsInstalled();\n                }\n            });\n        }\n    }\n    get publicKey() {\n        if (this._publicKey == null && this._selectedAddress != null) {\n            try {\n                this._publicKey = getPublicKeyFromAddress(this._selectedAddress);\n            }\n            catch (e) {\n                throw new WalletPublicKeyError((e instanceof Error && (e === null || e === void 0 ? void 0 : e.message)) || 'Unknown error', e);\n            }\n        }\n        return this._publicKey ? this._publicKey : null;\n    }\n    get connected() {\n        return !!this._authorizationResult;\n    }\n    get connecting() {\n        return this._connecting;\n    }\n    get readyState() {\n        return this._readyState;\n    }\n    declareWalletAsInstalled() {\n        if (this._readyState !== WalletReadyState.Installed) {\n            this.emit('readyStateChange', (this._readyState = WalletReadyState.Installed));\n        }\n    }\n    runWithGuard(callback) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                return yield callback();\n            }\n            catch (e) {\n                this.emit('error', e);\n                throw e;\n            }\n        });\n    }\n    autoConnect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.connecting || this.connected) {\n                return;\n            }\n            return yield this.runWithGuard(() => __awaiter(this, void 0, void 0, function* () {\n                if (this._readyState !== WalletReadyState.Installed && this._readyState !== WalletReadyState.Loadable) {\n                    throw new WalletNotReadyError();\n                }\n                this._connecting = true;\n                try {\n                    const cachedAuthorizationResult = yield this._authorizationResultCache.get();\n                    if (cachedAuthorizationResult) {\n                        // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                        this.handleAuthorizationResult(cachedAuthorizationResult);\n                    }\n                }\n                catch (e) {\n                    throw new WalletConnectionError((e instanceof Error && e.message) || 'Unknown error', e);\n                }\n                finally {\n                    this._connecting = false;\n                }\n            }));\n        });\n    }\n    connect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.connecting || this.connected) {\n                return;\n            }\n            return yield this.runWithGuard(() => __awaiter(this, void 0, void 0, function* () {\n                if (this._readyState !== WalletReadyState.Installed && this._readyState !== WalletReadyState.Loadable) {\n                    throw new WalletNotReadyError();\n                }\n                this._connecting = true;\n                try {\n                    yield this.performAuthorization();\n                }\n                catch (e) {\n                    throw new WalletConnectionError((e instanceof Error && e.message) || 'Unknown error', e);\n                }\n                finally {\n                    this._connecting = false;\n                }\n            }));\n        });\n    }\n    performAuthorization(signInPayload) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const cachedAuthorizationResult = yield this._authorizationResultCache.get();\n                if (cachedAuthorizationResult) {\n                    // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                    this.handleAuthorizationResult(cachedAuthorizationResult);\n                    return cachedAuthorizationResult;\n                }\n                if (this._wallet)\n                    delete this._wallet;\n                return yield this.transact((wallet) => __awaiter(this, void 0, void 0, function* () {\n                    this._wallet = wallet;\n                    const authorizationResult = yield wallet.authorize({\n                        chain: this._chain,\n                        identity: this._appIdentity,\n                        sign_in_payload: signInPayload,\n                    });\n                    // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                    Promise.all([\n                        this._authorizationResultCache.set(authorizationResult),\n                        this.handleAuthorizationResult(authorizationResult),\n                    ]);\n                    return authorizationResult;\n                }));\n            }\n            catch (e) {\n                throw new WalletConnectionError((e instanceof Error && e.message) || 'Unknown error', e);\n            }\n        });\n    }\n    handleAuthorizationResult(authorizationResult) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const didPublicKeysChange = \n            // Case 1: We started from having no authorization.\n            this._authorizationResult == null ||\n                // Case 2: The number of authorized accounts changed.\n                ((_a = this._authorizationResult) === null || _a === void 0 ? void 0 : _a.accounts.length) !== authorizationResult.accounts.length ||\n                // Case 3: The new list of addresses isn't exactly the same as the old list, in the same order.\n                this._authorizationResult.accounts.some((account, ii) => account.address !== authorizationResult.accounts[ii].address);\n            this._authorizationResult = authorizationResult;\n            this.declareWalletAsInstalled();\n            if (didPublicKeysChange) {\n                const nextSelectedAddress = yield this._addressSelector.select(authorizationResult.accounts.map(({ address }) => address));\n                if (nextSelectedAddress !== this._selectedAddress) {\n                    this._selectedAddress = nextSelectedAddress;\n                    delete this._publicKey;\n                    this.emit('connect', \n                    // Having just set `this._selectedAddress`, `this.publicKey` is definitely non-null\n                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                    this.publicKey);\n                }\n            }\n        });\n    }\n    performReauthorization(wallet, authToken) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const authorizationResult = yield wallet.authorize({\n                    auth_token: authToken,\n                    identity: this._appIdentity,\n                });\n                // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                Promise.all([\n                    this._authorizationResultCache.set(authorizationResult),\n                    this.handleAuthorizationResult(authorizationResult),\n                ]);\n            }\n            catch (e) {\n                this.disconnect();\n                throw new WalletDisconnectedError((e instanceof Error && (e === null || e === void 0 ? void 0 : e.message)) || 'Unknown error', e);\n            }\n        });\n    }\n    disconnect() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            // TODO: figure out why this call throws \"TypeError: _a.terminateSession is not a function\"\n            //  even though the session termination is actually executed (websocket closes). \n            try {\n                (_a = this._wallet) === null || _a === void 0 ? void 0 : _a.terminateSession();\n            }\n            catch (e) { }\n            this._authorizationResultCache.clear(); // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n            this._connecting = false;\n            this._connectionGeneration++;\n            delete this._authorizationResult;\n            delete this._publicKey;\n            delete this._selectedAddress;\n            delete this._wallet;\n            this.emit('disconnect');\n        });\n    }\n    transact(callback) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const walletUriBase = (_a = this._authorizationResult) === null || _a === void 0 ? void 0 : _a.wallet_uri_base;\n            const baseConfig = walletUriBase ? { baseUri: walletUriBase } : undefined;\n            const remoteConfig = Object.assign(Object.assign({}, baseConfig), { remoteHostAuthority: this._hostAuthority });\n            const currentConnectionGeneration = this._connectionGeneration;\n            const modal = new EmbeddedModal('MWA QR');\n            if (this._wallet) {\n                return callback(this._wallet);\n            }\n            try {\n                const { associationUrl, result: promise } = yield transactRemote((wallet) => __awaiter(this, void 0, void 0, function* () {\n                    const result = yield callback(wallet);\n                    modal.close();\n                    return result;\n                }), remoteConfig);\n                modal.init(associationUrl.toString());\n                modal.open();\n                return yield promise;\n            }\n            catch (e) {\n                modal.close();\n                if (this._connectionGeneration !== currentConnectionGeneration) {\n                    yield new Promise(() => { }); // Never resolve.\n                }\n                if (e instanceof Error &&\n                    e.name === 'SolanaMobileWalletAdapterError' &&\n                    e.code === 'ERROR_WALLET_NOT_FOUND') {\n                    yield this._onWalletNotFound(this);\n                }\n                throw e;\n            }\n        });\n    }\n    assertIsAuthorized() {\n        if (!this._authorizationResult || !this._selectedAddress)\n            throw new WalletNotConnectedError();\n        return {\n            authToken: this._authorizationResult.auth_token,\n            selectedAddress: this._selectedAddress,\n        };\n    }\n    performSignTransactions(transactions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { authToken } = this.assertIsAuthorized();\n            try {\n                return yield this.transact((wallet) => __awaiter(this, void 0, void 0, function* () {\n                    yield this.performReauthorization(wallet, authToken);\n                    const signedTransactions = yield wallet.signTransactions({\n                        transactions,\n                    });\n                    return signedTransactions;\n                }));\n            }\n            catch (error) {\n                throw new WalletSignTransactionError(error === null || error === void 0 ? void 0 : error.message, error);\n            }\n        });\n    }\n    sendTransaction(transaction, connection, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.runWithGuard(() => __awaiter(this, void 0, void 0, function* () {\n                const { authToken } = this.assertIsAuthorized();\n                const minContextSlot = options === null || options === void 0 ? void 0 : options.minContextSlot;\n                try {\n                    return yield this.transact((wallet) => __awaiter(this, void 0, void 0, function* () {\n                        function getTargetCommitment() {\n                            let targetCommitment;\n                            switch (connection.commitment) {\n                                case 'confirmed':\n                                case 'finalized':\n                                case 'processed':\n                                    targetCommitment = connection.commitment;\n                                    break;\n                                default:\n                                    targetCommitment = 'finalized';\n                            }\n                            let targetPreflightCommitment;\n                            switch (options === null || options === void 0 ? void 0 : options.preflightCommitment) {\n                                case 'confirmed':\n                                case 'finalized':\n                                case 'processed':\n                                    targetPreflightCommitment = options.preflightCommitment;\n                                    break;\n                                case undefined:\n                                    targetPreflightCommitment = targetCommitment;\n                                    break;\n                                default:\n                                    targetPreflightCommitment = 'finalized';\n                            }\n                            const preflightCommitmentScore = targetPreflightCommitment === 'finalized'\n                                ? 2\n                                : targetPreflightCommitment === 'confirmed'\n                                    ? 1\n                                    : 0;\n                            const targetCommitmentScore = targetCommitment === 'finalized' ? 2 : targetCommitment === 'confirmed' ? 1 : 0;\n                            return preflightCommitmentScore < targetCommitmentScore\n                                ? targetPreflightCommitment\n                                : targetCommitment;\n                        }\n                        const [capabilities, _1, _2] = yield Promise.all([\n                            wallet.getCapabilities(),\n                            this.performReauthorization(wallet, authToken),\n                            isVersionedTransaction$1(transaction)\n                                ? null\n                                : /**\n                                   * Unlike versioned transactions, legacy `Transaction` objects\n                                   * may not have an associated `feePayer` or `recentBlockhash`.\n                                   * This code exists to patch them up in case they are missing.\n                                   */\n                                    (() => __awaiter(this, void 0, void 0, function* () {\n                                        var _a;\n                                        transaction.feePayer || (transaction.feePayer = (_a = this.publicKey) !== null && _a !== void 0 ? _a : undefined);\n                                        if (transaction.recentBlockhash == null) {\n                                            const { blockhash } = yield connection.getLatestBlockhash({\n                                                commitment: getTargetCommitment(),\n                                            });\n                                            transaction.recentBlockhash = blockhash;\n                                        }\n                                    }))(),\n                        ]);\n                        if (capabilities.supports_sign_and_send_transactions) {\n                            const signatures = yield wallet.signAndSendTransactions({\n                                minContextSlot,\n                                transactions: [transaction],\n                            });\n                            return signatures[0];\n                        }\n                        else {\n                            const [signedTransaction] = yield wallet.signTransactions({\n                                transactions: [transaction],\n                            });\n                            if (isVersionedTransaction$1(signedTransaction)) {\n                                return yield connection.sendTransaction(signedTransaction);\n                            }\n                            else {\n                                const serializedTransaction = signedTransaction.serialize();\n                                return yield connection.sendRawTransaction(serializedTransaction, Object.assign(Object.assign({}, options), { preflightCommitment: getTargetCommitment() }));\n                            }\n                        }\n                    }));\n                }\n                catch (error) {\n                    throw new WalletSendTransactionError(error === null || error === void 0 ? void 0 : error.message, error);\n                }\n            }));\n        });\n    }\n    signTransaction(transaction) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.runWithGuard(() => __awaiter(this, void 0, void 0, function* () {\n                const [signedTransaction] = yield this.performSignTransactions([transaction]);\n                return signedTransaction;\n            }));\n        });\n    }\n    signAllTransactions(transactions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.runWithGuard(() => __awaiter(this, void 0, void 0, function* () {\n                const signedTransactions = yield this.performSignTransactions(transactions);\n                return signedTransactions;\n            }));\n        });\n    }\n    signMessage(message) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.runWithGuard(() => __awaiter(this, void 0, void 0, function* () {\n                const { authToken, selectedAddress } = this.assertIsAuthorized();\n                try {\n                    return yield this.transact((wallet) => __awaiter(this, void 0, void 0, function* () {\n                        yield this.performReauthorization(wallet, authToken);\n                        const [signedMessage] = yield wallet.signMessages({\n                            addresses: [selectedAddress],\n                            payloads: [message],\n                        });\n                        const signature = signedMessage.slice(-SIGNATURE_LENGTH_IN_BYTES);\n                        return signature;\n                    }));\n                }\n                catch (error) {\n                    throw new WalletSignMessageError(error === null || error === void 0 ? void 0 : error.message, error);\n                }\n            }));\n        });\n    }\n    signIn(input) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.runWithGuard(() => __awaiter(this, void 0, void 0, function* () {\n                var _a, _b;\n                if (this._readyState !== WalletReadyState.Installed && this._readyState !== WalletReadyState.Loadable) {\n                    throw new WalletNotReadyError();\n                }\n                this._connecting = true;\n                try {\n                    const authorizationResult = yield this.performAuthorization(Object.assign(Object.assign({}, input), { domain: (_a = input === null || input === void 0 ? void 0 : input.domain) !== null && _a !== void 0 ? _a : window.location.host }));\n                    if (!authorizationResult.sign_in_result) {\n                        throw new Error(\"Sign in failed, no sign in result returned by wallet\");\n                    }\n                    const signedInAddress = authorizationResult.sign_in_result.address;\n                    const signedInAccount = Object.assign(Object.assign({}, (_b = authorizationResult.accounts.find(acc => acc.address == signedInAddress)) !== null && _b !== void 0 ? _b : {\n                        address: signedInAddress\n                    }), { publicKey: toUint8Array$1(signedInAddress) });\n                    return {\n                        account: signedInAccount,\n                        signedMessage: toUint8Array$1(authorizationResult.sign_in_result.signed_message),\n                        signature: toUint8Array$1(authorizationResult.sign_in_result.signature)\n                    };\n                }\n                catch (e) {\n                    throw new WalletConnectionError((e instanceof Error && e.message) || 'Unknown error', e);\n                }\n                finally {\n                    this._connecting = false;\n                }\n            }));\n        });\n    }\n}\n\nfunction createDefaultAddressSelector() {\n    return {\n        select(addresses) {\n            return __awaiter(this, void 0, void 0, function* () {\n                return addresses[0];\n            });\n        },\n    };\n}\n\nconst CACHE_KEY = 'SolanaMobileWalletAdapterDefaultAuthorizationCache';\nfunction createDefaultAuthorizationResultCache() {\n    let storage;\n    try {\n        storage = window.localStorage;\n        // eslint-disable-next-line no-empty\n    }\n    catch (_a) { }\n    return {\n        clear() {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!storage) {\n                    return;\n                }\n                try {\n                    storage.removeItem(CACHE_KEY);\n                    // eslint-disable-next-line no-empty\n                }\n                catch (_a) { }\n            });\n        },\n        get() {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!storage) {\n                    return;\n                }\n                try {\n                    return JSON.parse(storage.getItem(CACHE_KEY)) || undefined;\n                    // eslint-disable-next-line no-empty\n                }\n                catch (_a) { }\n            });\n        },\n        set(authorizationResult) {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!storage) {\n                    return;\n                }\n                try {\n                    storage.setItem(CACHE_KEY, JSON.stringify(authorizationResult));\n                    // eslint-disable-next-line no-empty\n                }\n                catch (_a) { }\n            });\n        },\n    };\n}\n\nfunction defaultWalletNotFoundHandler(mobileWalletAdapter) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (typeof window !== 'undefined') {\n            window.location.assign(mobileWalletAdapter.url);\n        }\n    });\n}\nfunction createDefaultWalletNotFoundHandler() {\n    return defaultWalletNotFoundHandler;\n}\n\nexport { SolanaMobileWalletAdapter, SolanaMobileWalletAdapterRemote, SolanaMobileWalletAdapterRemoteWalletName, SolanaMobileWalletAdapterWalletName, createDefaultAddressSelector, createDefaultAuthorizationResultCache, createDefaultWalletNotFoundHandler };\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.decimal = exports.WAD = void 0;\nconst bignumber_js_1 = __importDefault(require(\"bignumber.js\"));\nconst base_1 = require(\"./base\");\nconst bigint_1 = require(\"./bigint\");\nexports.WAD = new bignumber_js_1.default('1e+18');\nconst decimal = (property) => {\n    const layout = (0, bigint_1.u128)(property);\n    const { encode, decode } = (0, base_1.encodeDecode)(layout);\n    const decimalLayout = layout;\n    decimalLayout.decode = (buffer, offset) => {\n        const src = decode(buffer, offset).toString();\n        return new bignumber_js_1.default(src).div(exports.WAD);\n    };\n    decimalLayout.encode = (decimal, buffer, offset) => {\n        const src = BigInt(decimal.times(exports.WAD).integerValue().toString());\n        return encode(src, buffer, offset);\n    };\n    return decimalLayout;\n};\nexports.decimal = decimal;\n//# sourceMappingURL=decimal.js.map","export const encodeDecode = (layout) => {\n    const decode = layout.decode.bind(layout);\n    const encode = layout.encode.bind(layout);\n    return { decode, encode };\n};\n//# sourceMappingURL=base.js.map","import { blob } from '@solana/buffer-layout';\nimport { toBigIntBE, toBigIntLE, toBufferBE, toBufferLE } from 'bigint-buffer';\nimport { encodeDecode } from './base.mjs';\nexport const bigInt = (length) => (property) => {\n    const layout = blob(length, property);\n    const { encode, decode } = encodeDecode(layout);\n    const bigIntLayout = layout;\n    bigIntLayout.decode = (buffer, offset) => {\n        const src = decode(buffer, offset);\n        return toBigIntLE(Buffer.from(src));\n    };\n    bigIntLayout.encode = (bigInt, buffer, offset) => {\n        const src = toBufferLE(bigInt, length);\n        return encode(src, buffer, offset);\n    };\n    return bigIntLayout;\n};\nexport const bigIntBE = (length) => (property) => {\n    const layout = blob(length, property);\n    const { encode, decode } = encodeDecode(layout);\n    const bigIntLayout = layout;\n    bigIntLayout.decode = (buffer, offset) => {\n        const src = decode(buffer, offset);\n        return toBigIntBE(Buffer.from(src));\n    };\n    bigIntLayout.encode = (bigInt, buffer, offset) => {\n        const src = toBufferBE(bigInt, length);\n        return encode(src, buffer, offset);\n    };\n    return bigIntLayout;\n};\nexport const u64 = bigInt(8);\nexport const u64be = bigIntBE(8);\nexport const u128 = bigInt(16);\nexport const u128be = bigIntBE(16);\nexport const u192 = bigInt(24);\nexport const u192be = bigIntBE(24);\nexport const u256 = bigInt(32);\nexport const u256be = bigIntBE(32);\n//# sourceMappingURL=bigint.js.map","import BigNumber from 'bignumber.js';\nimport { encodeDecode } from './base.mjs';\nimport { u128 } from './bigint.mjs';\nexport const WAD = new BigNumber('1e+18');\nexport const decimal = (property) => {\n    const layout = u128(property);\n    const { encode, decode } = encodeDecode(layout);\n    const decimalLayout = layout;\n    decimalLayout.decode = (buffer, offset) => {\n        const src = decode(buffer, offset).toString();\n        return new BigNumber(src).div(WAD);\n    };\n    decimalLayout.encode = (decimal, buffer, offset) => {\n        const src = BigInt(decimal.times(WAD).integerValue().toString());\n        return encode(src, buffer, offset);\n    };\n    return decimalLayout;\n};\n//# sourceMappingURL=decimal.js.map","import { u8 } from '@solana/buffer-layout';\nimport { encodeDecode } from './base.mjs';\nexport const bool = (property) => {\n    const layout = u8(property);\n    const { encode, decode } = encodeDecode(layout);\n    const boolLayout = layout;\n    boolLayout.decode = (buffer, offset) => {\n        const src = decode(buffer, offset);\n        return !!src;\n    };\n    boolLayout.encode = (bool, buffer, offset) => {\n        const src = Number(bool);\n        return encode(src, buffer, offset);\n    };\n    return boolLayout;\n};\n//# sourceMappingURL=native.js.map","import { blob } from '@solana/buffer-layout';\nimport { PublicKey } from '@solana/web3.js';\nimport { encodeDecode } from './base.mjs';\nexport const publicKey = (property) => {\n    const layout = blob(32, property);\n    const { encode, decode } = encodeDecode(layout);\n    const publicKeyLayout = layout;\n    publicKeyLayout.decode = (buffer, offset) => {\n        const src = decode(buffer, offset);\n        return new PublicKey(src);\n    };\n    publicKeyLayout.encode = (publicKey, buffer, offset) => {\n        const src = publicKey.toBuffer();\n        return encode(src, buffer, offset);\n    };\n    return publicKeyLayout;\n};\n//# sourceMappingURL=web3.js.map","/*!\n* screenfull\n* v5.2.0 - 2021-11-03\n* (c) Sindre Sorhus; MIT License\n*/\n(function () {\n\t'use strict';\n\n\tvar document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};\n\tvar isCommonjs = typeof module !== 'undefined' && module.exports;\n\n\tvar fn = (function () {\n\t\tvar val;\n\n\t\tvar fnMap = [\n\t\t\t[\n\t\t\t\t'requestFullscreen',\n\t\t\t\t'exitFullscreen',\n\t\t\t\t'fullscreenElement',\n\t\t\t\t'fullscreenEnabled',\n\t\t\t\t'fullscreenchange',\n\t\t\t\t'fullscreenerror'\n\t\t\t],\n\t\t\t// New WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullscreen',\n\t\t\t\t'webkitExitFullscreen',\n\t\t\t\t'webkitFullscreenElement',\n\t\t\t\t'webkitFullscreenEnabled',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t// Old WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullScreen',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitCurrentFullScreenElement',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t[\n\t\t\t\t'mozRequestFullScreen',\n\t\t\t\t'mozCancelFullScreen',\n\t\t\t\t'mozFullScreenElement',\n\t\t\t\t'mozFullScreenEnabled',\n\t\t\t\t'mozfullscreenchange',\n\t\t\t\t'mozfullscreenerror'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'msRequestFullscreen',\n\t\t\t\t'msExitFullscreen',\n\t\t\t\t'msFullscreenElement',\n\t\t\t\t'msFullscreenEnabled',\n\t\t\t\t'MSFullscreenChange',\n\t\t\t\t'MSFullscreenError'\n\t\t\t]\n\t\t];\n\n\t\tvar i = 0;\n\t\tvar l = fnMap.length;\n\t\tvar ret = {};\n\n\t\tfor (; i < l; i++) {\n\t\t\tval = fnMap[i];\n\t\t\tif (val && val[1] in document) {\n\t\t\t\tfor (i = 0; i < val.length; i++) {\n\t\t\t\t\tret[fnMap[0][i]] = val[i];\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t})();\n\n\tvar eventNameMap = {\n\t\tchange: fn.fullscreenchange,\n\t\terror: fn.fullscreenerror\n\t};\n\n\tvar screenfull = {\n\t\trequest: function (element, options) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar onFullScreenEntered = function () {\n\t\t\t\t\tthis.off('change', onFullScreenEntered);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenEntered);\n\n\t\t\t\telement = element || document.documentElement;\n\n\t\t\t\tvar returnPromise = element[fn.requestFullscreen](options);\n\n\t\t\t\tif (returnPromise instanceof Promise) {\n\t\t\t\t\treturnPromise.then(onFullScreenEntered).catch(reject);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\texit: function () {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tif (!this.isFullscreen) {\n\t\t\t\t\tresolve();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar onFullScreenExit = function () {\n\t\t\t\t\tthis.off('change', onFullScreenExit);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenExit);\n\n\t\t\t\tvar returnPromise = document[fn.exitFullscreen]();\n\n\t\t\t\tif (returnPromise instanceof Promise) {\n\t\t\t\t\treturnPromise.then(onFullScreenExit).catch(reject);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\ttoggle: function (element, options) {\n\t\t\treturn this.isFullscreen ? this.exit() : this.request(element, options);\n\t\t},\n\t\tonchange: function (callback) {\n\t\t\tthis.on('change', callback);\n\t\t},\n\t\tonerror: function (callback) {\n\t\t\tthis.on('error', callback);\n\t\t},\n\t\ton: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.addEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\toff: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.removeEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\traw: fn\n\t};\n\n\tif (!fn) {\n\t\tif (isCommonjs) {\n\t\t\tmodule.exports = {isEnabled: false};\n\t\t} else {\n\t\t\twindow.screenfull = {isEnabled: false};\n\t\t}\n\n\t\treturn;\n\t}\n\n\tObject.defineProperties(screenfull, {\n\t\tisFullscreen: {\n\t\t\tget: function () {\n\t\t\t\treturn Boolean(document[fn.fullscreenElement]);\n\t\t\t}\n\t\t},\n\t\telement: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn document[fn.fullscreenElement];\n\t\t\t}\n\t\t},\n\t\tisEnabled: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\t// Coerce to boolean in case of old WebKit\n\t\t\t\treturn Boolean(document[fn.fullscreenEnabled]);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (isCommonjs) {\n\t\tmodule.exports = screenfull;\n\t} else {\n\t\twindow.screenfull = screenfull;\n\t}\n})();\n","var counter = 0;\r\nvar buckets = {};\r\nvar setHarmonicInterval = function (fn, ms) {\r\n    var _a;\r\n    var id = counter++;\r\n    if (buckets[ms]) {\r\n        buckets[ms].listeners[id] = fn;\r\n    }\r\n    else {\r\n        var timer = setInterval(function () {\r\n            var listeners = buckets[ms].listeners;\r\n            var didThrow = false;\r\n            var lastError;\r\n            for (var _i = 0, _a = Object.values(listeners); _i < _a.length; _i++) {\r\n                var listener = _a[_i];\r\n                try {\r\n                    listener();\r\n                }\r\n                catch (error) {\r\n                    didThrow = true;\r\n                    lastError = error;\r\n                }\r\n            }\r\n            if (didThrow)\r\n                throw lastError;\r\n        }, ms);\r\n        buckets[ms] = {\r\n            ms: ms,\r\n            timer: timer,\r\n            listeners: (_a = {},\r\n                _a[id] = fn,\r\n                _a),\r\n        };\r\n    }\r\n    return {\r\n        bucket: buckets[ms],\r\n        id: id,\r\n    };\r\n};\r\nvar clearHarmonicInterval = function (_a) {\r\n    var bucket = _a.bucket, id = _a.id;\r\n    delete bucket.listeners[id];\r\n    var hasListeners = false;\r\n    for (var listener in bucket.listeners) {\r\n        hasListeners = true;\r\n        break;\r\n    }\r\n    if (!hasListeners) {\r\n        clearInterval(bucket.timer);\r\n        delete buckets[bucket.ms];\r\n    }\r\n};\n\nexport { clearHarmonicInterval, setHarmonicInterval };\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.bool = void 0;\nconst buffer_layout_1 = require(\"@solana/buffer-layout\");\nconst base_1 = require(\"./base\");\nconst bool = (property) => {\n    const layout = (0, buffer_layout_1.u8)(property);\n    const { encode, decode } = (0, base_1.encodeDecode)(layout);\n    const boolLayout = layout;\n    boolLayout.decode = (buffer, offset) => {\n        const src = decode(buffer, offset);\n        return !!src;\n    };\n    boolLayout.encode = (bool, buffer, offset) => {\n        const src = Number(bool);\n        return encode(src, buffer, offset);\n    };\n    return boolLayout;\n};\nexports.bool = bool;\n//# sourceMappingURL=native.js.map","const basex = require('base-x')\nconst ALPHABET = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz'\n\nmodule.exports = basex(ALPHABET)\n","'use strict'\n// base-x encoding / decoding\n// Copyright (c) 2018 base-x contributors\n// Copyright (c) 2014-2018 The Bitcoin Core developers (base58.cpp)\n// Distributed under the MIT software license, see the accompanying\n// file LICENSE or http://www.opensource.org/licenses/mit-license.php.\nfunction base (ALPHABET) {\n  if (ALPHABET.length >= 255) { throw new TypeError('Alphabet too long') }\n  var BASE_MAP = new Uint8Array(256)\n  for (var j = 0; j < BASE_MAP.length; j++) {\n    BASE_MAP[j] = 255\n  }\n  for (var i = 0; i < ALPHABET.length; i++) {\n    var x = ALPHABET.charAt(i)\n    var xc = x.charCodeAt(0)\n    if (BASE_MAP[xc] !== 255) { throw new TypeError(x + ' is ambiguous') }\n    BASE_MAP[xc] = i\n  }\n  var BASE = ALPHABET.length\n  var LEADER = ALPHABET.charAt(0)\n  var FACTOR = Math.log(BASE) / Math.log(256) // log(BASE) / log(256), rounded up\n  var iFACTOR = Math.log(256) / Math.log(BASE) // log(256) / log(BASE), rounded up\n  function encode (source) {\n    if (source instanceof Uint8Array) {\n    } else if (ArrayBuffer.isView(source)) {\n      source = new Uint8Array(source.buffer, source.byteOffset, source.byteLength)\n    } else if (Array.isArray(source)) {\n      source = Uint8Array.from(source)\n    }\n    if (!(source instanceof Uint8Array)) { throw new TypeError('Expected Uint8Array') }\n    if (source.length === 0) { return '' }\n        // Skip & count leading zeroes.\n    var zeroes = 0\n    var length = 0\n    var pbegin = 0\n    var pend = source.length\n    while (pbegin !== pend && source[pbegin] === 0) {\n      pbegin++\n      zeroes++\n    }\n        // Allocate enough space in big-endian base58 representation.\n    var size = ((pend - pbegin) * iFACTOR + 1) >>> 0\n    var b58 = new Uint8Array(size)\n        // Process the bytes.\n    while (pbegin !== pend) {\n      var carry = source[pbegin]\n            // Apply \"b58 = b58 * 256 + ch\".\n      var i = 0\n      for (var it1 = size - 1; (carry !== 0 || i < length) && (it1 !== -1); it1--, i++) {\n        carry += (256 * b58[it1]) >>> 0\n        b58[it1] = (carry % BASE) >>> 0\n        carry = (carry / BASE) >>> 0\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i\n      pbegin++\n    }\n        // Skip leading zeroes in base58 result.\n    var it2 = size - length\n    while (it2 !== size && b58[it2] === 0) {\n      it2++\n    }\n        // Translate the result into a string.\n    var str = LEADER.repeat(zeroes)\n    for (; it2 < size; ++it2) { str += ALPHABET.charAt(b58[it2]) }\n    return str\n  }\n  function decodeUnsafe (source) {\n    if (typeof source !== 'string') { throw new TypeError('Expected String') }\n    if (source.length === 0) { return new Uint8Array() }\n    var psz = 0\n        // Skip and count leading '1's.\n    var zeroes = 0\n    var length = 0\n    while (source[psz] === LEADER) {\n      zeroes++\n      psz++\n    }\n        // Allocate enough space in big-endian base256 representation.\n    var size = (((source.length - psz) * FACTOR) + 1) >>> 0 // log(58) / log(256), rounded up.\n    var b256 = new Uint8Array(size)\n        // Process the characters.\n    while (source[psz]) {\n            // Find code of next character\n      var charCode = source.charCodeAt(psz)\n            // Base map can not be indexed using char code\n      if (charCode > 255) { return }\n            // Decode character\n      var carry = BASE_MAP[charCode]\n            // Invalid character\n      if (carry === 255) { return }\n      var i = 0\n      for (var it3 = size - 1; (carry !== 0 || i < length) && (it3 !== -1); it3--, i++) {\n        carry += (BASE * b256[it3]) >>> 0\n        b256[it3] = (carry % 256) >>> 0\n        carry = (carry / 256) >>> 0\n      }\n      if (carry !== 0) { throw new Error('Non-zero carry') }\n      length = i\n      psz++\n    }\n        // Skip leading zeroes in b256.\n    var it4 = size - length\n    while (it4 !== size && b256[it4] === 0) {\n      it4++\n    }\n    var vch = new Uint8Array(zeroes + (size - it4))\n    var j = zeroes\n    while (it4 !== size) {\n      vch[j++] = b256[it4++]\n    }\n    return vch\n  }\n  function decode (string) {\n    var buffer = decodeUnsafe(string)\n    if (buffer) { return buffer }\n    throw new Error('Non-base' + BASE + ' character')\n  }\n  return {\n    encode: encode,\n    decodeUnsafe: decodeUnsafe,\n    decode: decode\n  }\n}\nmodule.exports = base\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./base\"), exports);\n__exportStar(require(\"./bigint\"), exports);\n__exportStar(require(\"./decimal\"), exports);\n__exportStar(require(\"./native\"), exports);\n__exportStar(require(\"./web3\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.u256be = exports.u256 = exports.u192be = exports.u192 = exports.u128be = exports.u128 = exports.u64be = exports.u64 = exports.bigIntBE = exports.bigInt = void 0;\nconst buffer_layout_1 = require(\"@solana/buffer-layout\");\nconst bigint_buffer_1 = require(\"bigint-buffer\");\nconst base_1 = require(\"./base\");\nconst bigInt = (length) => (property) => {\n    const layout = (0, buffer_layout_1.blob)(length, property);\n    const { encode, decode } = (0, base_1.encodeDecode)(layout);\n    const bigIntLayout = layout;\n    bigIntLayout.decode = (buffer, offset) => {\n        const src = decode(buffer, offset);\n        return (0, bigint_buffer_1.toBigIntLE)(Buffer.from(src));\n    };\n    bigIntLayout.encode = (bigInt, buffer, offset) => {\n        const src = (0, bigint_buffer_1.toBufferLE)(bigInt, length);\n        return encode(src, buffer, offset);\n    };\n    return bigIntLayout;\n};\nexports.bigInt = bigInt;\nconst bigIntBE = (length) => (property) => {\n    const layout = (0, buffer_layout_1.blob)(length, property);\n    const { encode, decode } = (0, base_1.encodeDecode)(layout);\n    const bigIntLayout = layout;\n    bigIntLayout.decode = (buffer, offset) => {\n        const src = decode(buffer, offset);\n        return (0, bigint_buffer_1.toBigIntBE)(Buffer.from(src));\n    };\n    bigIntLayout.encode = (bigInt, buffer, offset) => {\n        const src = (0, bigint_buffer_1.toBufferBE)(bigInt, length);\n        return encode(src, buffer, offset);\n    };\n    return bigIntLayout;\n};\nexports.bigIntBE = bigIntBE;\nexports.u64 = (0, exports.bigInt)(8);\nexports.u64be = (0, exports.bigIntBE)(8);\nexports.u128 = (0, exports.bigInt)(16);\nexports.u128be = (0, exports.bigIntBE)(16);\nexports.u192 = (0, exports.bigInt)(24);\nexports.u192be = (0, exports.bigIntBE)(24);\nexports.u256 = (0, exports.bigInt)(32);\nexports.u256be = (0, exports.bigIntBE)(32);\n//# sourceMappingURL=bigint.js.map","/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\n/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n"],"names":["Object","defineProperty","exports","value","s16","s8","nu64be","u48be","u40be","u32be","u24be","u16be","nu64","u48","u40","u32","u24","u16","u8","offset","greedy","Constant","UTF8","CString","Blob","Boolean","BitField","BitStructure","VariantLayout","Union","UnionLayoutDiscriminator","UnionDiscriminator","Structure","Sequence","DoubleBE","Double","FloatBE","Float","NearInt64BE","NearInt64","NearUInt64BE","NearUInt64","IntBE","Int","UIntBE","UInt","OffsetLayout","GreedyCount","ExternalLayout","bindConstructorLayout","nameWithProperty","Layout","uint8ArrayToBuffer","checkUint8Array","constant","utf8","cstr","blob","unionLayoutDiscriminator","union","seq","bits","struct","f64be","f64","f32be","f32","ns64be","s48be","s40be","s32be","s24be","s16be","ns64","s48","s40","s32","s24","buffer_1","b","Uint8Array","TypeError","Buffer","from","buffer","byteOffset","length","constructor","span","property","Number","isInteger","this","makeDestinationObject","getSpan","RangeError","replicate","rv","create","prototype","assign","fromArray","values","name","lo","Class","layout","hasOwnProperty","call","Error","layout_","boundConstructor_","encode","writable","decode","isCount","elementSpan","super","rem","Math","floor","src","readUIntLE","writeUIntLE","readUIntBE","writeUIntBE","readIntLE","writeIntLE","readIntBE","writeIntBE","V2E32","pow","divmodInt64","hi32","lo32","roundedInt64","readUInt32LE","split","writeUInt32LE","readUInt32BE","writeUInt32BE","readInt32LE","writeInt32LE","readInt32BE","writeInt32BE","readFloatLE","writeFloatLE","readFloatBE","writeFloatBE","readDoubleLE","writeDoubleLE","readDoubleBE","writeDoubleBE","elementLayout","count","idx","i","push","elo","reduce","v","fields","decodePrefixes","Array","isArray","acc","undefined","fd","e","fsp","dest","firstOffset","lastOffset","lastWrote","fv","shift","layoutFor","offsetOf","discr","defaultLayout","discriminator","usesPrefixDiscriminator","registry","boundGetSourceVariant","defaultGetSourceVariant","bind","getSourceVariant","configGetSourceVariant","gsv","vlo","getVariant","tag","dlo","clo","contentOffset","addVariant","variant","vb","fixBitwiseResult","word","msb","_packedSetValue","_packedGetValue","addField","bf","addBoolean","fieldFor","container","totalBits","usedBits","sum","valueMask","start","wordMask","wordValue","slice","srcBuffer","write","toString","String","srcb","copy","maxSpan","publicKey","buffer_layout_1","web3_js_1","base_1","encodeDecode","publicKeyLayout","PublicKey","toBuffer","SolanaMobileWalletAdapterErrorCode","SolanaMobileWalletAdapterError","args","code","message","data","SolanaMobileWalletAdapterProtocolError","jsonRpcMessageId","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","then","apply","createHelloReq","ecdhPublicKey","associationKeypairPrivateKey","publicKeyBuffer","crypto","subtle","exportKey","signatureBuffer","sign","hash","response","byteLength","set","SolanaCloneAuthorization","createMobileWalletProxy","protocolVersion","protocolRequestHandler","Proxy","get","target","p","inputParams","method","params","methodName","methodParams","replace","letter","toLowerCase","chain","cluster","auth_token","identity","handleMobileWalletRequest","sign_in_payload","sign_in_result","signInPayload","authorizationResult","_a","domain","window","location","host","address","accounts","siwsMessage","payload","input","createSIWSMessage","btoa","signed_message","signature","addresses","payloads","signed_payloads","signInFallback","capabilities","features","supports_clone_authorization","supports_sign_and_send_transactions","includes","handleMobileWalletResponse","deleteProperty","decryptMessage","sharedSecret","sequenceNumberVector","initializationVector","SEQUENCE_NUMBER_BYTES","ciphertext","plaintextBuffer","decrypt","getAlgorithmParams","_utf8Decoder","TextDecoder","sequenceNumber","additionalData","iv","tagLength","generateECDHKeypair","generateKey","namedCurve","encryptJsonRpcMessage","jsonRpcMessage","plaintext","byteArray","ArrayBuffer","DataView","setUint32","createSequenceNumberVector","getRandomValues","encrypt","TextEncoder","encryptMessage","JSON","stringify","id","assertAssociationPort","port","getPathParts","pathString","_frame","startSession","associationPublicKey","associationURLBase","randomAssociationPort","random","associationUrl","putativePort","protocolVersions","associationPort","encodedKey","binary","bytes","len","ii","fromCharCode","arrayBufferToBase64String","url","methodPathname","intentUrlBase","baseUrl","URL","protocol","pathname","startsWith","join","getIntentURL","searchParams","m","forEach","version","getAssociateAndroidIntentURL","navigator","userAgent","indexOf","document","createElement","style","display","body","appendChild","contentWindow","href","detectionPromise","cleanup","clearTimeout","timeoutId","removeEventListener","handleBlur","addEventListener","setTimeout","launchAssociation","WEBSOCKET_CONNECTION_CONFIG","retryDelayScheduleMs","timeoutMs","getSequenceNumberFromByteArray","getUint32","__rest","s","t","getOwnPropertySymbols","propertyIsEnumerable","fromUint8Array","toUint8Array","base64EncodedByteArray","atob","map","c","charCodeAt","getPayloadFromTransaction","transaction","serialize","requireAllSignatures","verifySignatures","getTransactionFromWireMessage","messageOffset","SIGNATURE_LENGTH_IN_BYTES","VersionedMessage","deserializeMessageVersion","Transaction","VersionedTransaction","deserialize","callback","config","isSecureContext","assertSecureContext","associationKeypair","generateAssociationKeypair","websocketURL","baseUri","connectionStartTime","getNextRetryDelayMs","schedule","nextJsonRpcMessageId","lastKnownInboundSequenceNumber","state","__type","socket","jsonRpcResponsePromises","handleOpen","console","warn","ecdhKeypair","send","privateKey","ecdhPrivateKey","handleClose","evt","wasClean","reason","closeEvent","disposeSocket","handleError","_evt","Date","now","retryDelayMs","retryWaitTimeoutId","attemptSocketConnection","handleMessage","responseBuffer","arrayBuffer","parse","error","decryptJsonRpcMessage","responsePromise","payloadBuffer","associationPublicKeyBuffer","walletPublicKey","all","importKey","deriveBits","public","ecdhSecretKey","deriveKey","salt","info","parseHelloRsp","sessionPropertiesBuffer","sessionProperties","jsonProperties","protocol_version","parseSessionProps","wallet","jsonrpc","wallet_uri_base","walletUriBase","assertSecureEndpointSpecificURI","close","WebSocket","transact","augmentedAPI","minContextSlot","commitment","skipPreflight","maxRetries","waitForCommitmentToSendNextTransaction","transactions","rest","options","min_context_slot","skip_preflight","max_retries","wait_for_commitment_to_send_next_transaction","signatures","base64EncodedSignatures","signAndSendTransactions","some","element","bs58","base64EncodedPayloads","base64EncodedSignedMessages","signMessages","base64EncodedCompiledTransactions","signTransactions","SolanaMobileWalletAdapterWalletName","isVersionedTransaction","SolanaMobileWalletAdapter","supportedTransactionVersions","Set","icon","_connecting","_connectionGeneration","_readyState","test","Loadable","Unsupported","_authorizationResultCache","authorizationResultCache","_addressSelector","addressSelector","_appIdentity","appIdentity","_chain","clusterToChainId","_hostAuthority","remoteHostAuthority","_onWalletNotFound","onWalletNotFound","declareWalletAsInstalled","_publicKey","_selectedAddress","publicKeyByteArray","getPublicKeyFromAddress$1","connected","_authorizationResult","connecting","readyState","Installed","emit","runWithGuard","autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","autoConnect","cachedAuthorizationResult","handleAuthorizationResult","connect","performAuthorization","authorize","didPublicKeysChange","account","nextSelectedAddress","select","performReauthorization","authToken","disconnect","clear","remoteConfig","currentConnectionGeneration","assertIsAuthorized","selectedAddress","performSignTransactions","sendTransaction","connection","getTargetCommitment","targetCommitment","targetPreflightCommitment","preflightCommitment","_1","_2","getCapabilities","feePayer","recentBlockhash","blockhash","getLatestBlockhash","signedTransaction","serializedTransaction","sendRawTransaction","signTransaction","signAllTransactions","signMessage","signedMessage","signIn","_b","signedInAddress","find","createDefaultAddressSelector","CACHE_KEY","createDefaultAuthorizationResultCache","storage","localStorage","removeItem","getItem","setItem","defaultWalletNotFoundHandler","mobileWalletAdapter","createDefaultWalletNotFoundHandler","__importDefault","mod","__esModule","decimal","WAD","bignumber_js_1","bigint_1","default","u128","decimalLayout","div","BigInt","times","integerValue","bigInt","bigIntLayout","toBigIntLE","toBufferLE","bigIntBE","toBigIntBE","toBufferBE","u64","bool","boolLayout","isCommonjs","module","fn","val","fnMap","l","ret","eventNameMap","change","fullscreenchange","fullscreenerror","screenfull","request","onFullScreenEntered","off","on","returnPromise","documentElement","requestFullscreen","catch","exit","isFullscreen","onFullScreenExit","exitFullscreen","toggle","onchange","onerror","event","eventName","raw","defineProperties","fullscreenElement","enumerable","isEnabled","fullscreenEnabled","counter","buckets","setHarmonicInterval","ms","listeners","timer","setInterval","lastError","didThrow","_i","listener","bucket","clearHarmonicInterval","hasListeners","clearInterval","basex","ALPHABET","BASE_MAP","j","x","charAt","xc","BASE","LEADER","FACTOR","log","iFACTOR","decodeUnsafe","source","psz","zeroes","size","b256","charCode","carry","it3","it4","vch","isView","pbegin","pend","b58","it1","it2","str","repeat","string","__createBinding","o","k","k2","__exportStar","u256be","u256","u192be","u192","u128be","u64be","bigint_buffer_1","copyProps","dst","key","SafeBuffer","arg","encodingOrOffset","alloc","allocUnsafe","allocUnsafeSlow","fill","encoding","buf","SlowBuffer"],"sourceRoot":""}